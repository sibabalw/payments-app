import{c as S,r as b,j as e,a as v,H as w,L as g}from"./app-CMeUrf50.js";import{B as j}from"./x-CZYrHTRQ.js";import{C as f,c as y,a as A,b as D}from"./card-Cwxw5GdZ.js";import{S as L,a as P,b as C,c as Z,d as _}from"./select-BU5oTjNs.js";import{A as k}from"./app-layout-nNCjU6Ur.js";import{F as N}from"./file-text-DBGV6D9F.js";/* empty css            */import"./index-BQCSxHRW.js";import"./index-wVJuMR_H.js";import"./check-DXgzueCv.js";import"./chevron-up-B8DO_JqK.js";import"./app-sidebar-header-CztvwVfL.js";import"./appearance-dropdown-CIplfUHR.js";import"./index-CASGKN-W.js";import"./index-Cfp_L9w6.js";import"./log-out-C9Jhd31W.js";import"./badge-CpbHZjhE.js";import"./proxy-B-sAeQ2V.js";import"./circle-check-Bv3Kk_K_.js";import"./loader-circle-PC8s1h8o.js";import"./circle-x-qFpOssZO.js";import"./circle-alert-tomiUAeh.js";import"./plus-BJ4kQvgy.js";import"./dollar-sign-3i0DvXHD.js";import"./message-square-Bem12P6R.js";import"./users-BjCKGoHP.js";import"./user-check-B_uMkO9r.js";import"./clock-C3FzQv_v.js";import"./shield-CzJFJRG5.js";const E=[{title:"Payroll",href:"/payroll"},{title:"Jobs",href:"#"}];function xe(t){const s=S.c(15),{jobs:a,employees:r,filters:l}=t,[p,F]=b.useState(l?.employee_id||"");let m;s[0]!==l?.business_id||s[1]!==l?.status?(m=h=>{F(h),v.get("/payroll/jobs",{employee_id:h==="all"?null:h,business_id:l?.business_id||null,status:l?.status||null},{preserveState:!0})},s[0]=l?.business_id,s[1]=l?.status,s[2]=m):m=s[2];const u=m;let d;s[3]===Symbol.for("react.memo_cache_sentinel")?(d=e.jsx(w,{title:"Payroll Jobs"}),s[3]=d):d=s[3];let o;s[4]===Symbol.for("react.memo_cache_sentinel")?(o=e.jsx("h1",{className:"text-2xl font-bold",children:"Payroll Jobs"}),s[4]=o):o=s[4];let c;s[5]===Symbol.for("react.memo_cache_sentinel")?(c=e.jsxs("div",{className:"flex items-center justify-between",children:[o,e.jsx(g,{href:"/payslips",children:e.jsxs(j,{variant:"outline",children:[e.jsx(N,{className:"mr-2 h-4 w-4"}),"View All Payslips"]})})]}),s[5]=c):c=s[5];let i;s[6]!==p||s[7]!==r||s[8]!==u?(i=r&&r.length>0&&e.jsx(f,{children:e.jsx(y,{className:"pt-6",children:e.jsxs("div",{className:"max-w-xs",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Filter by Employee"}),e.jsxs(L,{value:p||"all",onValueChange:u,children:[e.jsx(P,{children:e.jsx(C,{placeholder:"All employees"})}),e.jsxs(Z,{children:[e.jsx(_,{value:"all",children:"All employees"}),r.map($)]})]})]})})}),s[6]=p,s[7]=r,s[8]=u,s[9]=i):i=s[9];let n;s[10]!==a?(n=a?.data&&a.data.length>0?e.jsx("div",{className:"space-y-4",children:a.data.map(R)}):e.jsx(f,{children:e.jsx(y,{className:"py-10 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No payroll jobs found."})})}),s[10]=a,s[11]=n):n=s[11];let x;return s[12]!==i||s[13]!==n?(x=e.jsxs(k,{breadcrumbs:E,children:[d,e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[c,i,n]})]}),s[12]=i,s[13]=n,s[14]=x):x=s[14],x}function R(t){return e.jsxs(f,{children:[e.jsx(A,{children:e.jsx(D,{children:t.payroll_schedule?.name||"Payroll Schedule"})}),e.jsx(y,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.employee?.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.pay_period_start&&t.pay_period_end?`${new Date(t.pay_period_start).toLocaleDateString()} - ${new Date(t.pay_period_end).toLocaleDateString()}`:"Pay period not specified"})]}),e.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${t.status==="succeeded"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":t.status==="failed"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:t.status})]}),e.jsx("div",{className:"border-t pt-3 space-y-2",children:(()=>{const s=parseFloat(t.gross_salary),a=r=>s===0?0:r/s*100;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Gross Salary:"}),e.jsxs("span",{className:"font-medium",children:["ZAR ",s.toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex justify-between text-sm text-red-600",children:[e.jsx("span",{children:"PAYE:"}),e.jsxs("span",{children:["- ZAR ",parseFloat(t.paye_amount).toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2}),e.jsxs("span",{className:"text-muted-foreground ml-2",children:["(",a(parseFloat(t.paye_amount)).toFixed(2),"%)"]})]})]}),e.jsxs("div",{className:"flex justify-between text-sm text-red-600",children:[e.jsx("span",{children:"UIF:"}),e.jsxs("span",{children:["- ZAR ",parseFloat(t.uif_amount).toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2}),e.jsxs("span",{className:"text-muted-foreground ml-2",children:["(",a(parseFloat(t.uif_amount)).toFixed(2),"%)"]})]})]}),e.jsxs("div",{className:"border-t pt-2 flex justify-between font-bold",children:[e.jsx("span",{children:"Net Salary (Paid):"}),e.jsxs("span",{className:"text-green-600",children:["ZAR ",parseFloat(t.net_salary).toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),parseFloat(t.sdl_amount)>0&&e.jsx("div",{className:"border-t pt-2 mt-2",children:e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[e.jsx("span",{children:"SDL (Employer Cost - not deducted from employee):"}),e.jsxs("span",{children:["ZAR ",parseFloat(t.sdl_amount).toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})})]})})()}),t.error_message&&e.jsx("div",{className:"mt-2 p-2 bg-red-50 dark:bg-red-900/20 rounded text-sm text-red-600",children:t.error_message}),t.status==="succeeded"&&e.jsx("div",{className:"mt-3 pt-3 border-t",children:e.jsx(g,{href:`/payslips/${t.id}`,children:e.jsxs(j,{variant:"outline",size:"sm",className:"w-full",children:[e.jsx(N,{className:"mr-2 h-4 w-4"}),"View Payslip"]})})})]})})]},t.id)}function $(t){return e.jsx(_,{value:String(t.id),children:t.name},t.id)}export{xe as default};
