import{c as A,r as w,j as s,a as p,H as D,L as F}from"./app-BRoNAUIM.js";import{B as S}from"./x-pZV5lkp5.js";import{C as b,c as L,a as R,b as E,d as B}from"./card-Bag7gWUQ.js";import{S as H,a as O,b as V,c as z,d as a}from"./select-Cv0uEHLH.js";import{A as I}from"./admin-layout-BnJz0fFz.js";import{C as $}from"./confirmation-dialog-C1x4I7_a.js";import{F as _}from"./file-text-FWLsz4T5.js";import{R as q}from"./refresh-cw-B4Z2ZGYr.js";import{T as G}from"./trash-2-CIYc90GQ.js";import{C as J}from"./chevron-left-uzkLnT6H.js";/* empty css            */import"./index-CfMSX17F.js";import"./index-BohsM0ZD.js";import"./check-CU7v0mdS.js";import"./chevron-up-DDm2opro.js";import"./app-sidebar-header-BbzcXdQi.js";import"./appearance-dropdown-BEtN_wNg.js";import"./index-CBJSSLbQ.js";import"./index-Cfp_L9w6.js";import"./log-out-MC42nTzo.js";import"./shield-Kl3V0fgW.js";import"./users-CEYKQlp0.js";import"./message-square-CEp_sz_O.js";import"./lock-Dth4hMuh.js";import"./chart-column-DlXi8TWy.js";import"./dialog-DKQrbPU1.js";import"./spinner-D5nmHZNm.js";import"./loader-circle-CafrvZjs.js";import"./circle-help-4VBCcThn.js";import"./info-DaNQh9-Y.js";import"./triangle-alert-D6PyCIl6.js";const K=[{title:"Admin",href:"/admin"},{title:"Logs",href:"/admin/logs"}];function Le(h){const e=A.c(17),{logExists:f,logSize:u,logContent:l,lines:j}=h,[g,v]=w.useState(!1);let i;e[0]!==j?(i=j.toString(),e[0]=j,e[1]=i):i=e[1];const[C,y]=w.useState(i);let o;e[2]===Symbol.for("react.memo_cache_sentinel")?(o=N=>{y(N),p.get("/admin/logs",{lines:parseInt(N)},{preserveState:!0,preserveScroll:!0})},e[2]=o):o=e[2];const T=o;let n;e[3]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{p.post("/admin/logs/clear",{},{onSuccess:()=>{v(!1),p.reload()}})},e[3]=n):n=e[3];const k=n;let c;e[4]===Symbol.for("react.memo_cache_sentinel")?(c=s.jsx(D,{title:"Admin - Logs"}),e[4]=c):c=e[4];let m;e[5]===Symbol.for("react.memo_cache_sentinel")?(m=s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Application Logs"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"View and manage application logs"})]}),e[5]=m):m=e[5];let d;e[6]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsxs("div",{className:"flex items-center justify-between",children:[m,s.jsx(F,{href:"/admin",children:s.jsxs(S,{variant:"outline",children:[s.jsx(J,{className:"mr-2 h-4 w-4"}),"Back to Dashboard"]})})]}),e[6]=d):d=e[6];let t;e[7]!==l||e[8]!==f||e[9]!==u||e[10]!==C?(t=f?s.jsx(s.Fragment,{children:s.jsxs(b,{children:[s.jsxs(R,{className:"flex flex-row items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(E,{className:"flex items-center gap-2",children:[s.jsx(_,{className:"h-5 w-5"}),"Log File"]}),s.jsxs(B,{children:["Size: ",u," | Showing last ",l.length," lines"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(H,{value:C,onValueChange:T,children:[s.jsx(O,{className:"w-[120px]",children:s.jsx(V,{})}),s.jsxs(z,{children:[s.jsx(a,{value:"50",children:"50 lines"}),s.jsx(a,{value:"100",children:"100 lines"}),s.jsx(a,{value:"200",children:"200 lines"}),s.jsx(a,{value:"500",children:"500 lines"}),s.jsx(a,{value:"1000",children:"1000 lines"})]})]}),s.jsxs(S,{variant:"outline",onClick:P,children:[s.jsx(q,{className:"mr-2 h-4 w-4"}),"Refresh"]}),s.jsxs(S,{variant:"destructive",onClick:()=>v(!0),children:[s.jsx(G,{className:"mr-2 h-4 w-4"}),"Clear Logs"]})]})]}),s.jsx(L,{children:s.jsx("div",{className:"bg-slate-950 dark:bg-slate-900 rounded-md p-4 font-mono text-xs overflow-x-auto max-h-[600px] overflow-y-auto",children:l.length>0?l.map(M):s.jsx("div",{className:"text-slate-500",children:"No log entries"})})})]})}):s.jsx(b,{children:s.jsxs(L,{className:"py-8 text-center",children:[s.jsx(_,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"No log file found"})]})}),e[7]=l,e[8]=f,e[9]=u,e[10]=C,e[11]=t):t=e[11];let r;e[12]!==g?(r=s.jsx($,{open:g,onOpenChange:v,onConfirm:k,title:"Clear Log File",description:"Are you sure you want to clear the log file? This action cannot be undone.",confirmText:"Clear",variant:"destructive"}),e[12]=g,e[13]=r):r=e[13];let x;return e[14]!==t||e[15]!==r?(x=s.jsxs(I,{breadcrumbs:K,children:[c,s.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[d,t,r]})]}),e[14]=t,e[15]=r,e[16]=x):x=e[16],x}function M(h,e){return s.jsx("div",{className:"text-slate-300 whitespace-pre-wrap break-words",children:h},e)}function P(){return p.reload()}export{Le as default};
