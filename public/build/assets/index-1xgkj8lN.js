import{c as ie,r as Z,j as e,L as H,a as $,H as q}from"./app-DlRq_5I-.js";import{B as y}from"./createLucideIcon-DfICN48Q.js";import{C as c,a as M,b as B,d as U,c as n}from"./card-BpVtH_kK.js";import{B as z}from"./badge-DkQNu0Ve.js";import{a as ce,b as ne,c as de,S as me,d as X}from"./select-Ba948_P_.js";import{A as J}from"./app-layout-B1Fh94R8.js";import{C as K}from"./circle-check-CTpeSp7r.js";import{S as oe}from"./square-pen-DFFOpHGM.js";import{D as xe}from"./download-Ds526V6q.js";import{F as O}from"./file-spreadsheet-VFoac3JG.js";import{S as he}from"./shield-Bc8H0Rwn.js";import{A as pe}from"./arrow-left-DqJK0bh-.js";import{P as ue}from"./plus-CLDQrfk-.js";import{R as je}from"./refresh-cw-CABjQ2qD.js";import{C as Q}from"./circle-check-big-CUq_AcU2.js";import{C as fe}from"./circle-alert-BMPPz6PA.js";/* empty css            */import"./index-BlmLjsw4.js";import"./chevron-down-DBn0VZdD.js";import"./x-RYBOgl4T.js";import"./index-D8-tZbVS.js";import"./index-qKkV1P3H.js";import"./chevron-right-FxPRos96.js";import"./check-57gXsznI.js";import"./chevron-up-C3E08OMs.js";import"./app-sidebar-header-DViv9NrM.js";import"./index-B1IOqWwB.js";import"./appearance-dropdown-kWEtid9a.js";import"./index-Dl5gb-Kb.js";import"./index-BC94lCP7.js";import"./index-CcLcdVZM.js";import"./log-out-BKe7v_gT.js";import"./proxy-DB18oa0z.js";import"./loader-circle-DB6syjKq.js";import"./circle-x-DCpd_SlB.js";import"./credit-card-BEASO8FW.js";import"./dollar-sign-CAhazD9z.js";import"./message-square-BIfa93Ti.js";import"./file-text-DtJO93Xu.js";import"./users-DkXA52Op.js";import"./user-check-BIHcPLhA.js";import"./clock-eJfs3CCo.js";const W=[{title:"Compliance",href:"/compliance"},{title:"EMP201 Helper",href:"/compliance/emp201"}];function xt(r){const t=ie.c(45),{business:ee,submissions:i,pendingPeriods:G,previewData:l,checklist:_,selectedPeriod:te}=r,[d,se]=Z.useState(te||""),[S,V]=Z.useState(!1),a=Se,I=_e;let v;t[0]===Symbol.for("react.memo_cache_sentinel")?(v=s=>{se(s),$.get("/compliance/emp201",{period:s},{preserveState:!0})},t[0]=v):v=t[0];const le=v;let w;t[1]!==d?(w=()=>{d&&(V(!0),$.post("/compliance/emp201/generate",{period:d},{onFinish:()=>V(!1)}))},t[1]=d,t[2]=w):w=t[2];const T=w,re=ye,ae=be;if(!ee){let s;t[3]===Symbol.for("react.memo_cache_sentinel")?(s=e.jsx(q,{title:"EMP201 Helper"}),t[3]=s):s=t[3];let b,F,L;t[4]===Symbol.for("react.memo_cache_sentinel")?(b=e.jsx(he,{className:"h-12 w-12 text-muted-foreground mb-4"}),F=e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"No Business Selected"}),L=e.jsx("p",{className:"text-muted-foreground text-center mb-4",children:"Please select a business to manage EMP201 submissions."}),t[4]=b,t[5]=F,t[6]=L):(b=t[4],F=t[5],L=t[6]);let R;return t[7]===Symbol.for("react.memo_cache_sentinel")?(R=e.jsxs(J,{breadcrumbs:W,children:[s,e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 p-4",children:e.jsx(c,{children:e.jsxs(n,{className:"flex flex-col items-center justify-center py-12",children:[b,F,L,e.jsx(y,{asChild:!0,children:e.jsx(H,{href:"/businesses",children:"Go to Businesses"})})]})})})]}),t[7]=R):R=t[7],R}let C;t[8]===Symbol.for("react.memo_cache_sentinel")?(C=e.jsx(q,{title:"EMP201 Helper"}),t[8]=C):C=t[8];let P;t[9]===Symbol.for("react.memo_cache_sentinel")?(P=e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(y,{variant:"ghost",size:"icon",asChild:!0,children:e.jsx(H,{href:"/compliance",children:e.jsx(pe,{className:"h-4 w-4"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"EMP201 Monthly Submission"}),e.jsx("p",{className:"text-muted-foreground",children:"Prepare PAYE, UIF, and SDL data for SARS eFiling"})]})]})}),t[9]=P):P=t[9];let E;t[10]===Symbol.for("react.memo_cache_sentinel")?(E=e.jsxs(M,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"h-5 w-5"}),"Prepare EMP201 Data"]}),e.jsx(U,{children:"Select a period to calculate tax liabilities for SARS submission"})]}),t[10]=E):E=t[10];let A;t[11]===Symbol.for("react.memo_cache_sentinel")?(A=e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Period"}),t[11]=A):A=t[11];let k;t[12]===Symbol.for("react.memo_cache_sentinel")?(k=e.jsx(ce,{children:e.jsx(ne,{placeholder:"Select period"})}),t[12]=k):k=t[12];let m;t[13]!==G?(m=G.map(Ne),t[13]=G,t[14]=m):m=t[14];let o;t[15]!==i?(o=i.map(ge),t[15]=i,t[16]=o):o=t[16];let x;t[17]!==m||t[18]!==o?(x=e.jsxs(de,{children:[m,o]}),t[17]=m,t[18]=o,t[19]=x):x=t[19];let h;t[20]!==d||t[21]!==x?(h=e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[A,e.jsxs(me,{value:d,onValueChange:le,children:[k,x]})]}),t[20]=d,t[21]=x,t[22]=h):h=t[22];const Y=!d||S;let p;t[23]!==S?(p=S?e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"mr-2 h-4 w-4 animate-spin"}),"Calculating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),"Generate EMP201 Data"]}),t[23]=S,t[24]=p):p=t[24];let u;t[25]!==T||t[26]!==Y||t[27]!==p?(u=e.jsx(y,{onClick:T,disabled:Y,children:p}),t[25]=T,t[26]=Y,t[27]=p,t[28]=u):u=t[28];let j;t[29]!==h||t[30]!==u?(j=e.jsxs(c,{children:[E,e.jsx(n,{children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[h,u]})})]}),t[29]=h,t[30]=u,t[31]=j):j=t[31];let f;t[32]!==_||t[33]!==l?(f=l&&e.jsxs(e.Fragment,{children:[_.length>0&&e.jsxs(c,{children:[e.jsxs(M,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-5 w-5"}),"Submission Checklist"]}),e.jsxs(U,{children:["Deadline: ",I(l.submission_deadline)]})]}),e.jsx(n,{children:e.jsx("div",{className:"space-y-4",children:_.map((s,b)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[ae(s.status),e.jsx("span",{className:"font-medium",children:s.item})]}),e.jsx("span",{className:"font-bold",children:a(s.amount)})]},b))})})]}),e.jsxs(c,{children:[e.jsxs(M,{children:[e.jsxs(B,{children:["Tax Summary: ",l.period_display]}),e.jsxs(U,{children:["Generated: ",I(l.generated_at)]})]}),e.jsxs(n,{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-4 p-4 bg-muted/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Business Name"}),e.jsx("p",{className:"font-medium",children:l.business.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"PAYE Reference"}),e.jsx("p",{className:"font-medium",children:l.business.paye_reference||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"SDL Reference"}),e.jsx("p",{className:"font-medium",children:l.business.sdl_reference||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"UIF Reference"}),e.jsx("p",{className:"font-medium",children:l.business.uif_reference||"N/A"})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(c,{className:"border-blue-200 bg-blue-50 dark:border-blue-800 dark:bg-blue-950",children:e.jsxs(n,{className:"pt-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"PAYE"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:a(l.totals.total_paye)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Pay As You Earn"})]})}),e.jsx(c,{className:"border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-950",children:e.jsxs(n,{className:"pt-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"UIF Total"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:a(l.totals.total_uif)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Employee: ",a(l.totals.total_uif_employee)," | Employer: ",a(l.totals.total_uif_employer)]})]})}),e.jsx(c,{className:"border-purple-200 bg-purple-50 dark:border-purple-800 dark:bg-purple-950",children:e.jsxs(n,{className:"pt-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"SDL"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:a(l.totals.total_sdl)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Skills Development Levy"})]})}),e.jsx(c,{className:"border-primary bg-primary/5",children:e.jsxs(n,{className:"pt-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Liability"}),e.jsx("p",{className:"text-2xl font-bold text-primary",children:a(l.totals.total_liability)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Amount due to SARS"})]})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 p-4 bg-muted/30 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Number of Employees"}),e.jsx("p",{className:"text-xl font-bold",children:l.totals.employees_count})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Gross Remuneration"}),e.jsx("p",{className:"text-xl font-bold",children:a(l.totals.total_gross)})]})]}),l.employees.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Employee Breakdown"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-muted/50",children:[e.jsx("th",{className:"text-left p-3",children:"Tax Number"}),e.jsx("th",{className:"text-left p-3",children:"Employee"}),e.jsx("th",{className:"text-right p-3",children:"Gross"}),e.jsx("th",{className:"text-right p-3",children:"PAYE"}),e.jsx("th",{className:"text-right p-3",children:"UIF (Emp)"}),e.jsx("th",{className:"text-right p-3",children:"UIF (Er)"}),e.jsx("th",{className:"text-right p-3",children:"SDL"})]})}),e.jsx("tbody",{children:l.employees.map(s=>e.jsxs("tr",{className:"border-b hover:bg-muted/30",children:[e.jsx("td",{className:"p-3 font-mono text-xs",children:s.tax_number||"N/A"}),e.jsx("td",{className:"p-3 font-medium",children:s.employee_name}),e.jsx("td",{className:"p-3 text-right",children:a(s.gross_salary)}),e.jsx("td",{className:"p-3 text-right text-blue-600",children:a(s.paye)}),e.jsx("td",{className:"p-3 text-right text-green-600",children:a(s.uif_employee)}),e.jsx("td",{className:"p-3 text-right text-green-600",children:a(s.uif_employer)}),e.jsx("td",{className:"p-3 text-right text-purple-600",children:a(s.sdl)})]},s.employee_id))})]})})]})]})]})]}),t[32]=_,t[33]=l,t[34]=f):f=t[34];let g;t[35]!==i?(g=i.length>0&&e.jsxs(c,{children:[e.jsx(M,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-5 w-5"}),"Generated EMP201 Data"]})}),e.jsx(n,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-3",children:"Period"}),e.jsx("th",{className:"text-left p-3",children:"Status"}),e.jsx("th",{className:"text-right p-3",children:"PAYE"}),e.jsx("th",{className:"text-right p-3",children:"UIF"}),e.jsx("th",{className:"text-right p-3",children:"SDL"}),e.jsx("th",{className:"text-right p-3",children:"Total"}),e.jsx("th",{className:"text-left p-3",children:"Generated"}),e.jsx("th",{className:"text-right p-3",children:"Actions"})]})}),e.jsx("tbody",{children:i.map(s=>e.jsxs("tr",{className:"border-b hover:bg-muted/30",children:[e.jsx("td",{className:"p-3 font-medium",children:s.period_display}),e.jsx("td",{className:"p-3",children:re(s.status)}),e.jsx("td",{className:"p-3 text-right",children:a(s.data?.totals?.total_paye||0)}),e.jsx("td",{className:"p-3 text-right",children:a(s.data?.totals?.total_uif||0)}),e.jsx("td",{className:"p-3 text-right",children:a(s.data?.totals?.total_sdl||0)}),e.jsx("td",{className:"p-3 text-right font-semibold",children:a(s.data?.totals?.total_liability||0)}),e.jsx("td",{className:"p-3 text-muted-foreground",children:I(s.created_at)}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[s.status!=="submitted"&&e.jsx(y,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(H,{href:`/compliance/emp201/${s.id}/edit`,children:[e.jsx(oe,{className:"mr-2 h-4 w-4"}),"Edit"]})}),e.jsx(y,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs("a",{href:`/compliance/emp201/${s.id}/download`,children:[e.jsx(xe,{className:"mr-2 h-4 w-4"}),"CSV"]})})]})})]},s.id))})]})})})]}),t[35]=i,t[36]=g):g=t[36];let N;t[37]!==l||t[38]!==i.length?(N=i.length===0&&!l&&e.jsx(c,{children:e.jsxs(n,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(O,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No EMP201 Data Yet"}),e.jsx("p",{className:"text-muted-foreground text-center",children:"Select a period above to calculate your tax liabilities."})]})}),t[37]=l,t[38]=i.length,t[39]=N):N=t[39];let D;return t[40]!==j||t[41]!==f||t[42]!==g||t[43]!==N?(D=e.jsxs(J,{breadcrumbs:W,children:[C,e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-4",children:[P,j,f,g,N]})]}),t[40]=j,t[41]=f,t[42]=g,t[43]=N,t[44]=D):D=t[44],D}function ge(r){return e.jsxs(X,{value:r.period,children:[r.period_display," (already generated)"]},r.period)}function Ne(r){return e.jsx(X,{value:r.value,children:r.label},r.value)}function be(r){switch(r){case"ready":return e.jsx(Q,{className:"h-5 w-5 text-green-500"});case"warning":return e.jsx(fe,{className:"h-5 w-5 text-amber-500"});default:return e.jsx(Q,{className:"h-5 w-5 text-muted-foreground"})}}function ye(r){switch(r){case"submitted":return e.jsx(z,{className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"Submitted"});case"generated":return e.jsx(z,{className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:"Generated"});default:return e.jsx(z,{variant:"secondary",children:r})}}function _e(r){return new Date(r).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric"})}function Se(r){return new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(r)}export{xt as default};
