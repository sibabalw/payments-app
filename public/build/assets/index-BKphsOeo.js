import{c as N,j as e,L as b,H as y}from"./app-DWDC-BVo.js";import{B as g}from"./createLucideIcon-CDiNb0OM.js";import{C as n,c as i,a as o,b as d}from"./card-ErUD2DV9.js";import{A as _,R as w}from"./app-layout-Csx9VZt2.js";import{C as k}from"./circle-alert-C7E7uvB-.js";import{B as v}from"./appearance-dropdown-Boh93vvE.js";import{C}from"./circle-check-DngFYpsd.js";import{C as B}from"./credit-card-DHCU20zw.js";/* empty css            */import"./app-sidebar-header-r-OiXY8i.js";import"./index-B-id3RBu.js";import"./index-BspEiaub.js";import"./x-Cr_BKX42.js";import"./index-l1Yz4tBP.js";import"./index-CcLcdVZM.js";import"./log-out-CNw_jzHT.js";import"./chevron-right-TaOApODu.js";import"./chevron-down-BehZftUK.js";import"./index-apnaeyBA.js";import"./badge-BnVI9wD_.js";import"./proxy-8KyYWbtH.js";import"./loader-circle-_uqlEWjJ.js";import"./circle-x-DCRTT9my.js";import"./plus-BwK_Jy3D.js";import"./dollar-sign-DGtOSjhC.js";import"./message-square-DRz1er9_.js";import"./file-text-xQShroE0.js";import"./users-CtagEMWm.js";import"./user-check-Dt0Yb2Ws.js";import"./clock-D4ogtgGS.js";import"./shield-B0GD2scd.js";import"./index-BCOzoWRm.js";const D=[{title:"Billing",href:"/billing"}];function oe(c){const s=N.c(8),{business:t,currentMonthBilling:r,currentMonthDepositFees:m,subscriptionFee:x,billingHistory:p}=c,a=A,f=S;let u;s[0]===Symbol.for("react.memo_cache_sentinel")?(u=e.jsx(y,{title:"Billing"}),s[0]=u):u=s[0];let h;s[1]===Symbol.for("react.memo_cache_sentinel")?(h=e.jsx("h1",{className:"text-2xl font-bold",children:"Billing Dashboard"}),s[1]=h):h=s[1];let j;return s[2]!==p||s[3]!==t||s[4]!==r||s[5]!==m||s[6]!==x?(j=e.jsxs(_,{breadcrumbs:D,children:[u,e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[h,t?e.jsxs(e.Fragment,{children:[!t.bank_account_details&&e.jsx(n,{className:"border-yellow-500 bg-yellow-50 dark:bg-yellow-950",children:e.jsx(i,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(k,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-yellow-900 dark:text-yellow-100 mb-1",children:"Bank Account Not Configured"}),e.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200 mb-3",children:"You need to add your bank account details to enable automatic subscription charges."}),e.jsx(b,{href:`/businesses/${t.id}/bank-account`,children:e.jsxs(g,{size:"sm",className:"bg-yellow-600 hover:bg-yellow-700 text-white",children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Add Bank Account Details"]})})]})]})})}),t.bank_account_details&&e.jsx(n,{className:"border-green-500 bg-green-50 dark:bg-green-950",children:e.jsx(i,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(C,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-green-900 dark:text-green-100 mb-1",children:"Bank Account Configured"}),e.jsxs("p",{className:"text-sm text-green-800 dark:text-green-200",children:[t.bank_account_details.bank_name," •"," ","Account ending in ",t.bank_account_details.account_number?.slice(-4)||"****"]})]}),e.jsx(b,{href:`/businesses/${t.id}/bank-account`,children:e.jsx(g,{size:"sm",variant:"outline",children:"Update Details"})})]})})}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(n,{children:[e.jsx(o,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5"}),"Monthly Subscription"]})}),e.jsxs(i,{children:[e.jsx("p",{className:"text-3xl font-bold",children:a(x)}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t.business_type==="small_business"?"Small Business":"Other Business"})]})]}),e.jsxs(n,{children:[e.jsx(o,{children:e.jsx(d,{children:"Deposit Fees (This Month)"})}),e.jsxs(i,{children:[e.jsx("p",{className:"text-3xl font-bold",children:a(m)}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"1.5% per deposit"})]})]}),e.jsxs(n,{children:[e.jsx(o,{children:e.jsx(d,{children:"Total This Month"})}),e.jsxs(i,{children:[e.jsx("p",{className:"text-3xl font-bold",children:a(x+m)}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Subscription + Deposit Fees"})]})]})]}),r&&e.jsxs(n,{children:[e.jsx(o,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-5 w-5"}),"Current Month Billing (",f(r.billing_month),")"]})}),e.jsx(i,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Subscription Fee:"}),e.jsx("span",{className:"font-semibold",children:a(r.subscription_fee)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Deposit Fees:"}),e.jsx("span",{className:"font-semibold",children:a(r.total_deposit_fees)})]}),e.jsxs("div",{className:"border-t pt-4 flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Total:"}),e.jsx("span",{className:"text-2xl font-bold",children:a(Number(r.subscription_fee)+Number(r.total_deposit_fees))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"}),e.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${r.status==="paid"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":r.status==="pending"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:r.status})]})]})})]}),e.jsxs(n,{children:[e.jsx(o,{children:e.jsx(d,{children:"Billing History"})}),e.jsx(i,{children:p.length>0?e.jsx("div",{className:"space-y-4",children:p.map(l=>e.jsxs("div",{className:"flex items-center justify-between border-b pb-4 last:border-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:f(l.billing_month)}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Subscription: ",a(l.subscription_fee)," • Deposit Fees: ",a(l.total_deposit_fees)]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Billed: ",new Date(l.billed_at).toLocaleDateString(),l.paid_at&&` • Paid: ${new Date(l.paid_at).toLocaleDateString()}`]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold",children:a(Number(l.subscription_fee)+Number(l.total_deposit_fees))}),e.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium mt-2 ${l.status==="paid"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":l.status==="pending"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:l.status})]})]},l.id))}):e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No billing history yet"})})]})]}):e.jsx(n,{children:e.jsx(i,{className:"py-10 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No business selected. Please select a business first."})})})]})]}),s[2]=p,s[3]=t,s[4]=r,s[5]=m,s[6]=x,s[7]=j):j=s[7],j}function S(c){const[s,t]=c.split("-");return new Date(Number(s),Number(t)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})}function A(c){return new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(Number(c))}export{oe as default};
