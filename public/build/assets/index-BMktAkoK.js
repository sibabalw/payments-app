import{c as v,j as e,L as d,H as w}from"./app-DlRq_5I-.js";import{B as C}from"./badge-DkQNu0Ve.js";import{a as _,B as x}from"./createLucideIcon-DfICN48Q.js";import{C as u,a as b,b as B,c as h}from"./card-BpVtH_kK.js";import{A as k,R as A}from"./app-layout-B1Fh94R8.js";import{W as E}from"./app-sidebar-header-DViv9NrM.js";import{U as R}from"./users-DkXA52Op.js";import{C as S}from"./credit-card-BEASO8FW.js";import{U}from"./user-check-BIHcPLhA.js";import{B as L}from"./appearance-dropdown-kWEtid9a.js";import{M as P}from"./mail-Bz9icqyX.js";import{P as I}from"./pencil-PLYyc0Ku.js";import{C as z}from"./circle-x-DCpd_SlB.js";import{C as q}from"./circle-alert-BMPPz6PA.js";import{C as H}from"./circle-check-CTpeSp7r.js";/* empty css            */import"./chevron-down-DBn0VZdD.js";import"./x-RYBOgl4T.js";import"./index-BlmLjsw4.js";import"./index-D8-tZbVS.js";import"./index-CcLcdVZM.js";import"./index-B1IOqWwB.js";import"./proxy-DB18oa0z.js";import"./loader-circle-DB6syjKq.js";import"./plus-CLDQrfk-.js";import"./dollar-sign-CAhazD9z.js";import"./message-square-BIfa93Ti.js";import"./file-text-DtJO93Xu.js";import"./clock-eJfs3CCo.js";import"./shield-Bc8H0Rwn.js";import"./index-BC94lCP7.js";import"./log-out-BKe7v_gT.js";import"./chevron-right-FxPRos96.js";import"./index-Dl5gb-Kb.js";const M=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],T=_("Phone",M),j=r=>{if(!r)return"?";const s=r.trim().split(/\s+/);return s.length===1?r.substring(0,2).toUpperCase():(s[0][0]+s[1][0]).toUpperCase()},Z=[{title:"Businesses",href:"/businesses"}];function Be(r){const s=v.c(5),{businesses:a}=r,o=F,N=$,g=D;let l;s[0]===Symbol.for("react.memo_cache_sentinel")?(l=e.jsx(w,{title:"Businesses"}),s[0]=l):l=s[0];let n;s[1]===Symbol.for("react.memo_cache_sentinel")?(n=e.jsx("h1",{className:"text-2xl font-bold",children:"Businesses"}),s[1]=n):n=s[1];let c;s[2]===Symbol.for("react.memo_cache_sentinel")?(c=e.jsxs("div",{className:"flex items-center justify-between",children:[n,e.jsx(d,{href:"/businesses/create",children:e.jsx(x,{children:"Create New Business"})})]}),s[2]=c):c=s[2];let i;return s[3]!==a?(i=e.jsxs(k,{breadcrumbs:Z,children:[l,e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[c,a&&a.length>0?e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:a.map(t=>e.jsxs(u,{className:t.status!=="active"?"opacity-75":"",children:[e.jsxs(b,{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.logo&&t.logo.trim()!==""?e.jsx("div",{className:"flex aspect-square size-12 items-center justify-center rounded-md overflow-hidden flex-shrink-0 border border-border bg-muted",children:e.jsx("img",{src:t.logo,alt:t.name,className:"w-full h-full object-cover",onError:y=>{const p=y.target,f=p.parentElement;if(f){p.style.display="none";const m=document.createElement("span");m.className="text-sm font-semibold text-foreground",m.textContent=j(t.name),f.appendChild(m)}}})}):e.jsx("div",{className:"flex aspect-square size-12 items-center justify-center rounded-md bg-primary text-primary-foreground flex-shrink-0",children:e.jsx("span",{className:"text-sm font-semibold",children:j(t.name)})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx(B,{className:"flex-1 min-w-0 truncate",title:t.name,children:t.name}),o(t.status||"active")]})})]}),t.status_reason&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Reason: ",t.status_reason]})]}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-primary/5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"text-sm font-medium",children:"Escrow Balance"})]}),e.jsx("span",{className:"text-sm font-semibold text-primary",children:N(t.escrow_balance||0)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(R,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Employees:"}),e.jsx("span",{className:"font-semibold",children:t.employees_count||0})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(S,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Payments:"}),e.jsx("span",{className:"font-semibold",children:t.payment_schedules_count||0})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(A,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Payroll:"}),e.jsx("span",{className:"font-semibold",children:t.payroll_schedules_count||0})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(U,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Recipients:"}),e.jsx("span",{className:"font-semibold",children:t.recipients_count||0})]})]}),t.business_type&&e.jsxs("div",{className:"flex items-center gap-2 text-sm pt-2 border-t",children:[e.jsx(L,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Type:"}),e.jsx("span",{className:"font-medium",children:g(t.business_type)})]}),e.jsxs("div",{className:"space-y-1.5 pt-2 border-t",children:[t.email&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(P,{className:"h-3.5 w-3.5 flex-shrink-0"}),e.jsx("span",{className:"truncate",title:t.email,children:t.email})]}),t.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(T,{className:"h-3.5 w-3.5 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:t.phone})]})]}),t.created_at&&e.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t",children:["Created: ",new Date(t.created_at).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric"})]}),e.jsx("div",{className:"pt-2 border-t",children:e.jsx(d,{href:`/businesses/${t.id}/edit`,children:e.jsxs(x,{variant:"outline",size:"sm",className:"w-full",children:[e.jsx(I,{className:"mr-2 h-4 w-4"}),"Edit Business"]})})}),t.status!=="active"&&e.jsx("div",{className:"pt-2 border-t",children:e.jsxs("p",{className:"text-sm text-muted-foreground text-center py-2",children:["Business is ",t.status,". Cannot switch."]})})]})]},t.id))}):e.jsx(u,{children:e.jsxs(h,{className:"py-10 text-center",children:[e.jsx("p",{className:"text-muted-foreground",children:"No businesses found."}),e.jsx(d,{href:"/businesses/create",className:"mt-4 inline-block",children:e.jsx(x,{children:"Create your first business"})})]})})]})]}),s[3]=a,s[4]=i):i=s[4],i}function D(r){return r?r.split("_").map(W).join(" "):"N/A"}function W(r){return r.charAt(0).toUpperCase()+r.slice(1)}function $(r){return new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(r)}function F(r){const s={active:{label:"Active",variant:"default",icon:H,className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"},suspended:{label:"Suspended",variant:"outline",icon:q,className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"},banned:{label:"Banned",variant:"destructive",icon:z,className:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}},a=s[r]||s.active,o=a.icon;return e.jsxs(C,{className:a.className,children:[e.jsx(o,{className:"mr-1 h-3 w-3"}),a.label]})}export{Be as default};
