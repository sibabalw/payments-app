import{c as S,r as b,j as e,a as v,H as w,L as g}from"./app-DWDC-BVo.js";import{B as j}from"./createLucideIcon-CDiNb0OM.js";import{C as f,c as y,a as A,b as D}from"./card-ErUD2DV9.js";import{S as L,a as P,b as C,c as Z,d as _}from"./select-DUIPMlO7.js";import{A as k}from"./app-layout-Csx9VZt2.js";import{F as N}from"./file-text-xQShroE0.js";/* empty css            */import"./index-B-id3RBu.js";import"./chevron-down-BehZftUK.js";import"./x-Cr_BKX42.js";import"./index-apnaeyBA.js";import"./index-D976Ylxv.js";import"./chevron-right-TaOApODu.js";import"./check-CooXHJVP.js";import"./chevron-up-CvrNtOh9.js";import"./app-sidebar-header-r-OiXY8i.js";import"./index-BspEiaub.js";import"./appearance-dropdown-Boh93vvE.js";import"./index-BCOzoWRm.js";import"./index-l1Yz4tBP.js";import"./index-CcLcdVZM.js";import"./log-out-CNw_jzHT.js";import"./badge-BnVI9wD_.js";import"./proxy-8KyYWbtH.js";import"./circle-check-DngFYpsd.js";import"./loader-circle-_uqlEWjJ.js";import"./circle-x-DCRTT9my.js";import"./circle-alert-C7E7uvB-.js";import"./plus-BwK_Jy3D.js";import"./credit-card-DHCU20zw.js";import"./dollar-sign-DGtOSjhC.js";import"./message-square-DRz1er9_.js";import"./users-CtagEMWm.js";import"./user-check-Dt0Yb2Ws.js";import"./clock-D4ogtgGS.js";import"./shield-B0GD2scd.js";const E=[{title:"Payroll",href:"/payroll"},{title:"Jobs",href:"#"}];function je(t){const s=S.c(15),{jobs:r,employees:a,filters:l}=t,[x,F]=b.useState(l?.employee_id||"");let m;s[0]!==l?.business_id||s[1]!==l?.status?(m=h=>{F(h),v.get("/payroll/jobs",{employee_id:h==="all"?null:h,business_id:l?.business_id||null,status:l?.status||null},{preserveState:!0})},s[0]=l?.business_id,s[1]=l?.status,s[2]=m):m=s[2];const u=m;let o;s[3]===Symbol.for("react.memo_cache_sentinel")?(o=e.jsx(w,{title:"Payroll Jobs"}),s[3]=o):o=s[3];let d;s[4]===Symbol.for("react.memo_cache_sentinel")?(d=e.jsx("h1",{className:"text-2xl font-bold",children:"Payroll Jobs"}),s[4]=d):d=s[4];let c;s[5]===Symbol.for("react.memo_cache_sentinel")?(c=e.jsxs("div",{className:"flex items-center justify-between",children:[d,e.jsx(g,{href:"/payslips",children:e.jsxs(j,{variant:"outline",children:[e.jsx(N,{className:"mr-2 h-4 w-4"}),"View All Payslips"]})})]}),s[5]=c):c=s[5];let i;s[6]!==x||s[7]!==a||s[8]!==u?(i=a&&a.length>0&&e.jsx(f,{children:e.jsx(y,{className:"pt-6",children:e.jsxs("div",{className:"max-w-xs",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Filter by Employee"}),e.jsxs(L,{value:x||"all",onValueChange:u,children:[e.jsx(P,{children:e.jsx(C,{placeholder:"All employees"})}),e.jsxs(Z,{children:[e.jsx(_,{value:"all",children:"All employees"}),a.map($)]})]})]})})}),s[6]=x,s[7]=a,s[8]=u,s[9]=i):i=s[9];let n;s[10]!==r?(n=r?.data&&r.data.length>0?e.jsx("div",{className:"space-y-4",children:r.data.map(R)}):e.jsx(f,{children:e.jsx(y,{className:"py-10 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No payroll jobs found."})})}),s[10]=r,s[11]=n):n=s[11];let p;return s[12]!==i||s[13]!==n?(p=e.jsxs(k,{breadcrumbs:E,children:[o,e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[c,i,n]})]}),s[12]=i,s[13]=n,s[14]=p):p=s[14],p}function R(t){return e.jsxs(f,{children:[e.jsx(A,{children:e.jsx(D,{children:t.payroll_schedule?.name||"Payroll Schedule"})}),e.jsx(y,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.employee?.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.pay_period_start&&t.pay_period_end?`${new Date(t.pay_period_start).toLocaleDateString()} - ${new Date(t.pay_period_end).toLocaleDateString()}`:"Pay period not specified"})]}),e.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${t.status==="succeeded"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":t.status==="failed"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:t.status})]}),e.jsx("div",{className:"border-t pt-3 space-y-2",children:(()=>{const s=parseFloat(t.gross_salary),r=a=>s===0?0:a/s*100;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Gross Salary:"}),e.jsxs("span",{className:"font-medium",children:["ZAR ",s.toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex justify-between text-sm text-red-600",children:[e.jsx("span",{children:"PAYE:"}),e.jsxs("span",{children:["- ZAR ",parseFloat(t.paye_amount).toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2}),e.jsxs("span",{className:"text-muted-foreground ml-2",children:["(",r(parseFloat(t.paye_amount)).toFixed(2),"%)"]})]})]}),e.jsxs("div",{className:"flex justify-between text-sm text-red-600",children:[e.jsx("span",{children:"UIF:"}),e.jsxs("span",{children:["- ZAR ",parseFloat(t.uif_amount).toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2}),e.jsxs("span",{className:"text-muted-foreground ml-2",children:["(",r(parseFloat(t.uif_amount)).toFixed(2),"%)"]})]})]}),e.jsxs("div",{className:"border-t pt-2 flex justify-between font-bold",children:[e.jsx("span",{children:"Net Salary (Paid):"}),e.jsxs("span",{className:"text-green-600",children:["ZAR ",parseFloat(t.net_salary).toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),parseFloat(t.sdl_amount)>0&&e.jsx("div",{className:"border-t pt-2 mt-2",children:e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[e.jsx("span",{children:"SDL (Employer Cost - not deducted from employee):"}),e.jsxs("span",{children:["ZAR ",parseFloat(t.sdl_amount).toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})})]})})()}),t.error_message&&e.jsx("div",{className:"mt-2 p-2 bg-red-50 dark:bg-red-900/20 rounded text-sm text-red-600",children:t.error_message}),t.status==="succeeded"&&e.jsx("div",{className:"mt-3 pt-3 border-t",children:e.jsx(g,{href:`/payslips/${t.id}`,children:e.jsxs(j,{variant:"outline",size:"sm",className:"w-full",children:[e.jsx(N,{className:"mr-2 h-4 w-4"}),"View Payslip"]})})})]})})]},t.id)}function $(t){return e.jsx(_,{value:String(t.id),children:t.name},t.id)}export{je as default};
