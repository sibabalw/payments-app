import{c as ee,j as s,H as se,L as te,a as W}from"./app-DWDC-BVo.js";import{B as le}from"./createLucideIcon-CDiNb0OM.js";import{C as r,c as n,a as c,b as d,d as Y}from"./card-ErUD2DV9.js";import{B as q}from"./badge-BnVI9wD_.js";import{S as ae,a as ie,b as re,c as ne,d as $}from"./select-DUIPMlO7.js";import{A as ce}from"./admin-layout-DALa9hvk.js";import{a as G,B as de}from"./BarChart-6l2Uk-3Q.js";import{C as oe}from"./chevron-left-BSakv5Tz.js";import{F as me}from"./file-text-xQShroE0.js";import{C as xe}from"./clock-D4ogtgGS.js";import{T as fe}from"./trending-up-BU15gSyZ.js";import{C as he}from"./circle-check-big-CeHPrI3R.js";import{C as ue,X as pe,Y as je,T as ge,L as be,R as Ne}from"./CartesianChart-D3h3Avl2.js";import{B as ye}from"./appearance-dropdown-Boh93vvE.js";import{D as _e}from"./dollar-sign-DGtOSjhC.js";/* empty css            */import"./index-B-id3RBu.js";import"./chevron-down-BehZftUK.js";import"./x-Cr_BKX42.js";import"./index-apnaeyBA.js";import"./index-D976Ylxv.js";import"./chevron-right-TaOApODu.js";import"./check-CooXHJVP.js";import"./chevron-up-CvrNtOh9.js";import"./app-sidebar-header-r-OiXY8i.js";import"./index-BspEiaub.js";import"./index-l1Yz4tBP.js";import"./index-CcLcdVZM.js";import"./log-out-CNw_jzHT.js";import"./shield-B0GD2scd.js";import"./users-CtagEMWm.js";import"./message-square-DRz1er9_.js";import"./lock-Dqbj9PEc.js";import"./credit-card-DHCU20zw.js";import"./chart-column-D3a6wEl_.js";import"./index-BCOzoWRm.js";const ve=[{title:"Admin",href:"/admin"},{title:"Subscriptions",href:"/admin/subscriptions"}];function ms(a){const e=ee.c(55),{subscriptions:S,stats:l,revenueTrends:V,recentTransactions:w}=a,i=Be,X=ke,J=Ce,O=Se;let C;e[0]===Symbol.for("react.memo_cache_sentinel")?(C=s.jsx(se,{title:"Admin - Subscriptions Management"}),e[0]=C):C=e[0];let k;e[1]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Subscriptions Management"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage business subscriptions and billing"})]}),e[1]=k):k=e[1];let B;e[2]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsxs("div",{className:"flex items-center justify-between",children:[k,s.jsx(te,{href:"/admin",children:s.jsxs(le,{variant:"outline",children:[s.jsx(oe,{className:"mr-2 h-4 w-4"}),"Back to Dashboard"]})})]}),e[2]=B):B=e[2];let A;e[3]===Symbol.for("react.memo_cache_sentinel")?(A=s.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(d,{className:"text-sm font-medium",children:"Total Subscriptions"}),s.jsx(me,{className:"h-4 w-4 text-muted-foreground"})]}),e[3]=A):A=e[3];let o;e[4]!==l.total?(o=s.jsxs(r,{children:[A,s.jsx(n,{children:s.jsx("div",{className:"text-2xl font-bold",children:l.total})})]}),e[4]=l.total,e[5]=o):o=e[5];let T;e[6]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(d,{className:"text-sm font-medium",children:"Pending"}),s.jsx(xe,{className:"h-4 w-4 text-yellow-600"})]}),e[6]=T):T=e[6];let m;e[7]!==l.pending?(m=s.jsxs(r,{children:[T,s.jsx(n,{children:s.jsx("div",{className:"text-2xl font-bold",children:l.pending})})]}),e[7]=l.pending,e[8]=m):m=e[8];let D;e[9]===Symbol.for("react.memo_cache_sentinel")?(D=s.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(d,{className:"text-sm font-medium",children:"Total Revenue"}),s.jsx(fe,{className:"h-4 w-4 text-green-600"})]}),e[9]=D):D=e[9];let x;e[10]!==l.total_revenue?(x=i(l.total_revenue),e[10]=l.total_revenue,e[11]=x):x=e[11];let f;e[12]!==x?(f=s.jsx("div",{className:"text-2xl font-bold",children:x}),e[12]=x,e[13]=f):f=e[13];let h;e[14]!==l.total_billed?(h=i(l.total_billed),e[14]=l.total_billed,e[15]=h):h=e[15];let u;e[16]!==h?(u=s.jsxs("p",{className:"text-xs text-muted-foreground",children:[h," billed"]}),e[16]=h,e[17]=u):u=e[17];let p;e[18]!==f||e[19]!==u?(p=s.jsxs(r,{children:[D,s.jsxs(n,{children:[f,u]})]}),e[18]=f,e[19]=u,e[20]=p):p=e[20];let L;e[21]===Symbol.for("react.memo_cache_sentinel")?(L=s.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(d,{className:"text-sm font-medium",children:"Paid"}),s.jsx(he,{className:"h-4 w-4 text-green-600"})]}),e[21]=L):L=e[21];let j;e[22]!==l.paid?(j=s.jsx("div",{className:"text-2xl font-bold",children:l.paid}),e[22]=l.paid,e[23]=j):j=e[23];let g;e[24]!==l.waived?(g=s.jsxs("p",{className:"text-xs text-muted-foreground",children:[l.waived," waived"]}),e[24]=l.waived,e[25]=g):g=e[25];let b;e[26]!==j||e[27]!==g?(b=s.jsxs(r,{children:[L,s.jsxs(n,{children:[j,g]})]}),e[26]=j,e[27]=g,e[28]=b):b=e[28];let N;e[29]!==p||e[30]!==b||e[31]!==o||e[32]!==m?(N=s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[o,m,p,b]}),e[29]=p,e[30]=b,e[31]=o,e[32]=m,e[33]=N):N=e[33];let R;e[34]===Symbol.for("react.memo_cache_sentinel")?(R=s.jsxs(c,{children:[s.jsx(d,{children:"Revenue Trends (Last 6 Months)"}),s.jsx(Y,{children:"Monthly subscription revenue and billing"})]}),e[34]=R):R=e[34];let F;e[35]===Symbol.for("react.memo_cache_sentinel")?(F=s.jsx(ue,{strokeDasharray:"3 3",className:"stroke-muted"}),e[35]=F):F=e[35];let M;e[36]===Symbol.for("react.memo_cache_sentinel")?(M=s.jsx(pe,{dataKey:"month",className:"text-xs",tick:{fontSize:12}}),e[36]=M):M=e[36];let P;e[37]===Symbol.for("react.memo_cache_sentinel")?(P=s.jsx(je,{className:"text-xs",tick:{fontSize:12},tickFormatter:t=>i(t)}),e[37]=P):P=e[37];let H,K;e[38]===Symbol.for("react.memo_cache_sentinel")?(H=s.jsx(ge,{formatter:t=>i(t),contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))"}}),K=s.jsx(be,{}),e[38]=H,e[39]=K):(H=e[38],K=e[39]);let U;e[40]===Symbol.for("react.memo_cache_sentinel")?(U=s.jsx(G,{dataKey:"revenue",fill:"#22c55e",name:"Revenue",radius:[4,4,0,0]}),e[40]=U):U=e[40];let Z;e[41]===Symbol.for("react.memo_cache_sentinel")?(Z=s.jsx(G,{dataKey:"total_billed",fill:"#3b82f6",name:"Total Billed",radius:[4,4,0,0]}),e[41]=Z):Z=e[41];let y;e[42]!==V?(y=s.jsxs(r,{children:[R,s.jsx(n,{children:s.jsx(Ne,{width:"100%",height:300,children:s.jsxs(de,{data:V,children:[F,M,P,H,K,U,Z]})})})]}),e[42]=V,e[43]=y):y=e[43];let z;e[44]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsxs(c,{children:[s.jsxs(d,{className:"flex items-center gap-2",children:[s.jsx(ye,{className:"h-5 w-5"}),"Subscriptions"]}),s.jsx(Y,{children:"All business subscriptions and billing records"})]}),e[44]=z):z=e[44];let _;e[45]!==S.data?(_=s.jsxs(r,{children:[z,s.jsx(n,{children:S.data.length>0?s.jsx("div",{className:"space-y-4",children:S.data.map(t=>s.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:t.business?.name||"Unknown Business"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.billing_month," • ",t.business_type]})]}),J(t.status)]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Subscription Fee:"}),s.jsx("span",{className:"ml-2 font-medium",children:i(t.subscription_fee)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Deposit Fees:"}),s.jsx("span",{className:"ml-2 font-medium",children:i(t.total_deposit_fees)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Billed At:"}),s.jsx("span",{className:"ml-2",children:X(t.billed_at)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Paid At:"}),s.jsx("span",{className:"ml-2",children:X(t.paid_at)})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Status:"}),s.jsxs(ae,{value:t.status,onValueChange:Q=>O(t.id,Q),children:[s.jsx(ie,{className:"w-[180px]",children:s.jsx(re,{})}),s.jsxs(ne,{children:[s.jsx($,{value:"pending",children:"Pending"}),s.jsx($,{value:"paid",children:"Paid"}),s.jsx($,{value:"waived",children:"Waived"})]})]})]})]},t.id))}):s.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No subscriptions found"})})]}),e[45]=S.data,e[46]=_):_=e[46];let E;e[47]===Symbol.for("react.memo_cache_sentinel")?(E=s.jsxs(c,{children:[s.jsxs(d,{className:"flex items-center gap-2",children:[s.jsx(_e,{className:"h-5 w-5"}),"Recent Billing Transactions"]}),s.jsx(Y,{children:"Latest billing transaction activity"})]}),e[47]=E):E=e[47];let v;e[48]!==w?(v=s.jsxs(r,{children:[E,s.jsx(n,{children:w.length>0?s.jsx("div",{className:"space-y-3",children:w.map(t=>s.jsxs("div",{className:"flex items-center justify-between border-b pb-3 last:border-0",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:t.business_name}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.type," • ",X(t.created_at)]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm font-medium",children:i(t.amount)}),s.jsx(q,{variant:t.status==="completed"?"default":t.status==="failed"?"destructive":"secondary",children:t.status})]})]},t.id))}):s.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No transactions found"})})]}),e[48]=w,e[49]=v):v=e[49];let I;return e[50]!==N||e[51]!==y||e[52]!==_||e[53]!==v?(I=s.jsxs(ce,{breadcrumbs:ve,children:[C,s.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[B,N,y,_,v]})]}),e[50]=N,e[51]=y,e[52]=_,e[53]=v,e[54]=I):I=e[54],I}function Se(a,e){W.post(`/admin/subscriptions/${a}/status`,{status:e},{onSuccess:we})}function we(){W.reload()}function Ce(a){const e={pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",paid:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",waived:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"};return s.jsx(q,{className:e[a]||"",children:a.charAt(0).toUpperCase()+a.slice(1)})}function ke(a){return a?new Date(a).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric"}):"N/A"}function Be(a){return new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(a)}export{ms as default};
