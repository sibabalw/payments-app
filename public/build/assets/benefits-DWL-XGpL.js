import{c as Re,r as Ne,u as Le,j as t,L as Se,H as Te}from"./app-Cuioih4f.js";import{B as z}from"./createLucideIcon-B5MOZI9f.js";import{C as Ce,a as De,b as Fe,c as $e}from"./card-D9Y_bl1i.js";import{a as Ae,b as Be,c as Oe,S as we,d as be}from"./select-CNE8bl0y.js";import{I as ye}from"./input-Bz7R7t4w.js";import{L as V}from"./label-C6Cf-NhP.js";import{f as Ze,b as ke,D as ze,d as He,e as Pe}from"./dialog-B6pEUDaf.js";import{A as Ve}from"./app-layout-n-d4l7tQ.js";import{I as Ee}from"./input-error-pri7ZzTk.js";import{X as qe}from"./x-Bo-ZIIiE.js";import{P as _e}from"./plus-BYiZCxp8.js";import{S as Ue}from"./square-pen-scPHNZBX.js";/* empty css            */import"./index-CfqSVWBk.js";import"./chevron-down-CZg7iP84.js";import"./index-Buc-yRrE.js";import"./index-IPHHTqRQ.js";import"./chevron-right-BmA-IvWf.js";import"./check-B470GyMS.js";import"./chevron-up-kVmNUnJV.js";import"./index-Bs_TJoq4.js";import"./index-EFDA_sBj.js";import"./index-DcSYVg4d.js";import"./app-sidebar-header-C7CWWu21.js";import"./appearance-dropdown-Dd19dic0.js";import"./index-CcLcdVZM.js";import"./log-out-DgGKhRGZ.js";import"./badge-Bn6Vikwd.js";import"./proxy-Bhuhjzak.js";import"./circle-check-DtjdWYjd.js";import"./loader-circle-BHZ8O1kv.js";import"./circle-x-BHtK7BJ7.js";import"./circle-alert-D33Q7hcZ.js";import"./credit-card-DyUwoGG-.js";import"./dollar-sign-CmPq-nEC.js";import"./message-square-DDbRZnKk.js";import"./file-text-CHp8TDnm.js";import"./users-CdWaatQB.js";import"./user-check-BK_NFKR2.js";import"./clock-CSBq3vjr.js";import"./shield-U7oFjP4d.js";const We=[{title:"Employees",href:"/employees"},{title:"Benefits or Deductions",href:"#"}];function Tt(n){const e=Re.c(106),{employee:a,companyBenefits:o,benefitsWithOverrides:d,employeeOnlyBenefits:H}=n,[oe,q]=Ne.useState(!1),[,de]=Ne.useState(null);let U;e[0]===Symbol.for("react.memo_cache_sentinel")?(U={benefit_id:"",amount:"",period_start:"",period_end:"",description:""},e[0]=U):U=e[0];const{data:l,setData:r,post:ce,processing:W,errors:c,reset:me}=Le(U);let X;e[1]!==r?(X=s=>{de(s);const i=s.company_benefit;r({benefit_id:i.id,amount:s.override?s.override.amount:i.amount,period_start:"",period_end:"",description:""}),q(!0)},e[1]=r,e[2]=X):X=e[2];const P=X;let G;e[3]!==a.id||e[4]!==ce||e[5]!==me?(G=s=>{s.preventDefault(),ce(`/employees/${a.id}/benefits/override`,{onSuccess:()=>{q(!1),me()}})},e[3]=a.id,e[4]=ce,e[5]=me,e[6]=G):G=e[6];const pe=G,fe=`${a.name}'s Benefits or Deductions`;let m;e[7]!==fe?(m=t.jsx(Te,{title:fe}),e[7]=fe,e[8]=m):m=e[8];let p;e[9]!==a.name?(p=t.jsxs("h1",{className:"text-2xl font-bold",children:[a.name,"'s Benefits or Deductions"]}),e[9]=a.name,e[10]=p):p=e[10];let J;e[11]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Company benefits and employee-specific overrides"}),e[11]=J):J=e[11];let f;e[12]!==p?(f=t.jsxs("div",{children:[p,J]}),e[12]=p,e[13]=f):f=e[13];let K;e[14]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsx(Ze,{asChild:!0,children:t.jsxs(z,{variant:"outline",children:[t.jsx(_e,{className:"mr-2 h-4 w-4"}),"Override Benefit or Deduction"]})}),e[14]=K):K=e[14];let M;e[15]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx(ke,{children:t.jsx(ze,{children:"Override Benefit or Deduction"})}),e[15]=M):M=e[15];let Q;e[16]===Symbol.for("react.memo_cache_sentinel")?(Q=t.jsx(V,{htmlFor:"benefit_id",children:"Benefit or Deduction to Override"}),e[16]=Q):Q=e[16];const xe=String(l.benefit_id);let x;e[17]!==d||e[18]!==o||e[19]!==r?(x=s=>{r("benefit_id",s);const i=o.find(ne=>ne.id===parseInt(s));if(i){r("amount",i.amount);const ne=d.find(Ie=>Ie.company_benefit.id===parseInt(s));ne?.override?de(ne):de({company_benefit:i})}},e[17]=d,e[18]=o,e[19]=r,e[20]=x):x=e[20];let Y;e[21]===Symbol.for("react.memo_cache_sentinel")?(Y=t.jsx(Ae,{children:t.jsx(Be,{placeholder:"Select a benefit or deduction"})}),e[21]=Y):Y=e[21];let u;e[22]!==o?(u=o.map(Xe),e[22]=o,e[23]=u):u=e[23];let h;e[24]!==u?(h=t.jsx(Oe,{children:u}),e[24]=u,e[25]=h):h=e[25];let j;e[26]!==xe||e[27]!==x||e[28]!==h?(j=t.jsxs(we,{value:xe,onValueChange:x,children:[Y,h]}),e[26]=xe,e[27]=x,e[28]=h,e[29]=j):j=e[29];let g;e[30]!==c.benefit_id?(g=t.jsx(Ee,{message:c.benefit_id}),e[30]=c.benefit_id,e[31]=g):g=e[31];let v;e[32]!==j||e[33]!==g?(v=t.jsxs("div",{className:"space-y-2",children:[Q,j,g]}),e[32]=j,e[33]=g,e[34]=v):v=e[34];const ue=o.find(s=>s.id===parseInt(l.benefit_id))?.type==="percentage"?" (0-100)":"";let y;e[35]!==ue?(y=t.jsxs(V,{htmlFor:"amount",children:["New Amount",ue]}),e[35]=ue,e[36]=y):y=e[36];const he=o.find(s=>s.id===parseInt(l.benefit_id))?.type==="percentage"?"100":void 0;let _;e[37]!==r?(_=s=>r("amount",s.target.value),e[37]=r,e[38]=_):_=e[38];let b;e[39]!==l.amount||e[40]!==he||e[41]!==_?(b=t.jsx(ye,{id:"amount",type:"number",step:"0.01",min:"0",max:he,value:l.amount,onChange:_,required:!0}),e[39]=l.amount,e[40]=he,e[41]=_,e[42]=b):b=e[42];let N;e[43]!==c.amount?(N=t.jsx(Ee,{message:c.amount}),e[43]=c.amount,e[44]=N):N=e[44];let S;e[45]!==y||e[46]!==b||e[47]!==N?(S=t.jsxs("div",{className:"space-y-2",children:[y,b,N]}),e[45]=y,e[46]=b,e[47]=N,e[48]=S):S=e[48];let ee;e[49]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx(V,{children:"Applies"}),e[49]=ee):ee=e[49];const je=l.period_start?"specific":"forever";let C;e[50]!==r?(C=s=>{s==="forever"&&(r("period_start",""),r("period_end",""))},e[50]=r,e[51]=C):C=e[51];let te;e[52]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx(Ae,{children:t.jsx(Be,{})}),e[52]=te):te=e[52];let se;e[53]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsxs(Oe,{children:[t.jsx(be,{value:"forever",children:"Forever"}),t.jsx(be,{value:"specific",children:"Specific Period"})]}),e[53]=se):se=e[53];let D;e[54]!==je||e[55]!==C?(D=t.jsxs(we,{value:je,onValueChange:C,children:[te,se]}),e[54]=je,e[55]=C,e[56]=D):D=e[56];let F;e[57]!==l.period_end||e[58]!==l.period_start||e[59]!==r?(F=l.period_start&&t.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(V,{htmlFor:"period_start",children:"From"}),t.jsx(ye,{id:"period_start",type:"date",value:l.period_start,onChange:s=>r("period_start",s.target.value)})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(V,{htmlFor:"period_end",children:"To"}),t.jsx(ye,{id:"period_end",type:"date",value:l.period_end,onChange:s=>r("period_end",s.target.value)})]})]}),e[57]=l.period_end,e[58]=l.period_start,e[59]=r,e[60]=F):F=e[60];let $;e[61]!==D||e[62]!==F?($=t.jsxs("div",{className:"space-y-2",children:[ee,D,F]}),e[61]=D,e[62]=F,e[63]=$):$=e[63];let ie;e[64]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx(z,{type:"button",variant:"outline",onClick:()=>q(!1),children:"Cancel"}),e[64]=ie):ie=e[64];const ge=W?"Creating...":"Create Override";let A;e[65]!==W||e[66]!==ge?(A=t.jsxs("div",{className:"flex gap-2",children:[ie,t.jsx(z,{type:"submit",disabled:W,children:ge})]}),e[65]=W,e[66]=ge,e[67]=A):A=e[67];let B;e[68]!==pe||e[69]!==v||e[70]!==S||e[71]!==$||e[72]!==A?(B=t.jsxs(He,{children:[M,t.jsxs("form",{onSubmit:pe,className:"space-y-4",children:[v,S,$,A]})]}),e[68]=pe,e[69]=v,e[70]=S,e[71]=$,e[72]=A,e[73]=B):B=e[73];let O;e[74]!==oe||e[75]!==B?(O=t.jsxs(Pe,{open:oe,onOpenChange:q,children:[K,B]}),e[74]=oe,e[75]=B,e[76]=O):O=e[76];const ve=`/payroll/bonuses/create?employee_id=${a.id}`;let re;e[77]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsxs(z,{children:[t.jsx(_e,{className:"mr-2 h-4 w-4"}),"Add Bonus"]}),e[77]=re):re=e[77];let w;e[78]!==ve?(w=t.jsx(Se,{href:ve,children:re}),e[78]=ve,e[79]=w):w=e[79];let E;e[80]!==O||e[81]!==w?(E=t.jsxs("div",{className:"flex gap-2",children:[O,w]}),e[80]=O,e[81]=w,e[82]=E):E=e[82];let I;e[83]!==E||e[84]!==f?(I=t.jsxs("div",{className:"flex items-center justify-between",children:[f,E]}),e[83]=E,e[84]=f,e[85]=I):I=e[85];let le;e[86]===Symbol.for("react.memo_cache_sentinel")?(le=t.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Company Benefits (applied to everyone)"}),e[86]=le):le=e[86];let R;if(e[87]!==d||e[88]!==P){let s;e[90]!==P?(s=i=>t.jsxs(Ce,{children:[t.jsx(De,{children:t.jsx(Fe,{className:"text-lg",children:i.company_benefit.name})}),t.jsx($e,{children:t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"text-sm",children:[t.jsx("span",{className:"text-muted-foreground",children:"Company Rate: "}),t.jsx("span",{className:"font-medium",children:i.company_benefit.type==="percentage"?`${i.company_benefit.amount}%`:`ZAR ${parseFloat(i.company_benefit.amount).toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})}`})]}),i.has_override&&t.jsxs("div",{className:"text-sm",children:[t.jsx("span",{className:"text-muted-foreground",children:"Employee Rate: "}),t.jsxs("span",{className:"font-medium text-blue-600",children:[i.company_benefit.type==="percentage"?`${i.effective_amount}%`:`ZAR ${parseFloat(i.effective_amount).toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})}`,t.jsx("span",{className:"text-xs text-muted-foreground ml-1",children:"(override)"})]})]}),t.jsxs("div",{className:"text-sm",children:[t.jsx("span",{className:"text-muted-foreground",children:"Type: "}),t.jsx("span",{className:`font-medium capitalize ${i.company_benefit.adjustment_type==="deduction"?"text-red-600":"text-green-600"}`,children:i.company_benefit.adjustment_type==="deduction"?"Deduction":"Addition"})]}),t.jsx("div",{className:"flex gap-2 mt-4",children:t.jsxs(z,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>P(i),children:[i.has_override?t.jsx(Ue,{className:"mr-2 h-3 w-3"}):t.jsx(_e,{className:"mr-2 h-3 w-3"}),i.has_override?"Edit Override":"Override"]})})]})})]},i.company_benefit.id),e[90]=P,e[91]=s):s=e[91],R=d.map(s),e[87]=d,e[88]=P,e[89]=R}else R=e[89];let L;e[92]!==R?(L=t.jsxs("div",{children:[le,t.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:R})]}),e[92]=R,e[93]=L):L=e[93];let T;e[94]!==a.id||e[95]!==H?(T=H&&H.length>0&&t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Employee-Specific Benefits"}),t.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:H.map(s=>t.jsxs(Ce,{children:[t.jsx(De,{children:t.jsx(Fe,{className:"text-lg",children:s.name})}),t.jsx($e,{children:t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"text-sm",children:[t.jsx("span",{className:"text-muted-foreground",children:"Amount: "}),t.jsx("span",{className:"font-medium",children:s.type==="percentage"?`${s.amount}%`:`ZAR ${parseFloat(s.amount).toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})}`})]}),t.jsxs("div",{className:"text-sm",children:[t.jsx("span",{className:"text-muted-foreground",children:"Type: "}),t.jsx("span",{className:`font-medium capitalize ${s.adjustment_type==="deduction"?"text-red-600":"text-green-600"}`,children:s.adjustment_type==="deduction"?"Deduction":"Addition"})]}),t.jsx(Se,{href:`/employees/${a.id}/benefits/${s.id}/remove`,method:"delete",as:"button",className:"mt-4 w-full",children:t.jsxs(z,{variant:"outline",size:"sm",className:"w-full",children:[t.jsx(qe,{className:"mr-2 h-3 w-3"}),"Remove Override"]})})]})})]},s.id))})]}),e[94]=a.id,e[95]=H,e[96]=T):T=e[96];let Z;e[97]!==L||e[98]!==T?(Z=t.jsxs("div",{className:"space-y-6",children:[L,T]}),e[97]=L,e[98]=T,e[99]=Z):Z=e[99];let k;e[100]!==I||e[101]!==Z?(k=t.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[I,Z]}),e[100]=I,e[101]=Z,e[102]=k):k=e[102];let ae;return e[103]!==m||e[104]!==k?(ae=t.jsxs(Ve,{breadcrumbs:We,children:[m,k]}),e[103]=m,e[104]=k,e[105]=ae):ae=e[105],ae}function Xe(n){return t.jsxs(be,{value:String(n.id),children:[n.name," (",n.type==="percentage"?`${n.amount}%`:`ZAR ${n.amount}`,")"]},n.id)}export{Tt as default};
