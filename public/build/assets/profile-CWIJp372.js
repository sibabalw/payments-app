import{c as Z,b as le,r as L,j as s,H as ie,F as ne,a as q,L as me}from"./app-CMeUrf50.js";import{s as oe}from"./index-Iz57ZF-U.js";import{S as ee}from"./spinner-Cg7quiac.js";import{B as ce,P as de,D as fe}from"./delete-user-BI2NIb3H.js";import{I as J}from"./input-error-DGa17wxa.js";import{A as ue,u as xe,a as pe,b as he}from"./app-sidebar-header-CztvwVfL.js";import{B as M}from"./x-CZYrHTRQ.js";import{I as W}from"./input-CJwM-rHG.js";import{L as G}from"./label-k3FBp3Ud.js";import{A as ge}from"./admin-layout-R-ZkMW4z.js";import{A as be}from"./account-layout-CVm327hH.js";import{S as je}from"./shield-CzJFJRG5.js";import{S as ve}from"./sparkles-CHZ7Hndf.js";import{C as Ne}from"./calendar-B4DGO74h.js";import{C as U}from"./circle-check-Bv3Kk_K_.js";import{C as Y}from"./circle-alert-tomiUAeh.js";import{M as se}from"./mail-53TiOJwa.js";import{K as ye}from"./transition-BCx4Nopc.js";/* empty css            */import"./index-Cfp_L9w6.js";import"./loader-circle-PC8s1h8o.js";import"./heading-Bcg4R5wZ.js";import"./index-CASGKN-W.js";import"./dialog-DTBUSObX.js";import"./appearance-dropdown-CIplfUHR.js";import"./password-input-isnBR8_R.js";import"./eye-off-DEYeJ9ra.js";import"./eye-D4keXAnn.js";import"./log-out-C9Jhd31W.js";import"./index-wVJuMR_H.js";import"./users-BjCKGoHP.js";import"./message-square-Bem12P6R.js";import"./file-text-DBGV6D9F.js";import"./lock-f0EayAs4.js";import"./chart-column-DZRrYrRT.js";const $="/admin/account/profile",we=[{title:"Admin",href:"/admin"},{title:"Account",href:"/admin/account/profile"},{title:"Profile",href:$}];function _e(z){const e=Z.c(37),{email:j,onCancel:C}=z,[r,y]=L.useState(""),[t,E]=L.useState(!1),[u,w]=L.useState(null);let _;e[0]!==j||e[1]!==r?(_=()=>{if(w(null),r.length!==6||!/^\d{6}$/.test(r)){w("Please enter a valid 6-digit code.");return}E(!0),q.post(`${$}/verify-email-otp`,{email:j,otp:r},{preserveScroll:!0,onSuccess:a=>{E(!1);const d=a?.props?.errors;d?.otp?w(d.otp):d&&Object.keys(d).length>0?w("Verification failed. Please try again."):q.visit($,{preserveScroll:!0})},onError:a=>{E(!1),w(a?.otp??"Invalid or expired OTP code. Please try again.")}})},e[0]=j,e[1]=r,e[2]=_):_=e[2];const k=_;let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(se,{className:"h-4 w-4 text-primary"}),s.jsx("span",{className:"font-medium",children:"Email Verification Required"})]}),e[3]=l):l=e[3];let v;e[4]!==j?(v=s.jsxs("p",{className:"text-sm text-muted-foreground",children:["We've sent a 6-digit verification code to ",s.jsx("span",{className:"font-medium text-foreground",children:j}),". Please enter it below to verify your new email address."]}),e[4]=j,e[5]=v):v=e[5];let f;e[6]===Symbol.for("react.memo_cache_sentinel")?(f=s.jsx(G,{htmlFor:"otp",children:"Verification Code"}),e[6]=f):f=e[6];let x;e[7]!==u?(x=a=>{const d=a.target.value.replace(/\D/g,"").slice(0,6);y(d),u&&w(null)},e[7]=u,e[8]=x):x=e[8];let p;e[9]!==k?(p=a=>{a.key==="Enter"&&(a.preventDefault(),k())},e[9]=k,e[10]=p):p=e[10];let h;e[11]!==r||e[12]!==x||e[13]!==p?(h=s.jsx(W,{id:"otp",type:"text",value:r,onChange:x,autoFocus:!0,autoComplete:"one-time-code",placeholder:"000000",maxLength:6,className:"text-center text-2xl font-mono tracking-widest",onKeyDown:p}),e[11]=r,e[12]=x,e[13]=p,e[14]=h):h=e[14];const A=u??void 0;let g;e[15]!==A?(g=s.jsx(J,{message:A}),e[15]=A,e[16]=g):g=e[16];let b;e[17]!==h||e[18]!==g?(b=s.jsxs("div",{className:"grid gap-2",children:[f,h,g]}),e[17]=h,e[18]=g,e[19]=b):b=e[19];let i;e[20]!==C?(i=s.jsx(M,{type:"button",variant:"outline",onClick:C,className:"flex-1",children:"Cancel"}),e[20]=C,e[21]=i):i=e[21];const N=t||r.length!==6;let n;e[22]!==t?(n=t&&s.jsx(ee,{className:"mr-2 h-4 w-4"}),e[22]=t,e[23]=n):n=e[23];let m;e[24]!==k||e[25]!==N||e[26]!==n?(m=s.jsxs(M,{type:"button",onClick:k,className:"flex-1",disabled:N,children:[n,"Verify"]}),e[24]=k,e[25]=N,e[26]=n,e[27]=m):m=e[27];let o;e[28]!==i||e[29]!==m?(o=s.jsxs("div",{className:"flex gap-2",children:[i,m]}),e[28]=i,e[29]=m,e[30]=o):o=e[30];let c;e[31]!==b||e[32]!==o?(c=s.jsxs("div",{className:"space-y-4",children:[b,o]}),e[31]=b,e[32]=o,e[33]=c):c=e[33];let S;return e[34]!==c||e[35]!==v?(S=s.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-muted/50",children:[l,v,c]}),e[34]=c,e[35]=v,e[36]=S):S=e[36],S}function ns(z){const e=Z.c(61),{mustVerifyEmail:j,status:C,pendingEmail:r,otpSent:y}=z,{auth:t}=le().props,E=xe(),[u,w]=L.useState(!1),[_,k]=L.useState(!1),[l,v]=L.useState(t.user.email),f=t.user.email;let x,p;e[0]!==t.user.email||e[1]!==r?(x=()=>{v(r??t.user.email)},p=[r,t.user.email],e[0]=t.user.email,e[1]=r,e[2]=x,e[3]=p):(x=e[2],p=e[3]),L.useEffect(x,p);let h;e[4]!==t.user.created_at?(h=t.user.created_at?new Date(t.user.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Unknown",e[4]=t.user.created_at,e[5]=h):h=e[5];const A=h;let g;e[6]===Symbol.for("react.memo_cache_sentinel")?(g=s.jsx(ie,{title:"Admin - Account - Profile"}),e[6]=g):g=e[6];let b;e[7]===Symbol.for("react.memo_cache_sentinel")?(b=s.jsx("div",{className:"absolute -right-20 -top-20 h-64 w-64 rounded-full bg-primary/10 blur-3xl"}),e[7]=b):b=e[7];let i;e[8]!==t.user.avatar||e[9]!==t.user.name?(i=s.jsx(ue,{src:t.user.avatar,alt:t.user.name}),e[8]=t.user.avatar,e[9]=t.user.name,e[10]=i):i=e[10];let N;e[11]!==t.user.name||e[12]!==E?(N=E(t.user.name),e[11]=t.user.name,e[12]=E,e[13]=N):N=e[13];let n;e[14]!==N?(n=s.jsx(pe,{className:"rounded-full bg-gradient-to-br from-primary to-primary/60 text-3xl font-semibold text-white",children:N}),e[14]=N,e[15]=n):n=e[15];let m;e[16]!==i||e[17]!==n?(m=s.jsxs(he,{className:"relative h-32 w-32 overflow-hidden rounded-full border-4 border-background shadow-2xl ring-4 ring-primary/20",children:[i,n]}),e[16]=i,e[17]=n,e[18]=m):m=e[18];let o;e[19]!==t.user.email_verified_at?(o=t.user.email_verified_at&&s.jsx("div",{className:"absolute bottom-0 right-0 rounded-full bg-green-500 p-1.5 ring-4 ring-background",children:s.jsx(ce,{className:"h-4 w-4 text-white"})}),e[19]=t.user.email_verified_at,e[20]=o):o=e[20];let c;e[21]!==t.user.name?(c=s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:t.user.name}),e[21]=t.user.name,e[22]=c):c=e[22];let S;e[23]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx(ve,{className:"h-5 w-5 text-primary"}),e[23]=S):S=e[23];let a;e[24]!==c?(a=s.jsxs("div",{className:"mb-2 flex items-center justify-center gap-2 md:justify-start",children:[c,S]}),e[24]=c,e[25]=a):a=e[25];let d;e[26]!==t.user.email?(d=s.jsx("p",{className:"mb-4 text-lg text-muted-foreground",children:t.user.email}),e[26]=t.user.email,e[27]=d):d=e[27];let B;e[28]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsx(Ne,{className:"h-4 w-4 text-primary"}),e[28]=B):B=e[28];let F;e[29]!==A?(F=s.jsxs("div",{className:"flex items-center gap-2 rounded-full bg-background/80 px-4 py-2 text-sm backdrop-blur-sm",children:[B,s.jsxs("span",{className:"font-medium",children:["Joined ",A]})]}),e[29]=A,e[30]=F):F=e[30];let P;e[31]!==t.user.two_factor_enabled?(P=t.user.two_factor_enabled&&s.jsxs("div",{className:"flex items-center gap-2 rounded-full bg-background/80 px-4 py-2 text-sm backdrop-blur-sm",children:[s.jsx(je,{className:"h-4 w-4 text-green-500"}),s.jsx("span",{className:"font-medium",children:"2FA Enabled"})]}),e[31]=t.user.two_factor_enabled,e[32]=P):P=e[32];let V;e[33]!==F||e[34]!==P?(V=s.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4 md:justify-start",children:[F,P]}),e[33]=F,e[34]=P,e[35]=V):V=e[35];let I;e[36]!==a||e[37]!==d||e[38]!==V?(I=s.jsxs("div",{className:"flex-1 text-center md:text-left",children:[a,d,V]}),e[36]=a,e[37]=d,e[38]=V,e[39]=I):I=e[39];let O;e[40]!==o||e[41]!==I||e[42]!==m?(O=s.jsxs("div",{className:"relative overflow-hidden rounded-2xl border bg-gradient-to-br from-primary/5 via-primary/3 to-transparent p-8 backdrop-blur-sm dark:from-primary/10 dark:via-primary/5",children:[b,s.jsxs("div",{className:"relative flex flex-col items-center gap-6 md:flex-row md:items-start",children:[m,o,I]})]}),e[40]=o,e[41]=I,e[42]=m,e[43]=O):O=e[43];let R;e[44]===Symbol.for("react.memo_cache_sentinel")?(R=s.jsx("div",{className:"border-b bg-gradient-to-r from-primary/5 to-transparent p-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary/10",children:s.jsx(de,{className:"h-5 w-5 text-primary"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Edit Profile"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Update your personal information"})]})]})}),e[44]=R):R=e[44];let T;e[45]===Symbol.for("react.memo_cache_sentinel")?(T={preserveScroll:!0},e[45]=T):T=e[45];let D;e[46]!==t.user.email_verified_at||e[47]!==t.user.name||e[48]!==l||e[49]!==u||e[50]!==j||e[51]!==f||e[52]!==y||e[53]!==r||e[54]!==_||e[55]!==C?(D=s.jsxs("div",{className:"overflow-hidden rounded-2xl border bg-card shadow-sm",children:[R,s.jsx("div",{className:"p-6",children:s.jsx(ne,{action:$,method:"patch",options:T,className:"space-y-6",children:te=>{const{processing:Q,recentlySuccessful:re,errors:X}=te;return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"name",className:"text-sm font-medium",children:"Full Name"}),s.jsx(W,{id:"name",className:"h-11",defaultValue:t.user.name,name:"name",required:!0,autoComplete:"name",placeholder:"Enter your full name"}),s.jsx(J,{message:X.name})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{htmlFor:"email",className:"text-sm font-medium",children:"Email Address"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx(W,{id:"email",type:"email",className:"h-11",value:l,name:"email",required:!0,autoComplete:"username",placeholder:"Enter your email",onChange:ae=>{v(ae.target.value),w(!1)},disabled:y&&!u}),l.toLowerCase()!==f.toLowerCase()&&!y&&s.jsxs(M,{type:"button",variant:"outline",onClick:()=>{k(!0),q.post(`${$}/send-email-otp`,{email:l},{preserveScroll:!0,onFinish:()=>k(!1)})},disabled:_,className:"whitespace-nowrap",children:[_&&s.jsx(ee,{className:"mr-2 h-4 w-4"}),"Send OTP"]}),l.toLowerCase()===f.toLowerCase()&&s.jsxs("div",{className:"flex items-center gap-2 px-3 text-sm text-muted-foreground",children:[s.jsx(U,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{children:"Current"})]})]}),y&&r&&s.jsx(_e,{email:r,onCancel:()=>{v(f),w(!1),q.post(`${$}/cancel-email-otp`,{},{preserveScroll:!0,onSuccess:ke})}}),u&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600",children:[s.jsx(U,{className:"h-4 w-4"}),s.jsx("span",{children:"Email verified successfully"})]}),l.toLowerCase()!==f.toLowerCase()&&!u&&!y&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-600 dark:text-amber-500 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-md p-2",children:[s.jsx(Y,{className:"h-4 w-4"}),s.jsx("span",{children:"Please verify your new email address before saving changes."})]})]}),s.jsx(J,{message:X.email})]})]}),j&&t.user.email_verified_at===null&&s.jsxs("div",{className:"rounded-xl border border-amber-200/50 bg-gradient-to-r from-amber-50/50 to-amber-50/30 p-5 dark:border-amber-800/50 dark:from-amber-950/30 dark:to-amber-950/10",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Y,{className:"mt-0.5 h-5 w-5 text-amber-600 dark:text-amber-400"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"mb-2 text-sm font-medium text-amber-900 dark:text-amber-100",children:"Email verification required"}),s.jsxs(me,{href:oe(),as:"button",className:"inline-flex items-center gap-2 rounded-lg bg-amber-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-amber-700 dark:bg-amber-500 dark:hover:bg-amber-600",children:[s.jsx(se,{className:"h-4 w-4"}),"Resend verification email"]})]})]}),C==="verification-link-sent"&&s.jsxs("div",{className:"mt-4 flex items-center gap-2 rounded-lg bg-green-50 p-3 text-sm text-green-800 dark:bg-green-950/30 dark:text-green-200",children:[s.jsx(U,{className:"h-4 w-4"}),"A new verification link has been sent to your email address."]})]}),s.jsxs("div",{className:"flex items-center justify-between border-t pt-6",children:[s.jsx(ye,{show:re,enter:"transition ease-in-out",enterFrom:"opacity-0 translate-x-2",enterTo:"opacity-100 translate-x-0",leave:"transition ease-in-out",leaveFrom:"opacity-100 translate-x-0",leaveTo:"opacity-0 translate-x-2",children:s.jsxs("div",{className:"flex items-center gap-2 rounded-lg bg-green-50 px-4 py-2 text-sm font-medium text-green-700 dark:bg-green-950/30 dark:text-green-300",children:[s.jsx(U,{className:"h-4 w-4"}),"Changes saved successfully"]})}),s.jsx(M,{disabled:Q||l.toLowerCase()!==f.toLowerCase()&&!u&&!y,size:"lg",className:"min-w-[140px]",children:Q?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"mr-2 inline-block h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(U,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})]})]})}})})]}),e[46]=t.user.email_verified_at,e[47]=t.user.name,e[48]=l,e[49]=u,e[50]=j,e[51]=f,e[52]=y,e[53]=r,e[54]=_,e[55]=C,e[56]=D):D=e[56];let K;e[57]===Symbol.for("react.memo_cache_sentinel")?(K=s.jsx(fe,{formAction:"/admin/account/profile"}),e[57]=K):K=e[57];let H;return e[58]!==O||e[59]!==D?(H=s.jsxs(ge,{breadcrumbs:we,children:[g,s.jsx(be,{children:s.jsxs("div",{className:"space-y-8 pb-8",children:[O,D,K]})})]}),e[58]=O,e[59]=D,e[60]=H):H=e[60],H}function ke(){return q.reload()}export{ns as default};
