import{c as je,r as P,j as s,a as _,H as ge,L as le}from"./app-BRoNAUIM.js";import{a as oe,B as S}from"./x-pZV5lkp5.js";import{C as re,c as ie}from"./card-Bag7gWUQ.js";import{I as Ne}from"./input-6bP_JhyV.js";import{A as ve}from"./admin-layout-BnJz0fFz.js";import{D as be,a as ye,b as we,c as Se,e as _e,d as Ae}from"./appearance-dropdown-BEtN_wNg.js";import{C as Ce}from"./confirmation-dialog-C1x4I7_a.js";import{U as ce}from"./users-CEYKQlp0.js";import{S as te}from"./shield-Kl3V0fgW.js";import{U as ke}from"./user-check-DiuzZ-7a.js";import{E as Ue}from"./ellipsis-CDYON7UO.js";import{U as De}from"./user-plus-BsLk7PHi.js";import{C as Me}from"./chevron-left-uzkLnT6H.js";import{S as Le,A as ne}from"./search-R_nGZEO9.js";import{M as Re}from"./mail-CoYr1G0V.js";/* empty css            */import"./app-sidebar-header-BbzcXdQi.js";import"./index-CBJSSLbQ.js";import"./index-Cfp_L9w6.js";import"./log-out-MC42nTzo.js";import"./index-BohsM0ZD.js";import"./message-square-CEp_sz_O.js";import"./file-text-FWLsz4T5.js";import"./lock-Dth4hMuh.js";import"./chart-column-DlXi8TWy.js";import"./dialog-DKQrbPU1.js";import"./spinner-D5nmHZNm.js";import"./loader-circle-CafrvZjs.js";import"./circle-help-4VBCcThn.js";import"./info-DaNQh9-Y.js";import"./triangle-alert-D6PyCIl6.js";const Te=[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h9",key:"1j9vog"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"m17 17 4 4",key:"1b3523"}],["path",{d:"m21 17-4 4",key:"uinynz"}]],Be=oe("MailX",Te);const Ee=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]],Fe=oe("ShieldOff",Ee),Ie=[{title:"Admin",href:"/admin"},{title:"Users",href:"/admin/users"}];function vs(l){const e=je.c(72),{users:a,roleCounts:X,filters:r}=l,[n,me]=P.useState(r.search),[o,de]=P.useState(r.role),[i,ae]=P.useState(null),[J,Z]=P.useState(!1),xe=He;let A;e[0]!==r.verified||e[1]!==o||e[2]!==n?(A=t=>{t.preventDefault(),_.get("/admin/users",{search:n,role:o,verified:r.verified},{preserveState:!0})},e[0]=r.verified,e[1]=o,e[2]=n,e[3]=A):A=e[3];const q=A;let C;e[4]!==r.verified||e[5]!==n?(C=t=>{de(t),_.get("/admin/users",{search:n,role:t,verified:r.verified},{preserveState:!0})},e[4]=r.verified,e[5]=n,e[6]=C):C=e[6];const K=C;let k;e[7]!==r?(k=t=>{const ue=r.sort===t&&r.direction==="asc"?"desc":"asc";_.get("/admin/users",{...r,sort:t,direction:ue},{preserveState:!0})},e[7]=r,e[8]=k):k=e[8];const c=k;let U;e[9]===Symbol.for("react.memo_cache_sentinel")?(U=t=>{ae(t),Z(!0)},e[9]=U):U=e[9];const pe=U;let D;e[10]!==i?(D=()=>{i&&_.post(`/admin/users/${i.id}/toggle-admin`,{},{onSuccess:()=>{Z(!1),ae(null)}})},e[10]=i,e[11]=D):D=e[11];const Q=D,he=ze,fe=$e;let M;e[12]===Symbol.for("react.memo_cache_sentinel")?(M=s.jsx(ge,{title:"Admin - Manage Users"}),e[12]=M):M=e[12];let L;e[13]===Symbol.for("react.memo_cache_sentinel")?(L=s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Manage Users"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"View and manage all platform users"})]}),e[13]=L):L=e[13];let R;e[14]===Symbol.for("react.memo_cache_sentinel")?(R=s.jsx(le,{href:"/admin/users/create",children:s.jsxs(S,{children:[s.jsx(De,{className:"mr-2 h-4 w-4"}),"Add Admin"]})}),e[14]=R):R=e[14];let T;e[15]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsxs("div",{className:"flex items-center justify-between",children:[L,s.jsxs("div",{className:"flex gap-2",children:[R,s.jsx(le,{href:"/admin",children:s.jsxs(S,{variant:"outline",children:[s.jsx(Me,{className:"mr-2 h-4 w-4"}),"Back to Dashboard"]})})]})]}),e[15]=T):T=e[15];let m;e[16]!==K||e[17]!==X||e[18]!==o?(m=s.jsx("div",{className:"flex gap-2 border-b pb-2",children:["all","admin","user"].map(t=>s.jsxs(S,{variant:o===t?"default":"ghost",size:"sm",onClick:()=>K(t),className:"gap-2",children:[t==="all"&&s.jsx(ce,{className:"h-4 w-4"}),t==="admin"&&s.jsx(te,{className:"h-4 w-4"}),t==="user"&&s.jsx(ke,{className:"h-4 w-4"}),t==="all"?"All Users":t.charAt(0).toUpperCase()+t.slice(1)+"s",s.jsx("span",{className:"ml-1 rounded-full bg-muted px-2 py-0.5 text-xs",children:X[t]})]},t))}),e[16]=K,e[17]=X,e[18]=o,e[19]=m):m=e[19];let B;e[20]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsx(Le,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e[20]=B):B=e[20];let E;e[21]===Symbol.for("react.memo_cache_sentinel")?(E=t=>me(t.target.value),e[21]=E):E=e[21];let d;e[22]!==n?(d=s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[B,s.jsx(Ne,{placeholder:"Search by name or email...",value:n,onChange:E,className:"pl-10"})]})}),e[22]=n,e[23]=d):d=e[23];let F;e[24]===Symbol.for("react.memo_cache_sentinel")?(F=s.jsx(S,{type:"submit",children:"Search"}),e[24]=F):F=e[24];let x;e[25]!==q||e[26]!==d?(x=s.jsx(re,{children:s.jsx(ie,{className:"pt-6",children:s.jsxs("form",{onSubmit:q,className:"flex gap-4",children:[d,F]})})}),e[25]=q,e[26]=d,e[27]=x):x=e[27];let p;e[28]!==c?(p=()=>c("name"),e[28]=c,e[29]=p):p=e[29];let I;e[30]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsx(ne,{className:"h-3 w-3"}),e[30]=I):I=e[30];let h;e[31]!==p?(h=s.jsx("th",{className:"pb-3 pr-4",children:s.jsxs("button",{onClick:p,className:"flex items-center gap-1 hover:text-foreground",children:["User",I]})}),e[31]=p,e[32]=h):h=e[32];let O,$;e[33]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsx("th",{className:"pb-3 pr-4",children:"Role"}),$=s.jsx("th",{className:"pb-3 pr-4",children:"Email Status"}),e[33]=O,e[34]=$):(O=e[33],$=e[34]);let f;e[35]!==c?(f=()=>c("created_at"),e[35]=c,e[36]=f):f=e[36];let z;e[37]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsx(ne,{className:"h-3 w-3"}),e[37]=z):z=e[37];let u;e[38]!==f?(u=s.jsx("th",{className:"pb-3 pr-4",children:s.jsxs("button",{onClick:f,className:"flex items-center gap-1 hover:text-foreground",children:["Joined",z]})}),e[38]=f,e[39]=u):u=e[39];let H,V;e[40]===Symbol.for("react.memo_cache_sentinel")?(H=s.jsx("th",{className:"pb-3 pr-4",children:"Businesses"}),V=s.jsx("th",{className:"pb-3",children:"Actions"}),e[40]=H,e[41]=V):(H=e[40],V=e[41]);let j;e[42]!==h||e[43]!==u?(j=s.jsx("thead",{children:s.jsxs("tr",{className:"border-b text-left text-sm text-muted-foreground",children:[h,O,$,u,H,V]})}),e[42]=h,e[43]=u,e[44]=j):j=e[44];let g;e[45]!==a.data?(g=a.data.length>0?a.data.map(t=>s.jsxs("tr",{className:"border-b last:border-0",children:[s.jsx("td",{className:"py-4 pr-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[t.avatar?s.jsx("img",{src:t.avatar,alt:t.name,className:"h-10 w-10 rounded-full object-cover"}):s.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-muted text-sm font-medium",children:t.name.charAt(0).toUpperCase()}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:t.name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:t.email})]})]})}),s.jsx("td",{className:"py-4 pr-4",children:he(t.is_admin)}),s.jsx("td",{className:"py-4 pr-4",children:fe(t.email_verified_at)}),s.jsx("td",{className:"py-4 pr-4",children:s.jsx("p",{className:"text-sm",children:xe(t.created_at)})}),s.jsx("td",{className:"py-4 pr-4",children:s.jsxs("div",{className:"text-sm",children:[s.jsxs("p",{children:[t.owned_businesses_count," owned"]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.businesses_count," associated"]})]})}),s.jsx("td",{className:"py-4",children:s.jsxs(be,{children:[s.jsx(ye,{asChild:!0,children:s.jsx(S,{variant:"ghost",size:"sm",children:s.jsx(Ue,{className:"h-4 w-4"})})}),s.jsxs(we,{align:"end",children:[s.jsx(Se,{children:"Actions"}),s.jsx(_e,{}),s.jsx(Ae,{onClick:()=>pe(t),children:t.is_admin?s.jsxs(s.Fragment,{children:[s.jsx(Fe,{className:"mr-2 h-4 w-4 text-red-600"}),"Remove Admin"]}):s.jsxs(s.Fragment,{children:[s.jsx(te,{className:"mr-2 h-4 w-4 text-purple-600"}),"Grant Admin"]})})]})]})})]},t.id)):s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"py-8 text-center text-muted-foreground",children:"No users found"})}),e[45]=a.data,e[46]=g):g=e[46];let N;e[47]!==g?(N=s.jsx("tbody",{children:g}),e[47]=g,e[48]=N):N=e[48];let v;e[49]!==j||e[50]!==N?(v=s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[j,N]})}),e[49]=j,e[50]=N,e[51]=v):v=e[51];let b;e[52]!==a.data.length||e[53]!==a.last_page||e[54]!==a.links||e[55]!==a.total?(b=a.last_page>1&&s.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t",children:[s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",a.data.length," of ",a.total," users"]}),s.jsx("div",{className:"flex gap-1",children:a.links.map(Oe)})]}),e[52]=a.data.length,e[53]=a.last_page,e[54]=a.links,e[55]=a.total,e[56]=b):b=e[56];let y;e[57]!==v||e[58]!==b?(y=s.jsx(re,{children:s.jsxs(ie,{className:"pt-6",children:[v,b]})}),e[57]=v,e[58]=b,e[59]=y):y=e[59];const W=i?.is_admin?"Remove Admin Privileges":"Grant Admin Privileges",Y=i?.is_admin?`Are you sure you want to remove admin privileges from ${i?.name}? They will no longer have access to the admin panel.`:`Are you sure you want to grant admin privileges to ${i?.name}? They will have full access to the admin panel.`,ee=i?.is_admin?"Remove Admin":"Grant Admin",se=i?.is_admin?"destructive":"info";let w;e[60]!==J||e[61]!==Q||e[62]!==W||e[63]!==Y||e[64]!==ee||e[65]!==se?(w=s.jsx(Ce,{open:J,onOpenChange:Z,onConfirm:Q,title:W,description:Y,confirmText:ee,variant:se}),e[60]=J,e[61]=Q,e[62]=W,e[63]=Y,e[64]=ee,e[65]=se,e[66]=w):w=e[66];let G;return e[67]!==m||e[68]!==x||e[69]!==y||e[70]!==w?(G=s.jsxs(ve,{breadcrumbs:Ie,children:[M,s.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[T,m,x,y,w]})]}),e[67]=m,e[68]=x,e[69]=y,e[70]=w,e[71]=G):G=e[71],G}function Oe(l,e){return s.jsx(S,{variant:l.active?"default":"outline",size:"sm",disabled:!l.url,onClick:()=>l.url&&_.get(l.url),dangerouslySetInnerHTML:{__html:l.label}},e)}function $e(l){return l?s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-green-100 px-2 py-1 text-xs font-medium text-green-800 dark:bg-green-900 dark:text-green-200",children:[s.jsx(Re,{className:"h-3 w-3"}),"Verified"]}):s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-yellow-100 px-2 py-1 text-xs font-medium text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",children:[s.jsx(Be,{className:"h-3 w-3"}),"Unverified"]})}function ze(l){return l?s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-purple-100 px-2 py-1 text-xs font-medium text-purple-800 dark:bg-purple-900 dark:text-purple-200",children:[s.jsx(te,{className:"h-3 w-3"}),"Admin"]}):s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-gray-100 px-2 py-1 text-xs font-medium text-gray-800 dark:bg-gray-800 dark:text-gray-200",children:[s.jsx(ce,{className:"h-3 w-3"}),"User"]})}function He(l){return l?new Date(l).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric"}):"N/A"}export{vs as default};
