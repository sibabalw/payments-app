import{c as X,r as m,j as t,L as _,a as d,H as Z}from"./app-BRoNAUIM.js";import{C as G}from"./confirmation-dialog-C1x4I7_a.js";import{a as J,B as n,X as K}from"./x-pZV5lkp5.js";import{C as F,a as Q,b as W,c as H}from"./card-Bag7gWUQ.js";import{a as Y,b as ee,c as te,d as N,S as se}from"./select-Cv0uEHLH.js";import{A as ae}from"./app-layout-Bn-75oUf.js";import{c as re}from"./cronUtils-CRYykioj.js";import{C as ne}from"./calendar-CALmSmzi.js";import{U as le}from"./users-CEYKQlp0.js";import{D as ie}from"./dollar-sign-CDLUu5fH.js";import{S as oe}from"./square-pen-BBxJehQ3.js";import{T as ce}from"./trash-2-CIYc90GQ.js";import{P as me}from"./pause-BctL1rXx.js";import{P as de}from"./plus-C6lF1Clu.js";/* empty css            */import"./dialog-DKQrbPU1.js";import"./appearance-dropdown-BEtN_wNg.js";import"./spinner-D5nmHZNm.js";import"./loader-circle-CafrvZjs.js";import"./circle-help-4VBCcThn.js";import"./info-DaNQh9-Y.js";import"./triangle-alert-D6PyCIl6.js";import"./index-CfMSX17F.js";import"./index-BohsM0ZD.js";import"./check-CU7v0mdS.js";import"./chevron-up-DDm2opro.js";import"./app-sidebar-header-BbzcXdQi.js";import"./index-CBJSSLbQ.js";import"./index-Cfp_L9w6.js";import"./log-out-MC42nTzo.js";import"./badge-ZsznMIyW.js";import"./proxy-CQkt3OrQ.js";import"./circle-check-DIHwzO_b.js";import"./circle-x-C4YAnoMU.js";import"./circle-alert-COfzFcbZ.js";import"./message-square-CEp_sz_O.js";import"./file-text-FWLsz4T5.js";import"./user-check-DiuzZ-7a.js";import"./clock-DWicTrer.js";import"./shield-Kl3V0fgW.js";const ue=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],xe=J("Play",ue),pe=[{title:"Payments",href:"/payments"}];function ct(a){const e=X.c(26),{schedules:r,filters:$}=a,[I,R]=m.useState($?.status||"all"),[C]=m.useState($?.business_id||""),[k,w]=m.useState(!1),[u,L]=m.useState(null),[B,z]=m.useState("");let x;e[0]!==C?(x=s=>{R(s),d.get("/payments",{status:s==="all"?"":s,business_id:C},{preserveState:!0})},e[0]=C,e[1]=x):x=e[1];const P=x,E=Se,O=je,U=ge;let p;e[2]===Symbol.for("react.memo_cache_sentinel")?(p=(s,V)=>{L(s),z(V),w(!0)},e[2]=p):p=e[2];const q=p;let f;e[3]!==u?(f=()=>{u&&d.delete(`/payments/${u}`,{preserveScroll:!0,onSuccess:()=>{w(!1),L(null),z("")}})},e[3]=u,e[4]=f):f=e[4];const D=f,M=he;let h;e[5]===Symbol.for("react.memo_cache_sentinel")?(h=t.jsx(Z,{title:"Payment Schedules"}),e[5]=h):h=e[5];let g;e[6]===Symbol.for("react.memo_cache_sentinel")?(g=t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Payment Schedules"}),t.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage recurring payment schedules for recipients"})]}),e[6]=g):g=e[6];let y;e[7]===Symbol.for("react.memo_cache_sentinel")?(y=t.jsxs("div",{className:"flex items-center justify-between",children:[g,t.jsx(_,{href:"/payments/create",children:t.jsxs(n,{children:[t.jsx(de,{className:"mr-2 h-4 w-4"}),"Create Schedule"]})})]}),e[7]=y):y=e[7];let j;e[8]===Symbol.for("react.memo_cache_sentinel")?(j=t.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Status"}),e[8]=j):j=e[8];const T=I||"all";let b;e[9]===Symbol.for("react.memo_cache_sentinel")?(b=t.jsx(Y,{children:t.jsx(ee,{})}),e[9]=b):b=e[9];let S;e[10]===Symbol.for("react.memo_cache_sentinel")?(S=t.jsxs(te,{children:[t.jsx(N,{value:"all",children:"All Statuses"}),t.jsx(N,{value:"active",children:"Active"}),t.jsx(N,{value:"paused",children:"Paused"}),t.jsx(N,{value:"cancelled",children:"Cancelled"})]}),e[10]=S):S=e[10];let l;e[11]!==P||e[12]!==T?(l=t.jsx("div",{className:"flex gap-4",children:t.jsxs("div",{className:"max-w-xs",children:[j,t.jsxs(se,{value:T,onValueChange:P,children:[b,S]})]})}),e[11]=P,e[12]=T,e[13]=l):l=e[13];let i,o;e[14]!==r?(i=r?.data&&r.data.length>0?t.jsx("div",{className:"grid gap-4",children:r.data.map(s=>t.jsxs(F,{children:[t.jsx(Q,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(W,{children:s.name}),M(s.status)]}),t.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(ne,{className:"h-4 w-4"}),re(s.frequency)]}),s.recipients&&t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(le,{className:"h-4 w-4"}),s.recipients.length," recipient(s)"]}),s.amount&&t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(ie,{className:"h-4 w-4"}),s.currency," ",parseFloat(s.amount).toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),s.next_run_at&&t.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Next run: ",new Date(s.next_run_at).toLocaleString()]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(_,{href:`/payments/${s.id}/edit`,children:t.jsxs(n,{variant:"outline",size:"sm",children:[t.jsx(oe,{className:"mr-2 h-4 w-4"}),"Edit"]})}),t.jsxs(n,{variant:"outline",size:"sm",onClick:()=>q(s.id,s.name),className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:text-red-400 dark:hover:text-red-300 dark:hover:bg-red-950",children:[t.jsx(ce,{className:"mr-2 h-4 w-4"}),"Delete"]}),s.status==="active"&&t.jsxs(n,{variant:"outline",size:"sm",onClick:()=>E(s.id),children:[t.jsx(me,{className:"mr-2 h-4 w-4"}),"Pause"]}),s.status==="paused"&&t.jsxs(n,{variant:"outline",size:"sm",onClick:()=>O(s.id),children:[t.jsx(xe,{className:"mr-2 h-4 w-4"}),"Resume"]}),s.status!=="cancelled"&&t.jsxs(n,{variant:"outline",size:"sm",onClick:()=>U(s.id),children:[t.jsx(K,{className:"mr-2 h-4 w-4"}),"Cancel"]})]})]})}),s.business&&t.jsx(H,{children:t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Business: ",s.business.name]})})]},s.id))}):t.jsx(F,{children:t.jsxs(H,{className:"py-10 text-center",children:[t.jsx("p",{className:"text-muted-foreground",children:"No payment schedules found."}),t.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Create a payment schedule to start making recurring payments to recipients."}),t.jsx(_,{href:"/payments/create",className:"mt-4 inline-block",children:t.jsx(n,{children:"Create your first schedule"})})]})}),o=r?.links&&t.jsx("div",{className:"flex justify-center gap-2",children:r.links.map(fe)}),e[14]=r,e[15]=i,e[16]=o):(i=e[15],o=e[16]);const A=`Are you sure you want to permanently delete "${B}"? This action cannot be undone and will permanently remove the schedule and all associated data.`;let c;e[17]!==D||e[18]!==k||e[19]!==A?(c=t.jsx(G,{open:k,onOpenChange:w,onConfirm:D,title:"Permanently Delete Payment Schedule",description:A,confirmText:"Delete Permanently",variant:"destructive"}),e[17]=D,e[18]=k,e[19]=A,e[20]=c):c=e[20];let v;return e[21]!==l||e[22]!==i||e[23]!==o||e[24]!==c?(v=t.jsxs(ae,{breadcrumbs:pe,children:[h,t.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[y,l,i,o,c]})]}),e[21]=l,e[22]=i,e[23]=o,e[24]=c,e[25]=v):v=e[25],v}function fe(a,e){return t.jsx(_,{href:a.url||"#",className:`px-3 py-2 rounded-md text-sm ${a.active?"bg-primary text-primary-foreground":a.url?"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700":"bg-gray-100 text-gray-400 cursor-not-allowed dark:bg-gray-800 dark:text-gray-600"}`,dangerouslySetInnerHTML:{__html:a.label}},e)}function he(a){const e={active:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",paused:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",cancelled:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"};return t.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${e[a]||"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:a.charAt(0).toUpperCase()+a.slice(1)})}function ge(a){confirm("Are you sure you want to cancel this payment schedule? This action cannot be undone.")&&d.post(`/payments/${a}/cancel`,{},{preserveScroll:!0,onSuccess:ye})}function ye(){}function je(a){d.post(`/payments/${a}/resume`,{},{preserveScroll:!0,onSuccess:be})}function be(){}function Se(a){confirm("Are you sure you want to pause this payment schedule?")&&d.post(`/payments/${a}/pause`,{},{preserveScroll:!0,onSuccess:ve})}function ve(){}export{ct as default};
