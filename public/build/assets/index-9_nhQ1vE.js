import{r as j,j as e,H as he,a as je}from"./app-Cuioih4f.js";import{B as E}from"./createLucideIcon-B5MOZI9f.js";import{C as l,a as d,b as n,c as a}from"./card-D9Y_bl1i.js";import{S as $,a as z,b as Y,c as H,d as f}from"./select-CNE8bl0y.js";import{I as V}from"./input-Bz7R7t4w.js";import{L as A}from"./label-C6Cf-NhP.js";import{A as ue}from"./app-layout-n-d4l7tQ.js";import{L as w}from"./loader-circle-BHZ8O1kv.js";import{F as q}from"./file-spreadsheet-B1WF2vbT.js";import{M as R}from"./mail-CYGv6JLP.js";import{F as pe}from"./file-text-CHp8TDnm.js";/* empty css            */import"./index-CfqSVWBk.js";import"./chevron-down-CZg7iP84.js";import"./x-Bo-ZIIiE.js";import"./index-Buc-yRrE.js";import"./index-IPHHTqRQ.js";import"./chevron-right-BmA-IvWf.js";import"./check-B470GyMS.js";import"./chevron-up-kVmNUnJV.js";import"./index-Bs_TJoq4.js";import"./app-sidebar-header-C7CWWu21.js";import"./index-DcSYVg4d.js";import"./appearance-dropdown-Dd19dic0.js";import"./index-EFDA_sBj.js";import"./index-CcLcdVZM.js";import"./log-out-DgGKhRGZ.js";import"./badge-Bn6Vikwd.js";import"./proxy-Bhuhjzak.js";import"./circle-check-DtjdWYjd.js";import"./circle-x-BHtK7BJ7.js";import"./circle-alert-D33Q7hcZ.js";import"./plus-BYiZCxp8.js";import"./credit-card-DyUwoGG-.js";import"./dollar-sign-CmPq-nEC.js";import"./message-square-DDbRZnKk.js";import"./users-CdWaatQB.js";import"./user-check-BK_NFKR2.js";import"./clock-CSBq3vjr.js";import"./shield-U7oFjP4d.js";const ge=[{title:"Reports",href:"/reports"}];function ls({report:k,report_type:J,business_id:I,start_date:X,end_date:Z,businesses:W}){const O=I?String(I):"",[S,K]=j.useState(J||"payroll_summary"),[N,Q]=j.useState(O),[y,ee]=j.useState(X||""),[v,se]=j.useState(Z||""),[t,P]=j.useState(k),[te,G]=j.useState(!k),[h,p]=j.useState({}),[B,C]=j.useState(null),[U,_]=j.useState(null),m=j.useRef(null),re=async()=>{G(!0);try{const s={report_type:S};N&&(s.business_id=N),y&&(s.start_date=y),v&&(s.end_date=v);const o=await fetch(`/reports/data?${new URLSearchParams(s).toString()}`,{method:"GET",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});if(o.ok){const c=await o.json();P(c)}else{const c=await o.text();console.error("Failed to fetch report data:",o.status,o.statusText,c),P(null)}}catch(s){console.error("Error fetching report data:",s),P(null)}finally{G(!1)}};j.useEffect(()=>{re()},[S,N,y,v]);const D=()=>{je.get("/reports",{report_type:S,business_id:N||null,start_date:y||null,end_date:v||null},{preserveState:!0})},le=(s,o="download")=>{const c=new URLSearchParams({report_type:S,delivery:o,...N&&{business_id:N},...y&&{start_date:y},...v&&{end_date:v}});return`/reports/export/${s}?${c.toString()}`},T=async(s,o)=>{const c=`${s}-${o}`;p(u=>({...u,[c]:!0})),C(null),_(null);try{const u=await fetch(le(s,o),{method:"GET",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});if(u.ok){if(!u.headers.get("content-type")?.includes("application/json")){_("Unexpected response. Please try again."),p(x=>({...x,[c]:!1}));return}const i=await u.json();if(i.success===!1&&i.error){_(i.error),p(x=>({...x,[c]:!1}));return}if(o==="download")if(i.download_url&&!i.sse_url){const x=document.createElement("iframe");x.style.display="none",x.src=i.download_url,document.body.appendChild(x),setTimeout(()=>{x.parentNode&&document.body.removeChild(x)},6e4),p(g=>({...g,[c]:!1})),C("Report downloaded successfully!")}else ae(i.report_generation_id,i.sse_url,i.download_url,c);else C(`Your ${s.toUpperCase()} report is being generated and will be sent to your email.`),p(x=>({...x,[c]:!1}))}else{const b=await u.text();_(`Failed to start report generation: ${b}`),p(i=>({...i,[c]:!1}))}}catch(u){console.error("Error exporting report:",u),_("Failed to start report generation. Please try again."),p(b=>({...b,[c]:!1}))}},ae=(s,o,c,u)=>{const b=()=>{p(x=>({...x,[u]:!1})),m.current&&(m.current.close(),m.current=null)};m.current&&(m.current.close(),m.current=null);const i=new EventSource(o);m.current=i,i.onmessage=x=>{try{const g=JSON.parse(x.data);if(g.status==="completed"){i.close(),m.current=null;const F=document.createElement("iframe");F.style.display="none",F.src=g.download_url??c,document.body.appendChild(F),setTimeout(()=>{F.parentNode&&document.body.removeChild(F)},6e4),p(me=>({...me,[u]:!1})),C("Report downloaded successfully!")}else g.status==="failed"&&(_(g.error_message||"Report generation failed."),b())}catch(g){console.error("Error parsing SSE data:",g)}},i.onerror=()=>{i.close(),m.current===i&&(m.current=null),_("Connection lost. Please try again."),b()}};j.useEffect(()=>()=>{m.current&&(m.current.close(),m.current=null)},[]);const r=s=>`ZAR ${parseFloat(String(s)).toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})}`,L=s=>s?new Date(s).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric"}):"N/A",de=()=>{if(!t)return e.jsx(l,{children:e.jsx(a,{className:"py-12 text-center text-muted-foreground",children:"No report data available. Please adjust your filters or wait for data to load."})});switch(S){case"payroll_summary":return M();case"payroll_by_employee":return ne();case"tax_summary":return ie();case"deductions_summary":return ce();case"payment_summary":return oe();case"employee_earnings":return xe();default:return M()}},M=()=>t?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(l,{children:[e.jsx(d,{className:"pb-2",children:e.jsx(n,{className:"text-sm font-medium text-muted-foreground",children:"Total Jobs"})}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold",children:t.total_jobs||0})})]}),e.jsxs(l,{children:[e.jsx(d,{className:"pb-2",children:e.jsx(n,{className:"text-sm font-medium text-muted-foreground",children:"Total Gross"})}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold",children:r(t.total_gross||0)})})]}),e.jsxs(l,{children:[e.jsx(d,{className:"pb-2",children:e.jsx(n,{className:"text-sm font-medium text-muted-foreground",children:"Total Deductions"})}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold text-red-600",children:r((t.total_paye||0)+(t.total_uif||0)+(t.total_adjustments||0))})})]}),e.jsxs(l,{children:[e.jsx(d,{className:"pb-2",children:e.jsx(n,{className:"text-sm font-medium text-muted-foreground",children:"Total Net"})}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:r(t.total_net||0)})})]})]}),e.jsxs(l,{children:[e.jsx(d,{children:e.jsx(n,{children:"Breakdown"})}),e.jsx(a,{children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"PAYE:"}),e.jsx("span",{children:r(t.total_paye||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"UIF:"}),e.jsx("span",{children:r(t.total_uif||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Adjustments:"}),e.jsx("span",{children:r(t.total_adjustments||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"SDL (Employer Cost):"}),e.jsx("span",{children:r(t.total_sdl||0)})]})]})})]}),t.jobs&&t.jobs.length>0&&e.jsxs(l,{children:[e.jsx(d,{children:e.jsx(n,{children:"Payroll Jobs"})}),e.jsx(a,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:"Employee"}),e.jsx("th",{className:"text-right p-2",children:"Gross"}),e.jsx("th",{className:"text-right p-2",children:"PAYE"}),e.jsx("th",{className:"text-right p-2",children:"UIF"}),e.jsx("th",{className:"text-right p-2",children:"Adjustments"}),e.jsx("th",{className:"text-right p-2",children:"Net"}),e.jsx("th",{className:"text-left p-2",children:"Period"})]})}),e.jsx("tbody",{children:t.jobs.map(s=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:s.employee_name}),e.jsx("td",{className:"text-right p-2",children:r(s.gross_salary)}),e.jsx("td",{className:"text-right p-2 text-red-600",children:r(s.paye_amount)}),e.jsx("td",{className:"text-right p-2 text-red-600",children:r(s.uif_amount)}),e.jsx("td",{className:"text-right p-2 text-red-600",children:r(s.adjustments_total||0)}),e.jsx("td",{className:"text-right p-2 font-medium text-green-600",children:r(s.net_salary)}),e.jsxs("td",{className:"p-2 text-xs text-muted-foreground",children:[L(s.pay_period_start)," - ",L(s.pay_period_end)]})]},s.id))})]})})})]})]}):null,ne=()=>!t||!t.employees?null:e.jsxs("div",{className:"space-y-4",children:[e.jsxs(l,{children:[e.jsx(d,{children:e.jsx(n,{children:"Summary"})}),e.jsx(a,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Total Employees"}),e.jsx("div",{className:"text-lg font-bold",children:t.total_employees||0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Total Gross"}),e.jsx("div",{className:"text-lg font-bold",children:r(t.summary?.total_gross||0)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Total Net"}),e.jsx("div",{className:"text-lg font-bold text-green-600",children:r(t.summary?.total_net||0)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Total PAYE"}),e.jsx("div",{className:"text-lg font-bold",children:r(t.summary?.total_paye||0)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Total UIF"}),e.jsx("div",{className:"text-lg font-bold",children:r(t.summary?.total_uif||0)})]})]})})]}),e.jsx("div",{className:"space-y-4",children:t.employees.map(s=>e.jsxs(l,{children:[e.jsx(d,{children:e.jsx(n,{children:s.employee_name})}),e.jsx(a,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Payments"}),e.jsx("div",{className:"text-lg font-bold",children:s.total_jobs})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Gross"}),e.jsx("div",{className:"text-lg font-bold",children:r(s.total_gross)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Net"}),e.jsx("div",{className:"text-lg font-bold text-green-600",children:r(s.total_net)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Deductions"}),e.jsx("div",{className:"text-lg font-bold text-red-600",children:r(s.total_paye+s.total_uif+(s.total_adjustments||0))})]})]})})]},s.employee_id))})]}),ie=()=>t?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(l,{children:[e.jsx(d,{children:e.jsx(n,{children:"PAYE"})}),e.jsx(a,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total"}),e.jsx("div",{className:"text-2xl font-bold",children:r(t.paye?.total||0)})]}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"text-muted-foreground",children:["Count: ",t.paye?.count||0]}),e.jsxs("div",{className:"text-muted-foreground",children:["Average: ",r(t.paye?.average||0)]})]})]})})]}),e.jsxs(l,{children:[e.jsx(d,{children:e.jsx(n,{children:"UIF"})}),e.jsx(a,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total"}),e.jsx("div",{className:"text-2xl font-bold",children:r(t.uif?.total||0)})]}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"text-muted-foreground",children:["Count: ",t.uif?.count||0]}),e.jsxs("div",{className:"text-muted-foreground",children:["Average: ",r(t.uif?.average||0)]})]})]})})]}),e.jsxs(l,{children:[e.jsx(d,{children:e.jsx(n,{children:"SDL (Employer Cost)"})}),e.jsx(a,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total"}),e.jsx("div",{className:"text-2xl font-bold",children:r(t.sdl?.total||0)})]}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"text-muted-foreground",children:["Count: ",t.sdl?.count||0]}),e.jsxs("div",{className:"text-muted-foreground",children:["Average: ",r(t.sdl?.average||0)]})]})]})})]})]}),e.jsxs(l,{children:[e.jsx(d,{children:e.jsx(n,{children:"Summary"})}),e.jsx(a,{children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Tax Liability (PAYE + UIF):"}),e.jsx("span",{className:"font-bold",children:r(t.total_tax_liability||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Employer Costs (SDL):"}),e.jsx("span",{className:"font-bold",children:r(t.total_employer_costs||0)})]})]})})]})]}):null,ce=()=>t?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(l,{children:[e.jsx(d,{children:e.jsx(n,{children:"Statutory Deductions"})}),e.jsxs(a,{children:[e.jsx("div",{className:"text-2xl font-bold",children:r(t.total_statutory_deductions||0)}),e.jsx("div",{className:"text-sm text-muted-foreground mt-2",children:"PAYE + UIF"})]})]}),e.jsxs(l,{children:[e.jsx(d,{children:e.jsx(n,{children:"Custom Deductions"})}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold",children:r(t.total_adjustments||0)})})]}),e.jsxs(l,{children:[e.jsx(d,{children:e.jsx(n,{children:"Total All Deductions"})}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold text-red-600",children:r(t.total_all_deductions||0)})})]})]}),t.deductions&&t.deductions.length>0&&e.jsxs(l,{children:[e.jsx(d,{children:e.jsx(n,{children:"Adjustments Breakdown"})}),e.jsx(a,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:"Deduction Name"}),e.jsx("th",{className:"text-left p-2",children:"Type"}),e.jsx("th",{className:"text-right p-2",children:"Total Amount"}),e.jsx("th",{className:"text-right p-2",children:"Count"})]})}),e.jsx("tbody",{children:t.deductions.map((s,o)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:s.name}),e.jsx("td",{className:"p-2 capitalize",children:s.type}),e.jsx("td",{className:"text-right p-2 font-medium",children:r(s.total_amount)}),e.jsx("td",{className:"text-right p-2",children:s.count})]},o))})]})})})]})]}):null,oe=()=>t?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(l,{children:[e.jsx(d,{children:e.jsx(n,{children:"Total Payments"})}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold",children:t.total_jobs||0})})]}),e.jsxs(l,{children:[e.jsx(d,{children:e.jsx(n,{children:"Total Amount"})}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:r(t.total_amount||0)})})]}),e.jsxs(l,{children:[e.jsx(d,{children:e.jsx(n,{children:"Total Fees"})}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold",children:r(t.total_fees||0)})})]})]}),t.jobs&&t.jobs.length>0&&e.jsxs(l,{children:[e.jsx(d,{children:e.jsx(n,{children:"Payment Jobs"})}),e.jsx(a,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:"Receiver"}),e.jsx("th",{className:"text-right p-2",children:"Amount"}),e.jsx("th",{className:"text-right p-2",children:"Fee"}),e.jsx("th",{className:"text-left p-2",children:"Date"})]})}),e.jsx("tbody",{children:t.jobs.map(s=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:s.receiver_name}),e.jsx("td",{className:"text-right p-2 font-medium",children:r(s.amount)}),e.jsx("td",{className:"text-right p-2",children:r(s.fee)}),e.jsx("td",{className:"p-2 text-xs text-muted-foreground",children:L(s.processed_at)})]},s.id))})]})})})]})]}):null,xe=()=>!t||!t.employees?null:e.jsxs("div",{className:"space-y-4",children:[e.jsxs(l,{children:[e.jsx(d,{children:e.jsx(n,{children:"Summary"})}),e.jsx(a,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Total Employees"}),e.jsx("div",{className:"text-lg font-bold",children:t.summary?.total_employees||0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Total Gross"}),e.jsx("div",{className:"text-lg font-bold",children:r(t.summary?.total_gross||0)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Total Net"}),e.jsx("div",{className:"text-lg font-bold text-green-600",children:r(t.summary?.total_net||0)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Total Deductions"}),e.jsx("div",{className:"text-lg font-bold text-red-600",children:r(t.summary?.total_deductions||0)})]})]})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:"Employee"}),e.jsx("th",{className:"text-right p-2",children:"Payments"}),e.jsx("th",{className:"text-right p-2",children:"Total Gross"}),e.jsx("th",{className:"text-right p-2",children:"Avg Gross"}),e.jsx("th",{className:"text-right p-2",children:"Total Net"}),e.jsx("th",{className:"text-right p-2",children:"Avg Net"}),e.jsx("th",{className:"text-right p-2",children:"Total Deductions"}),e.jsx("th",{className:"text-right p-2",children:"Deduction %"})]})}),e.jsx("tbody",{children:t.employees.map(s=>e.jsxs("tr",{className:"border-b",children:[e.jsxs("td",{className:"p-2",children:[e.jsx("div",{className:"font-medium",children:s.employee_name}),s.employee_email&&e.jsx("div",{className:"text-xs text-muted-foreground",children:s.employee_email})]}),e.jsx("td",{className:"text-right p-2",children:s.total_payments}),e.jsx("td",{className:"text-right p-2 font-medium",children:r(s.total_gross)}),e.jsx("td",{className:"text-right p-2 text-muted-foreground",children:r(s.average_gross)}),e.jsx("td",{className:"text-right p-2 font-medium text-green-600",children:r(s.total_net)}),e.jsx("td",{className:"text-right p-2 text-muted-foreground",children:r(s.average_net)}),e.jsx("td",{className:"text-right p-2 text-red-600",children:r(s.total_deductions)}),e.jsxs("td",{className:"text-right p-2",children:[s.deduction_percentage.toFixed(2),"%"]})]},s.employee_id))})]})})]});return e.jsxs(ue,{breadcrumbs:ge,children:[e.jsx(he,{title:"Reports"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Reports"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(E,{variant:"outline",size:"sm",onClick:()=>T("csv","download"),disabled:h["csv-download"],children:h["csv-download"]?e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),"Download CSV"]})}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>T("csv","email"),disabled:h["csv-email"],children:h["csv-email"]?e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"mr-2 h-4 w-4"}),"Email CSV"]})}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>T("excel","download"),disabled:h["excel-download"],children:h["excel-download"]?e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),"Download Excel"]})}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>T("excel","email"),disabled:h["excel-email"],children:h["excel-email"]?e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"mr-2 h-4 w-4"}),"Email Excel"]})}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>T("pdf","download"),disabled:h["pdf-download"],children:h["pdf-download"]?e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:"mr-2 h-4 w-4"}),"Download PDF"]})}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>T("pdf","email"),disabled:h["pdf-email"],children:h["pdf-email"]?e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"mr-2 h-4 w-4"}),"Email PDF"]})})]})]}),B&&e.jsx("div",{className:"rounded-md bg-green-50 p-4 text-sm text-green-800 dark:bg-green-900/20 dark:text-green-400",children:B}),U&&e.jsx("div",{className:"rounded-md bg-red-50 p-4 text-sm text-red-800 dark:bg-red-900/20 dark:text-red-400",children:U}),e.jsxs(l,{children:[e.jsx(d,{children:e.jsx(n,{children:"Filters"})}),e.jsx(a,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"report_type",children:"Report Type"}),e.jsxs($,{value:S,onValueChange:s=>{K(s),setTimeout(D,100)},children:[e.jsx(z,{children:e.jsx(Y,{})}),e.jsxs(H,{children:[e.jsx(f,{value:"payroll_summary",children:"Payroll Summary"}),e.jsx(f,{value:"payroll_by_employee",children:"Payroll by Employee"}),e.jsx(f,{value:"tax_summary",children:"Tax Summary"}),e.jsx(f,{value:"deductions_summary",children:"Deductions Summary"}),e.jsx(f,{value:"payment_summary",children:"Payment Summary"}),e.jsx(f,{value:"employee_earnings",children:"Employee Earnings"})]})]})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"business_id",children:"Business"}),e.jsxs($,{value:N||"all",onValueChange:s=>{Q(s==="all"?"":s),setTimeout(D,100)},children:[e.jsx(z,{children:e.jsx(Y,{placeholder:"All businesses"})}),e.jsxs(H,{children:[e.jsx(f,{value:"all",children:"All businesses"}),W.map(s=>e.jsx(f,{value:String(s.id),children:s.name},s.id))]})]})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"start_date",children:"Start Date"}),e.jsx(V,{id:"start_date",type:"date",value:y,onChange:s=>{ee(s.target.value),setTimeout(D,100)}})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"end_date",children:"End Date"}),e.jsx(V,{id:"end_date",type:"date",value:v,onChange:s=>{se(s.target.value),setTimeout(D,100)}})]})]})})]}),te?e.jsx(l,{children:e.jsx(a,{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(w,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading report data..."})]})})}):de()]})]})}export{ls as default};
