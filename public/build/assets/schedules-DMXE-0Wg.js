import{c as X,r as c,j as t,L as _,a as d,H as Z}from"./app-DlRq_5I-.js";import{C as G}from"./confirmation-dialog-CykhMIOE.js";import{a as J,B as n}from"./createLucideIcon-DfICN48Q.js";import{C as F,a as K,b as Q,c as H}from"./card-BpVtH_kK.js";import{a as W,b as Y,c as ee,d as N,S as te}from"./select-Ba948_P_.js";import{A as se}from"./app-layout-B1Fh94R8.js";import{c as re}from"./cronUtils-CRYykioj.js";import{C as ae}from"./calendar-B2gwonc8.js";import{U as ne}from"./users-DkXA52Op.js";import{D as le}from"./dollar-sign-CAhazD9z.js";import{S as ie}from"./square-pen-DFFOpHGM.js";import{T as oe}from"./trash-2-FnmhMQ_5.js";import{P as me}from"./pause-GvVIisP1.js";import{X as ce}from"./x-RYBOgl4T.js";import{P as de}from"./plus-CLDQrfk-.js";/* empty css            */import"./dialog-BZoYisnj.js";import"./index-Dl5gb-Kb.js";import"./index-BlmLjsw4.js";import"./index-B1IOqWwB.js";import"./spinner-CcfcH6Ip.js";import"./loader-circle-DB6syjKq.js";import"./info-DQf_6rzi.js";import"./triangle-alert-C7MRDo6i.js";import"./chevron-down-DBn0VZdD.js";import"./index-D8-tZbVS.js";import"./index-qKkV1P3H.js";import"./chevron-right-FxPRos96.js";import"./check-57gXsznI.js";import"./chevron-up-C3E08OMs.js";import"./app-sidebar-header-DViv9NrM.js";import"./appearance-dropdown-kWEtid9a.js";import"./index-BC94lCP7.js";import"./index-CcLcdVZM.js";import"./log-out-BKe7v_gT.js";import"./badge-DkQNu0Ve.js";import"./proxy-DB18oa0z.js";import"./circle-check-CTpeSp7r.js";import"./circle-x-DCpd_SlB.js";import"./circle-alert-BMPPz6PA.js";import"./credit-card-BEASO8FW.js";import"./message-square-BIfa93Ti.js";import"./file-text-DtJO93Xu.js";import"./user-check-BIHcPLhA.js";import"./clock-eJfs3CCo.js";import"./shield-Bc8H0Rwn.js";const pe=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],ue=J("Play",pe),xe=[{title:"Payments",href:"/payments"}];function ft(r){const e=X.c(26),{schedules:a,filters:$}=r,[I,R]=c.useState($?.status||"all"),[C]=c.useState($?.business_id||""),[k,w]=c.useState(!1),[p,L]=c.useState(null),[B,z]=c.useState("");let u;e[0]!==C?(u=s=>{R(s),d.get("/payments",{status:s==="all"?"":s,business_id:C},{preserveState:!0})},e[0]=C,e[1]=u):u=e[1];const P=u,E=Se,O=je,U=ge;let x;e[2]===Symbol.for("react.memo_cache_sentinel")?(x=(s,V)=>{L(s),z(V),w(!0)},e[2]=x):x=e[2];const q=x;let f;e[3]!==p?(f=()=>{p&&d.delete(`/payments/${p}`,{preserveScroll:!0,onSuccess:()=>{w(!1),L(null),z("")}})},e[3]=p,e[4]=f):f=e[4];const D=f,M=he;let h;e[5]===Symbol.for("react.memo_cache_sentinel")?(h=t.jsx(Z,{title:"Payment Schedules"}),e[5]=h):h=e[5];let g;e[6]===Symbol.for("react.memo_cache_sentinel")?(g=t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Payment Schedules"}),t.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage recurring payment schedules for recipients"})]}),e[6]=g):g=e[6];let y;e[7]===Symbol.for("react.memo_cache_sentinel")?(y=t.jsxs("div",{className:"flex items-center justify-between",children:[g,t.jsx(_,{href:"/payments/create",children:t.jsxs(n,{children:[t.jsx(de,{className:"mr-2 h-4 w-4"}),"Create Schedule"]})})]}),e[7]=y):y=e[7];let j;e[8]===Symbol.for("react.memo_cache_sentinel")?(j=t.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Status"}),e[8]=j):j=e[8];const T=I||"all";let b;e[9]===Symbol.for("react.memo_cache_sentinel")?(b=t.jsx(W,{children:t.jsx(Y,{})}),e[9]=b):b=e[9];let S;e[10]===Symbol.for("react.memo_cache_sentinel")?(S=t.jsxs(ee,{children:[t.jsx(N,{value:"all",children:"All Statuses"}),t.jsx(N,{value:"active",children:"Active"}),t.jsx(N,{value:"paused",children:"Paused"}),t.jsx(N,{value:"cancelled",children:"Cancelled"})]}),e[10]=S):S=e[10];let l;e[11]!==P||e[12]!==T?(l=t.jsx("div",{className:"flex gap-4",children:t.jsxs("div",{className:"max-w-xs",children:[j,t.jsxs(te,{value:T,onValueChange:P,children:[b,S]})]})}),e[11]=P,e[12]=T,e[13]=l):l=e[13];let i,o;e[14]!==a?(i=a?.data&&a.data.length>0?t.jsx("div",{className:"grid gap-4",children:a.data.map(s=>t.jsxs(F,{children:[t.jsx(K,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Q,{children:s.name}),M(s.status)]}),t.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(ae,{className:"h-4 w-4"}),re(s.frequency)]}),s.recipients&&t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(ne,{className:"h-4 w-4"}),s.recipients.length," recipient(s)"]}),s.amount&&t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(le,{className:"h-4 w-4"}),s.currency," ",parseFloat(s.amount).toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),s.next_run_at&&t.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Next run: ",new Date(s.next_run_at).toLocaleString()]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(_,{href:`/payments/${s.id}/edit`,children:t.jsxs(n,{variant:"outline",size:"sm",children:[t.jsx(ie,{className:"mr-2 h-4 w-4"}),"Edit"]})}),t.jsxs(n,{variant:"outline",size:"sm",onClick:()=>q(s.id,s.name),className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:text-red-400 dark:hover:text-red-300 dark:hover:bg-red-950",children:[t.jsx(oe,{className:"mr-2 h-4 w-4"}),"Delete"]}),s.status==="active"&&t.jsxs(n,{variant:"outline",size:"sm",onClick:()=>E(s.id),children:[t.jsx(me,{className:"mr-2 h-4 w-4"}),"Pause"]}),s.status==="paused"&&t.jsxs(n,{variant:"outline",size:"sm",onClick:()=>O(s.id),children:[t.jsx(ue,{className:"mr-2 h-4 w-4"}),"Resume"]}),s.status!=="cancelled"&&t.jsxs(n,{variant:"outline",size:"sm",onClick:()=>U(s.id),children:[t.jsx(ce,{className:"mr-2 h-4 w-4"}),"Cancel"]})]})]})}),s.business&&t.jsx(H,{children:t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Business: ",s.business.name]})})]},s.id))}):t.jsx(F,{children:t.jsxs(H,{className:"py-10 text-center",children:[t.jsx("p",{className:"text-muted-foreground",children:"No payment schedules found."}),t.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Create a payment schedule to start making recurring payments to recipients."}),t.jsx(_,{href:"/payments/create",className:"mt-4 inline-block",children:t.jsx(n,{children:"Create your first schedule"})})]})}),o=a?.links&&t.jsx("div",{className:"flex justify-center gap-2",children:a.links.map(fe)}),e[14]=a,e[15]=i,e[16]=o):(i=e[15],o=e[16]);const A=`Are you sure you want to permanently delete "${B}"? This action cannot be undone and will permanently remove the schedule and all associated data.`;let m;e[17]!==D||e[18]!==k||e[19]!==A?(m=t.jsx(G,{open:k,onOpenChange:w,onConfirm:D,title:"Permanently Delete Payment Schedule",description:A,confirmText:"Delete Permanently",variant:"destructive"}),e[17]=D,e[18]=k,e[19]=A,e[20]=m):m=e[20];let v;return e[21]!==l||e[22]!==i||e[23]!==o||e[24]!==m?(v=t.jsxs(se,{breadcrumbs:xe,children:[h,t.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[y,l,i,o,m]})]}),e[21]=l,e[22]=i,e[23]=o,e[24]=m,e[25]=v):v=e[25],v}function fe(r,e){return t.jsx(_,{href:r.url||"#",className:`px-3 py-2 rounded-md text-sm ${r.active?"bg-primary text-primary-foreground":r.url?"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700":"bg-gray-100 text-gray-400 cursor-not-allowed dark:bg-gray-800 dark:text-gray-600"}`,dangerouslySetInnerHTML:{__html:r.label}},e)}function he(r){const e={active:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",paused:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",cancelled:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"};return t.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${e[r]||"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:r.charAt(0).toUpperCase()+r.slice(1)})}function ge(r){confirm("Are you sure you want to cancel this payment schedule? This action cannot be undone.")&&d.post(`/payments/${r}/cancel`,{},{preserveScroll:!0,onSuccess:ye})}function ye(){}function je(r){d.post(`/payments/${r}/resume`,{},{preserveScroll:!0,onSuccess:be})}function be(){}function Se(r){confirm("Are you sure you want to pause this payment schedule?")&&d.post(`/payments/${r}/pause`,{},{preserveScroll:!0,onSuccess:ve})}function ve(){}export{ft as default};
