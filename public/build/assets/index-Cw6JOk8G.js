import{c as Z,r as I,j as s,a as E,H as ee,L as se}from"./app-CMeUrf50.js";import{B as H}from"./x-CZYrHTRQ.js";import{a as W,b as P,d as $,C as z,c as G}from"./card-Cwxw5GdZ.js";import{B as K}from"./badge-CpbHZjhE.js";import{A as te}from"./admin-layout-R-ZkMW4z.js";import{C as U}from"./confirmation-dialog-B3ESMUXr.js";import{C as re}from"./chevron-left-CkYgpUUB.js";import{A as ae}from"./activity-BnsXt6rX.js";import{D as le}from"./database-DgWENjQ_.js";import{R as ne}from"./refresh-cw-B5SMkV_1.js";import{T as ie}from"./trash-2-BFbOVXKc.js";/* empty css            */import"./app-sidebar-header-CztvwVfL.js";import"./appearance-dropdown-CIplfUHR.js";import"./index-CASGKN-W.js";import"./index-Cfp_L9w6.js";import"./log-out-C9Jhd31W.js";import"./index-wVJuMR_H.js";import"./shield-CzJFJRG5.js";import"./users-BjCKGoHP.js";import"./message-square-Bem12P6R.js";import"./file-text-DBGV6D9F.js";import"./lock-f0EayAs4.js";import"./chart-column-DZRrYrRT.js";import"./dialog-DTBUSObX.js";import"./spinner-Cg7quiac.js";import"./loader-circle-PC8s1h8o.js";import"./circle-help-B-2QybsR.js";import"./info-TdmTvmC3.js";import"./triangle-alert-B9lzK8C9.js";const oe=[{title:"Admin",href:"/admin"},{title:"Queue Management",href:"/admin/queue"}];function Le(V){const e=Z.c(50),{queueConfig:t,queueStats:r}=V,[F,O]=I.useState(!1),[B,J]=I.useState(!1);let h;e[0]===Symbol.for("react.memo_cache_sentinel")?(h=()=>{E.post("/admin/queue/restart",{},{onSuccess:()=>{O(!1)}})},e[0]=h):h=e[0];const X=h;let j;e[1]===Symbol.for("react.memo_cache_sentinel")?(j=()=>{E.post("/admin/queue/clear-failed",{},{onSuccess:()=>{J(!1),E.reload()}})},e[1]=j):j=e[1];const Y=j;let p;e[2]===Symbol.for("react.memo_cache_sentinel")?(p=s.jsx(ee,{title:"Admin - Queue Management"}),e[2]=p):p=e[2];let b;e[3]===Symbol.for("react.memo_cache_sentinel")?(b=s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Queue Management"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Monitor and manage queue workers"})]}),e[3]=b):b=e[3];let _;e[4]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsxs("div",{className:"flex items-center justify-between",children:[b,s.jsx(se,{href:"/admin",children:s.jsxs(H,{variant:"outline",children:[s.jsx(re,{className:"mr-2 h-4 w-4"}),"Back to Dashboard"]})})]}),e[4]=_):_=e[4];let g;e[5]===Symbol.for("react.memo_cache_sentinel")?(g=s.jsxs(W,{children:[s.jsxs(P,{className:"flex items-center gap-2",children:[s.jsx(ae,{className:"h-5 w-5"}),"Queue Configuration"]}),s.jsx($,{children:"Current queue settings"})]}),e[5]=g):g=e[5];let y;e[6]===Symbol.for("react.memo_cache_sentinel")?(y=s.jsx("span",{className:"text-muted-foreground",children:"Default Connection"}),e[6]=y):y=e[6];let a;e[7]!==t.default?(a=s.jsxs("div",{className:"flex justify-between text-sm",children:[y,s.jsx("span",{className:"font-mono",children:t.default})]}),e[7]=t.default,e[8]=a):a=e[8];let N;e[9]===Symbol.for("react.memo_cache_sentinel")?(N=s.jsx("span",{className:"text-muted-foreground",children:"Driver"}),e[9]=N):N=e[9];let l;e[10]!==t.driver?(l=s.jsxs("div",{className:"flex justify-between text-sm",children:[N,s.jsx("span",{className:"font-mono",children:t.driver})]}),e[10]=t.driver,e[11]=l):l=e[11];let C;e[12]===Symbol.for("react.memo_cache_sentinel")?(C=s.jsx("span",{className:"text-muted-foreground",children:"Connection"}),e[12]=C):C=e[12];let n;e[13]!==t.connection?(n=s.jsxs("div",{className:"flex justify-between text-sm",children:[C,s.jsx("span",{className:"font-mono",children:t.connection})]}),e[13]=t.connection,e[14]=n):n=e[14];let i;e[15]!==l||e[16]!==n||e[17]!==a?(i=s.jsxs(z,{children:[g,s.jsxs(G,{className:"space-y-3",children:[a,l,n]})]}),e[15]=l,e[16]=n,e[17]=a,e[18]=i):i=e[18];let v;e[19]===Symbol.for("react.memo_cache_sentinel")?(v=s.jsxs(W,{children:[s.jsxs(P,{className:"flex items-center gap-2",children:[s.jsx(le,{className:"h-5 w-5"}),"Queue Statistics"]}),s.jsx($,{children:"Current queue status"})]}),e[19]=v):v=e[19];let S;e[20]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx("span",{className:"text-sm text-muted-foreground",children:"Pending Jobs"}),e[20]=S):S=e[20];let o;e[21]!==r.pending_jobs_count?(o=s.jsxs("div",{className:"flex justify-between items-center",children:[S,s.jsx(K,{variant:"secondary",children:r.pending_jobs_count})]}),e[21]=r.pending_jobs_count,e[22]=o):o=e[22];let w;e[23]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx("span",{className:"text-sm text-muted-foreground",children:"Failed Jobs"}),e[23]=w):w=e[23];const M=r.failed_jobs_count>0?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"";let c;e[24]!==r.failed_jobs_count||e[25]!==M?(c=s.jsxs("div",{className:"flex justify-between items-center",children:[w,s.jsx(K,{className:M,children:r.failed_jobs_count})]}),e[24]=r.failed_jobs_count,e[25]=M,e[26]=c):c=e[26];let m;e[27]!==o||e[28]!==c?(m=s.jsxs(z,{children:[v,s.jsxs(G,{className:"space-y-3",children:[o,c]})]}),e[27]=o,e[28]=c,e[29]=m):m=e[29];let d;e[30]!==i||e[31]!==m?(d=s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i,m]}),e[30]=i,e[31]=m,e[32]=d):d=e[32];let k;e[33]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsxs(W,{children:[s.jsx(P,{children:"Queue Actions"}),s.jsx($,{children:"Manage queue workers and jobs"})]}),e[33]=k):k=e[33];let R;e[34]===Symbol.for("react.memo_cache_sentinel")?(R=s.jsxs("div",{children:[s.jsx("p",{className:"font-medium mb-1",children:"Restart Queue Workers"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Restart all queue workers. They will finish processing current jobs before restarting."})]}),e[34]=R):R=e[34];let q;e[35]===Symbol.for("react.memo_cache_sentinel")?(q=s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[R,s.jsxs(H,{variant:"outline",onClick:()=>O(!0),children:[s.jsx(ne,{className:"mr-2 h-4 w-4"}),"Restart Workers"]})]}),e[35]=q):q=e[35];let D;e[36]===Symbol.for("react.memo_cache_sentinel")?(D=s.jsxs("div",{children:[s.jsx("p",{className:"font-medium mb-1",children:"Clear Failed Jobs"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Remove all failed jobs from the queue. This action cannot be undone."})]}),e[36]=D):D=e[36];let Q;e[37]===Symbol.for("react.memo_cache_sentinel")?(Q=()=>J(!0),e[37]=Q):Q=e[37];const L=r.failed_jobs_count===0;let T;e[38]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsx(ie,{className:"mr-2 h-4 w-4"}),e[38]=T):T=e[38];let f;e[39]!==L?(f=s.jsxs(z,{children:[k,s.jsxs(G,{className:"space-y-4",children:[q,s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[D,s.jsxs(H,{variant:"destructive",onClick:Q,disabled:L,children:[T,"Clear Failed Jobs"]})]})]})]}),e[39]=L,e[40]=f):f=e[40];let u;e[41]!==F?(u=s.jsx(U,{open:F,onOpenChange:O,onConfirm:X,title:"Restart Queue Workers",description:"Queue workers will finish processing current jobs and then restart. This may cause a brief delay in job processing.",confirmText:"Restart",variant:"default"}),e[41]=F,e[42]=u):u=e[42];let x;e[43]!==B?(x=s.jsx(U,{open:B,onOpenChange:J,onConfirm:Y,title:"Clear Failed Jobs",description:"Are you sure you want to clear all failed jobs? This action cannot be undone.",confirmText:"Clear",variant:"destructive"}),e[43]=B,e[44]=x):x=e[44];let A;return e[45]!==d||e[46]!==f||e[47]!==u||e[48]!==x?(A=s.jsxs(te,{breadcrumbs:oe,children:[p,s.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[_,d,f,u,x]})]}),e[45]=d,e[46]=f,e[47]=u,e[48]=x,e[49]=A):A=e[49],A}export{Le as default};
