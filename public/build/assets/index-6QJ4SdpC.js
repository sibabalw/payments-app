import{c as de,r as re,j as s,a as X,H as fe,L as xe}from"./app-DlRq_5I-.js";import{a as he,B as ie}from"./createLucideIcon-DfICN48Q.js";import{C as b,c as S,a as C,b as w,d as D}from"./card-BpVtH_kK.js";import{B as A}from"./badge-DkQNu0Ve.js";import{A as pe}from"./admin-layout-CeEYKu82.js";import{C as ne}from"./confirmation-dialog-CykhMIOE.js";import{C as je}from"./chevron-left-CeavYiYk.js";import{H as ue}from"./hard-drive-CKIzpjzX.js";import{D as ge}from"./database-DEMSPvNo.js";import{R as Ne}from"./refresh-cw-CABjQ2qD.js";import{F as oe}from"./file-text-DtJO93Xu.js";import{T as _e}from"./trash-2-FnmhMQ_5.js";/* empty css            */import"./app-sidebar-header-DViv9NrM.js";import"./index-BlmLjsw4.js";import"./index-B1IOqWwB.js";import"./x-RYBOgl4T.js";import"./appearance-dropdown-kWEtid9a.js";import"./index-Dl5gb-Kb.js";import"./chevron-down-DBn0VZdD.js";import"./index-D8-tZbVS.js";import"./index-BC94lCP7.js";import"./index-CcLcdVZM.js";import"./log-out-BKe7v_gT.js";import"./chevron-right-FxPRos96.js";import"./shield-Bc8H0Rwn.js";import"./users-DkXA52Op.js";import"./message-square-BIfa93Ti.js";import"./lock-D2elwpfQ.js";import"./credit-card-BEASO8FW.js";import"./chart-column-P9jAq3tl.js";import"./dialog-BZoYisnj.js";import"./spinner-CcfcH6Ip.js";import"./loader-circle-DB6syjKq.js";import"./info-DQf_6rzi.js";import"./triangle-alert-C7MRDo6i.js";const ye=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],ve=he("Folder",ye),be=[{title:"Admin",href:"/admin"},{title:"Storage Management",href:"/admin/storage"}];function os(t){const e=de.c(70),{cache:a,sessions:l,logs:z,storage_disks:Y,total_storage:ee}=t,[se,te]=re.useState(!1),[le,ae]=re.useState(!1);let L;e[0]===Symbol.for("react.memo_cache_sentinel")?(L=()=>{X.post("/admin/storage/clear-cache",{},{onSuccess:()=>{te(!1),X.reload()}})},e[0]=L):L=e[0];const ce=L;let F;e[1]===Symbol.for("react.memo_cache_sentinel")?(F=()=>{X.post("/admin/storage/clear-sessions",{},{onSuccess:()=>{ae(!1),X.reload()}})},e[1]=F):F=e[1];const me=F;let T;e[2]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsx(fe,{title:"Admin - Storage Management"}),e[2]=T):T=e[2];let H;e[3]===Symbol.for("react.memo_cache_sentinel")?(H=s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Storage Management"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Monitor and manage storage usage"})]}),e[3]=H):H=e[3];let M;e[4]===Symbol.for("react.memo_cache_sentinel")?(M=s.jsxs("div",{className:"flex items-center justify-between",children:[H,s.jsx(xe,{href:"/admin",children:s.jsxs(ie,{variant:"outline",children:[s.jsx(je,{className:"mr-2 h-4 w-4"}),"Back to Dashboard"]})})]}),e[4]=M):M=e[4];let O;e[5]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsxs(C,{children:[s.jsxs(w,{className:"flex items-center gap-2",children:[s.jsx(ue,{className:"h-5 w-5"}),"Total Storage Usage"]}),s.jsx(D,{children:"Combined storage across all systems"})]}),e[5]=O):O=e[5];let i;e[6]!==ee?(i=s.jsxs(b,{children:[O,s.jsx(S,{children:s.jsx("div",{className:"text-3xl font-bold",children:ee})})]}),e[6]=ee,e[7]=i):i=e[7];let k;e[8]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsxs(C,{children:[s.jsxs(w,{className:"flex items-center gap-2",children:[s.jsx(ge,{className:"h-5 w-5"}),"Cache Storage"]}),s.jsx(D,{children:"Application cache information"})]}),e[8]=k):k=e[8];let B;e[9]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsx("span",{className:"text-muted-foreground",children:"Driver"}),e[9]=B):B=e[9];let r;e[10]!==a.driver?(r=s.jsxs("div",{className:"flex justify-between text-sm",children:[B,s.jsx("span",{className:"font-mono",children:a.driver})]}),e[10]=a.driver,e[11]=r):r=e[11];let R;e[12]===Symbol.for("react.memo_cache_sentinel")?(R=s.jsx("span",{className:"text-muted-foreground",children:"Size"}),e[12]=R):R=e[12];let n;e[13]!==a.size?(n=s.jsxs("div",{className:"flex justify-between text-sm",children:[R,s.jsx("span",{className:"font-medium",children:a.size})]}),e[13]=a.size,e[14]=n):n=e[14];let E;e[15]===Symbol.for("react.memo_cache_sentinel")?(E=s.jsx("span",{className:"text-muted-foreground",children:"File Count"}),e[15]=E):E=e[15];let o;e[16]!==a.file_count?(o=s.jsxs("div",{className:"flex justify-between text-sm",children:[E,s.jsx(A,{variant:"secondary",children:a.file_count})]}),e[16]=a.file_count,e[17]=o):o=e[17];let c;e[18]!==r||e[19]!==n||e[20]!==o?(c=s.jsxs("div",{className:"space-y-2",children:[r,n,o]}),e[18]=r,e[19]=n,e[20]=o,e[21]=c):c=e[21];let Z;e[22]===Symbol.for("react.memo_cache_sentinel")?(Z=()=>te(!0),e[22]=Z):Z=e[22];let I;e[23]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsxs(ie,{variant:"outline",onClick:Z,className:"w-full",children:[s.jsx(Ne,{className:"mr-2 h-4 w-4"}),"Clear Cache"]}),e[23]=I):I=e[23];let m;e[24]!==c?(m=s.jsxs(b,{children:[k,s.jsxs(S,{className:"space-y-4",children:[c,I]})]}),e[24]=c,e[25]=m):m=e[25];let U;e[26]===Symbol.for("react.memo_cache_sentinel")?(U=s.jsxs(C,{children:[s.jsxs(w,{className:"flex items-center gap-2",children:[s.jsx(oe,{className:"h-5 w-5"}),"Session Storage"]}),s.jsx(D,{children:"Active session information"})]}),e[26]=U):U=e[26];let V;e[27]===Symbol.for("react.memo_cache_sentinel")?(V=s.jsx("span",{className:"text-muted-foreground",children:"Driver"}),e[27]=V):V=e[27];let d;e[28]!==l.driver?(d=s.jsxs("div",{className:"flex justify-between text-sm",children:[V,s.jsx("span",{className:"font-mono",children:l.driver})]}),e[28]=l.driver,e[29]=d):d=e[29];let $;e[30]===Symbol.for("react.memo_cache_sentinel")?($=s.jsx("span",{className:"text-muted-foreground",children:"Lifetime"}),e[30]=$):$=e[30];let f;e[31]!==l.lifetime?(f=s.jsxs("div",{className:"flex justify-between text-sm",children:[$,s.jsxs("span",{className:"font-mono",children:[l.lifetime," minutes"]})]}),e[31]=l.lifetime,e[32]=f):f=e[32];let q;e[33]===Symbol.for("react.memo_cache_sentinel")?(q=s.jsx("span",{className:"text-muted-foreground",children:"Size"}),e[33]=q):q=e[33];let x;e[34]!==l.size?(x=s.jsxs("div",{className:"flex justify-between text-sm",children:[q,s.jsx("span",{className:"font-medium",children:l.size})]}),e[34]=l.size,e[35]=x):x=e[35];let G;e[36]===Symbol.for("react.memo_cache_sentinel")?(G=s.jsx("span",{className:"text-muted-foreground",children:"Active Sessions"}),e[36]=G):G=e[36];let h;e[37]!==l.count?(h=s.jsxs("div",{className:"flex justify-between text-sm",children:[G,s.jsx(A,{variant:"secondary",children:l.count})]}),e[37]=l.count,e[38]=h):h=e[38];let p;e[39]!==d||e[40]!==f||e[41]!==x||e[42]!==h?(p=s.jsxs("div",{className:"space-y-2",children:[d,f,x,h]}),e[39]=d,e[40]=f,e[41]=x,e[42]=h,e[43]=p):p=e[43];let J;e[44]===Symbol.for("react.memo_cache_sentinel")?(J=()=>ae(!0),e[44]=J):J=e[44];let K;e[45]===Symbol.for("react.memo_cache_sentinel")?(K=s.jsxs(ie,{variant:"outline",onClick:J,className:"w-full",children:[s.jsx(_e,{className:"mr-2 h-4 w-4"}),"Clear Sessions"]}),e[45]=K):K=e[45];let j;e[46]!==p?(j=s.jsxs(b,{children:[U,s.jsxs(S,{className:"space-y-4",children:[p,K]})]}),e[46]=p,e[47]=j):j=e[47];let u;e[48]!==m||e[49]!==j?(u=s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[m,j]}),e[48]=m,e[49]=j,e[50]=u):u=e[50];let P;e[51]===Symbol.for("react.memo_cache_sentinel")?(P=s.jsxs(C,{children:[s.jsxs(w,{className:"flex items-center gap-2",children:[s.jsx(ve,{className:"h-5 w-5"}),"Storage Disks"]}),s.jsx(D,{children:"File storage disk information"})]}),e[51]=P):P=e[51];let g;e[52]!==Y?(g=Y.map(Ce),e[52]=Y,e[53]=g):g=e[53];let N;e[54]!==g?(N=s.jsxs(b,{children:[P,s.jsx(S,{children:s.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:g})})]}),e[54]=g,e[55]=N):N=e[55];let Q;e[56]===Symbol.for("react.memo_cache_sentinel")?(Q=s.jsxs(C,{children:[s.jsxs(w,{className:"flex items-center gap-2",children:[s.jsx(oe,{className:"h-5 w-5"}),"Log Files"]}),s.jsx(D,{children:"Application log file sizes"})]}),e[56]=Q):Q=e[56];let _;e[57]!==z?(_=s.jsxs(b,{children:[Q,s.jsx(S,{children:z.length>0?s.jsx("div",{className:"space-y-3",children:z.map(Se)}):s.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No log files found"})})]}),e[57]=z,e[58]=_):_=e[58];let y;e[59]!==se?(y=s.jsx(ne,{open:se,onOpenChange:te,onConfirm:ce,title:"Clear Cache",description:"Are you sure you want to clear all application cache? This will clear config, route, view, and application cache.",confirmText:"Clear Cache",variant:"default"}),e[59]=se,e[60]=y):y=e[60];let v;e[61]!==le?(v=s.jsx(ne,{open:le,onOpenChange:ae,onConfirm:me,title:"Clear Sessions",description:"Are you sure you want to clear all active sessions? All users will be logged out.",confirmText:"Clear Sessions",variant:"destructive"}),e[61]=le,e[62]=v):v=e[62];let W;return e[63]!==u||e[64]!==N||e[65]!==_||e[66]!==y||e[67]!==v||e[68]!==i?(W=s.jsxs(pe,{breadcrumbs:be,children:[T,s.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[M,i,u,N,_,y,v]})]}),e[63]=u,e[64]=N,e[65]=_,e[66]=y,e[67]=v,e[68]=i,e[69]=W):W=e[69],W}function Se(t){return s.jsxs("div",{className:"flex items-center justify-between border-b pb-3 last:border-0",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:t.name}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Modified: ",new Date(t.modified).toLocaleString("en-ZA")]})]}),s.jsx(A,{variant:"secondary",children:t.size_formatted})]},t.name)}function Ce(t){return s.jsxs("div",{className:"border rounded-lg p-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-medium",children:t.name}),s.jsx(A,{variant:"outline",children:t.driver})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Size"}),s.jsx("span",{className:"font-medium",children:t.size})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Files"}),s.jsx(A,{variant:"secondary",children:t.file_count})]})]},t.name)}export{os as default};
