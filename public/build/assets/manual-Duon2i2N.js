import{c as ht,r as be,u as gt,j as t,a as ve,H as _t,L as xt}from"./app-DlRq_5I-.js";import{I as Se}from"./input-error-N6fjUyr3.js";import{C as jt}from"./confirmation-dialog-CykhMIOE.js";import{B as _e}from"./createLucideIcon-DfICN48Q.js";import{c as tt,C as it,a as st,b as lt}from"./card-BpVtH_kK.js";import{I as He}from"./input-EpzQuicb.js";import{L as b}from"./label-DDSUlu2q.js";import{S as nt,a as ot,b as rt,c as at,d as mt}from"./select-Ba948_P_.js";import{T as bt}from"./textarea-DfcGaLQK.js";import{A as vt}from"./app-layout-B1Fh94R8.js";/* empty css            */import"./dialog-BZoYisnj.js";import"./index-Dl5gb-Kb.js";import"./index-BlmLjsw4.js";import"./x-RYBOgl4T.js";import"./index-B1IOqWwB.js";import"./spinner-CcfcH6Ip.js";import"./loader-circle-DB6syjKq.js";import"./info-DQf_6rzi.js";import"./triangle-alert-C7MRDo6i.js";import"./index-BC94lCP7.js";import"./chevron-down-DBn0VZdD.js";import"./index-D8-tZbVS.js";import"./index-qKkV1P3H.js";import"./chevron-right-FxPRos96.js";import"./check-57gXsznI.js";import"./chevron-up-C3E08OMs.js";import"./app-sidebar-header-DViv9NrM.js";import"./appearance-dropdown-kWEtid9a.js";import"./index-CcLcdVZM.js";import"./log-out-BKe7v_gT.js";import"./badge-DkQNu0Ve.js";import"./proxy-DB18oa0z.js";import"./circle-check-CTpeSp7r.js";import"./circle-x-DCpd_SlB.js";import"./circle-alert-BMPPz6PA.js";import"./plus-CLDQrfk-.js";import"./credit-card-BEASO8FW.js";import"./dollar-sign-CAhazD9z.js";import"./message-square-BIfa93Ti.js";import"./file-text-DtJO93Xu.js";import"./users-DkXA52Op.js";import"./user-check-BIHcPLhA.js";import"./clock-eJfs3CCo.js";import"./shield-Bc8H0Rwn.js";const St=[{title:"Time Tracking",href:"/time-tracking"},{title:"Manual Entry",href:"#"}];function gi(d){const e=ht.c(189),{employees:Me,businesses:c,selectedBusinessId:dt,selectedDate:qe,entries:xe}=d,[a,ct]=be.useState(dt||c[0]?.id||"");let ye;e[0]!==qe?(ye=qe||new Date().toISOString().split("T")[0],e[0]=qe,e[1]=ye):ye=e[1];const[o,ut]=be.useState(ye),[r,Ve]=be.useState(null),[$e,ze]=be.useState(!1),[Ce,et]=be.useState(null);let Te;e[2]!==o?(Te={employee_id:"",date:o,sign_in_time:"",sign_out_time:"",bonus_amount:"",notes:""},e[2]=o,e[3]=Te):Te=e[3];const{data:l,setData:s,post:Ue,put:We,delete:Ge,processing:v,errors:n,reset:m}=gt(Te);let De;e[4]!==o?(De=i=>{ct(i),ve.get("/time-tracking/manual",{business_id:i,date:o},{preserveState:!0})},e[4]=o,e[5]=De):De=e[5];const je=De;let Ee;e[6]!==r||e[7]!==Ue||e[8]!==We||e[9]!==m?(Ee=i=>{i.preventDefault(),r?We(`/time-tracking/entries/${r.id}`,{preserveScroll:!0,onSuccess:()=>{m(),Ve(null),ve.reload({only:["entries"]})}}):Ue("/time-tracking/entries",{preserveScroll:!0,onSuccess:()=>{m(),ve.reload({only:["entries"]})}})},e[6]=r,e[7]=Ue,e[8]=We,e[9]=m,e[10]=Ee):Ee=e[10];const Je=Ee;let Ne;e[11]!==s?(Ne=i=>{Ve(i),s({employee_id:i.employee_id,date:i.date,sign_in_time:i.sign_in_time?new Date(i.sign_in_time).toISOString().slice(0,16):"",sign_out_time:i.sign_out_time?new Date(i.sign_out_time).toISOString().slice(0,16):"",bonus_amount:i.bonus_amount||"",notes:i.notes||""})},e[11]=s,e[12]=Ne):Ne=e[12];const Ke=Ne;let Fe;e[13]!==m?(Fe=()=>{m(),Ve(null)},e[13]=m,e[14]=Fe):Fe=e[14];const Pe=Fe;let ke;e[15]===Symbol.for("react.memo_cache_sentinel")?(ke=i=>{et(i),ze(!0)},e[15]=ke):ke=e[15];const ft=ke;let we;e[16]!==Ge||e[17]!==Ce?(we=()=>{Ce&&Ge(`/time-tracking/entries/${String(Ce)}`,{preserveScroll:!0,onSuccess:()=>{ve.reload({only:["entries"]}),ze(!1),et(null)}})},e[16]=Ge,e[17]=Ce,e[18]=we):we=e[18];const Qe=we;let S,y,C,T,D,E,u,f,p,N,F,h,g,_,k,w,x,I,j,A;if(e[19]!==a||e[20]!==c||e[21]!==l.employee_id||e[22]!==o||e[23]!==r||e[24]!==Me||e[25]!==je||e[26]!==s||e[27]!==Je){let i;e[48]!==a?(i=ge=>ge.business_id===Number(a),e[48]=a,e[49]=i):i=e[49];const pt=Me.filter(i);D=vt,I=St,e[50]===Symbol.for("react.memo_cache_sentinel")?(j=t.jsx(_t,{title:"Manual Time Entry"}),e[50]=j):j=e[50],w="flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4";let Re;e[51]===Symbol.for("react.memo_cache_sentinel")?(Re=t.jsx("h1",{className:"text-2xl font-bold",children:"Manual Time Entry"}),e[51]=Re):Re=e[51],e[52]===Symbol.for("react.memo_cache_sentinel")?(x=t.jsxs("div",{className:"flex items-center justify-between",children:[Re,t.jsx(xt,{href:"/time-tracking",children:t.jsx(_e,{variant:"outline",children:"Back to Dashboard"})})]}),e[52]=x):x=e[52],k="grid grid-cols-1 lg:grid-cols-2 gap-4",T=it;const Ye=r?"Edit Time Entry":"Add Time Entry";e[53]!==Ye?(_=t.jsx(st,{children:t.jsx(lt,{children:Ye})}),e[53]=Ye,e[54]=_):_=e[54],C=tt,N=Je,F="space-y-4",e[55]!==a||e[56]!==c||e[57]!==je?(h=c&&c.length>0&&t.jsxs("div",{children:[t.jsx(b,{htmlFor:"business_id",children:"Business"}),t.jsxs(nt,{value:String(a),onValueChange:je,children:[t.jsx(ot,{children:t.jsx(rt,{})}),t.jsx(at,{children:c.map(Ct)})]})]}),e[55]=a,e[56]=c,e[57]=je,e[58]=h):h=e[58];let Ze;e[59]===Symbol.for("react.memo_cache_sentinel")?(Ze=t.jsx(b,{htmlFor:"date",children:"Date"}),e[59]=Ze):Ze=e[59];let he;e[60]!==a?(he=ge=>{ut(ge.target.value),ve.get("/time-tracking/manual",{business_id:a,date:ge.target.value},{preserveState:!0})},e[60]=a,e[61]=he):he=e[61],e[62]!==o||e[63]!==he?(g=t.jsxs("div",{children:[Ze,t.jsx(He,{id:"date",type:"date",value:o,onChange:he,required:!0})]}),e[62]=o,e[63]=he,e[64]=g):g=e[64],e[65]===Symbol.for("react.memo_cache_sentinel")?(p=t.jsx(b,{htmlFor:"employee_id",children:"Employee"}),e[65]=p):p=e[65],y=nt,E=String(l.employee_id),e[66]!==s?(u=ge=>s("employee_id",Number(ge)),e[66]=s,e[67]=u):u=e[67],e[68]===Symbol.for("react.memo_cache_sentinel")?(f=t.jsx(ot,{children:t.jsx(rt,{placeholder:"Select employee"})}),e[68]=f):f=e[68],S=at,A=pt.map(yt),e[19]=a,e[20]=c,e[21]=l.employee_id,e[22]=o,e[23]=r,e[24]=Me,e[25]=je,e[26]=s,e[27]=Je,e[28]=S,e[29]=y,e[30]=C,e[31]=T,e[32]=D,e[33]=E,e[34]=u,e[35]=f,e[36]=p,e[37]=N,e[38]=F,e[39]=h,e[40]=g,e[41]=_,e[42]=k,e[43]=w,e[44]=x,e[45]=I,e[46]=j,e[47]=A}else S=e[28],y=e[29],C=e[30],T=e[31],D=e[32],E=e[33],u=e[34],f=e[35],p=e[36],N=e[37],F=e[38],h=e[39],g=e[40],_=e[41],k=e[42],w=e[43],x=e[44],I=e[45],j=e[46],A=e[47];let B;e[69]!==S||e[70]!==A?(B=t.jsx(S,{children:A}),e[69]=S,e[70]=A,e[71]=B):B=e[71];let L;e[72]!==y||e[73]!==E||e[74]!==u||e[75]!==f||e[76]!==B?(L=t.jsxs(y,{value:E,onValueChange:u,children:[f,B]}),e[72]=y,e[73]=E,e[74]=u,e[75]=f,e[76]=B,e[77]=L):L=e[77];let O;e[78]!==n.employee_id?(O=t.jsx(Se,{message:n.employee_id}),e[78]=n.employee_id,e[79]=O):O=e[79];let R;e[80]!==p||e[81]!==L||e[82]!==O?(R=t.jsxs("div",{children:[p,L,O]}),e[80]=p,e[81]=L,e[82]=O,e[83]=R):R=e[83];let Ie;e[84]===Symbol.for("react.memo_cache_sentinel")?(Ie=t.jsx(b,{htmlFor:"sign_in_time",children:"Sign In Time"}),e[84]=Ie):Ie=e[84];let Z;e[85]!==s?(Z=i=>s("sign_in_time",i.target.value),e[85]=s,e[86]=Z):Z=e[86];let H;e[87]!==l.sign_in_time||e[88]!==Z?(H=t.jsx(He,{id:"sign_in_time",type:"datetime-local",value:l.sign_in_time,onChange:Z,required:!0}),e[87]=l.sign_in_time,e[88]=Z,e[89]=H):H=e[89];let M;e[90]!==n.sign_in_time?(M=t.jsx(Se,{message:n.sign_in_time}),e[90]=n.sign_in_time,e[91]=M):M=e[91];let q;e[92]!==H||e[93]!==M?(q=t.jsxs("div",{children:[Ie,H,M]}),e[92]=H,e[93]=M,e[94]=q):q=e[94];let Ae;e[95]===Symbol.for("react.memo_cache_sentinel")?(Ae=t.jsx(b,{htmlFor:"sign_out_time",children:"Sign Out Time"}),e[95]=Ae):Ae=e[95];let V;e[96]!==s?(V=i=>s("sign_out_time",i.target.value),e[96]=s,e[97]=V):V=e[97];let $;e[98]!==l.sign_out_time||e[99]!==V?($=t.jsx(He,{id:"sign_out_time",type:"datetime-local",value:l.sign_out_time,onChange:V,required:!0}),e[98]=l.sign_out_time,e[99]=V,e[100]=$):$=e[100];let z;e[101]!==n.sign_out_time?(z=t.jsx(Se,{message:n.sign_out_time}),e[101]=n.sign_out_time,e[102]=z):z=e[102];let U;e[103]!==$||e[104]!==z?(U=t.jsxs("div",{children:[Ae,$,z]}),e[103]=$,e[104]=z,e[105]=U):U=e[105];let W;e[106]!==q||e[107]!==U?(W=t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[q,U]}),e[106]=q,e[107]=U,e[108]=W):W=e[108];let Be;e[109]===Symbol.for("react.memo_cache_sentinel")?(Be=t.jsx(b,{htmlFor:"bonus_amount",children:"Bonus Amount (ZAR)"}),e[109]=Be):Be=e[109];let G;e[110]!==s?(G=i=>s("bonus_amount",i.target.value),e[110]=s,e[111]=G):G=e[111];let J;e[112]!==l.bonus_amount||e[113]!==G?(J=t.jsx(He,{id:"bonus_amount",type:"number",step:"0.01",min:"0",value:l.bonus_amount,onChange:G}),e[112]=l.bonus_amount,e[113]=G,e[114]=J):J=e[114];let K;e[115]!==n.bonus_amount?(K=t.jsx(Se,{message:n.bonus_amount}),e[115]=n.bonus_amount,e[116]=K):K=e[116];let P;e[117]!==J||e[118]!==K?(P=t.jsxs("div",{children:[Be,J,K]}),e[117]=J,e[118]=K,e[119]=P):P=e[119];let Le;e[120]===Symbol.for("react.memo_cache_sentinel")?(Le=t.jsx(b,{htmlFor:"notes",children:"Notes"}),e[120]=Le):Le=e[120];let Q;e[121]!==s?(Q=i=>s("notes",i.target.value),e[121]=s,e[122]=Q):Q=e[122];let X;e[123]!==l.notes||e[124]!==Q?(X=t.jsx(bt,{id:"notes",value:l.notes,onChange:Q,rows:3}),e[123]=l.notes,e[124]=Q,e[125]=X):X=e[125];let Y;e[126]!==n.notes?(Y=t.jsx(Se,{message:n.notes}),e[126]=n.notes,e[127]=Y):Y=e[127];let ee;e[128]!==X||e[129]!==Y?(ee=t.jsxs("div",{children:[Le,X,Y]}),e[128]=X,e[129]=Y,e[130]=ee):ee=e[130];const Xe=r?"Update Entry":"Create Entry";let te;e[131]!==v||e[132]!==Xe?(te=t.jsx(_e,{type:"submit",disabled:v,children:Xe}),e[131]=v,e[132]=Xe,e[133]=te):te=e[133];let ie;e[134]!==r||e[135]!==Pe?(ie=r&&t.jsx(_e,{type:"button",variant:"outline",onClick:Pe,children:"Cancel"}),e[134]=r,e[135]=Pe,e[136]=ie):ie=e[136];let se;e[137]!==r||e[138]!==m?(se=!r&&t.jsx(_e,{type:"button",variant:"outline",onClick:()=>m(),children:"Clear"}),e[137]=r,e[138]=m,e[139]=se):se=e[139];let le;e[140]!==te||e[141]!==ie||e[142]!==se?(le=t.jsxs("div",{className:"flex gap-2",children:[te,ie,se]}),e[140]=te,e[141]=ie,e[142]=se,e[143]=le):le=e[143];let ne;e[144]!==N||e[145]!==F||e[146]!==h||e[147]!==g||e[148]!==R||e[149]!==W||e[150]!==P||e[151]!==ee||e[152]!==le?(ne=t.jsxs("form",{onSubmit:N,className:F,children:[h,g,R,W,P,ee,le]}),e[144]=N,e[145]=F,e[146]=h,e[147]=g,e[148]=R,e[149]=W,e[150]=P,e[151]=ee,e[152]=le,e[153]=ne):ne=e[153];let oe;e[154]!==C||e[155]!==ne?(oe=t.jsx(C,{children:ne}),e[154]=C,e[155]=ne,e[156]=oe):oe=e[156];let re;e[157]!==T||e[158]!==_||e[159]!==oe?(re=t.jsxs(T,{children:[_,oe]}),e[157]=T,e[158]=_,e[159]=oe,e[160]=re):re=e[160];let ae;e[161]!==o?(ae=new Date(o).toLocaleDateString(),e[161]=o,e[162]=ae):ae=e[162];let me;e[163]!==ae?(me=t.jsx(st,{children:t.jsxs(lt,{children:["Entries for ",ae]})}),e[163]=ae,e[164]=me):me=e[164];let de;e[165]!==xe||e[166]!==Ke?(de=t.jsx(tt,{children:xe&&xe.length>0?t.jsx("div",{className:"space-y-3",children:xe.map(i=>t.jsx("div",{className:"p-3 border rounded-lg",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-medium",children:i.employee?.name}),t.jsxs("div",{className:"text-sm text-muted-foreground",children:[new Date(i.sign_in_time).toLocaleTimeString("en-ZA",{hour:"2-digit",minute:"2-digit"})," - ",new Date(i.sign_out_time).toLocaleTimeString("en-ZA",{hour:"2-digit",minute:"2-digit"})]}),t.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Regular: ",parseFloat(i.regular_hours).toFixed(2),"h | Overtime: ",parseFloat(i.overtime_hours).toFixed(2),"h | Weekend: ",parseFloat(i.weekend_hours).toFixed(2),"h | Holiday: ",parseFloat(i.holiday_hours).toFixed(2),"h"]}),i.bonus_amount>0&&t.jsxs("div",{className:"text-xs text-green-600 mt-1",children:["Bonus: ZAR ",parseFloat(i.bonus_amount).toLocaleString("en-ZA",{minimumFractionDigits:2})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(_e,{variant:"outline",size:"sm",onClick:()=>Ke(i),children:"Edit"}),t.jsx(_e,{variant:"destructive",size:"sm",onClick:()=>ft(i.id),children:"Delete"})]})]})},i.id))}):t.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No entries for this date."})}),e[165]=xe,e[166]=Ke,e[167]=de):de=e[167];let ce;e[168]!==me||e[169]!==de?(ce=t.jsxs(it,{children:[me,de]}),e[168]=me,e[169]=de,e[170]=ce):ce=e[170];let ue;e[171]!==k||e[172]!==re||e[173]!==ce?(ue=t.jsxs("div",{className:k,children:[re,ce]}),e[171]=k,e[172]=re,e[173]=ce,e[174]=ue):ue=e[174];let fe;e[175]!==w||e[176]!==x||e[177]!==ue?(fe=t.jsxs("div",{className:w,children:[x,ue]}),e[175]=w,e[176]=x,e[177]=ue,e[178]=fe):fe=e[178];let pe;e[179]!==Qe||e[180]!==$e||e[181]!==v?(pe=t.jsx(jt,{open:$e,onOpenChange:ze,onConfirm:Qe,title:"Are you sure you want to delete this time entry?",description:"This action cannot be undone. The time entry will be permanently deleted.",confirmText:"Delete",variant:"destructive",processing:v}),e[179]=Qe,e[180]=$e,e[181]=v,e[182]=pe):pe=e[182];let Oe;return e[183]!==D||e[184]!==I||e[185]!==j||e[186]!==fe||e[187]!==pe?(Oe=t.jsxs(D,{breadcrumbs:I,children:[j,fe,pe]}),e[183]=D,e[184]=I,e[185]=j,e[186]=fe,e[187]=pe,e[188]=Oe):Oe=e[188],Oe}function yt(d){return t.jsx(mt,{value:String(d.id),children:d.name},d.id)}function Ct(d){return t.jsx(mt,{value:String(d.id),children:d.name},d.id)}export{gi as default};
