import{c as O,j as t,r as V,u as W,H as X,a as J}from"./app-CMeUrf50.js";import{C as Y}from"./conversation-list-CIKMA10l.js";import{c as z,B as K}from"./x-CZYrHTRQ.js";import{U as Z}from"./user-BG9FzzrR.js";import{B as ee,A as te}from"./app-layout-nNCjU6Ur.js";import{I as se}from"./input-CJwM-rHG.js";import{A as le}from"./arrow-left-CzAuMvEG.js";import{L as ie}from"./loader-circle-PC8s1h8o.js";import{S as re}from"./send-B1gIsrQP.js";/* empty css            */import"./message-square-Bem12P6R.js";import"./trash-2-BFbOVXKc.js";import"./plus-BJ4kQvgy.js";import"./app-sidebar-header-CztvwVfL.js";import"./appearance-dropdown-CIplfUHR.js";import"./index-CASGKN-W.js";import"./index-Cfp_L9w6.js";import"./log-out-C9Jhd31W.js";import"./index-wVJuMR_H.js";import"./badge-CpbHZjhE.js";import"./proxy-B-sAeQ2V.js";import"./circle-check-Bv3Kk_K_.js";import"./circle-x-qFpOssZO.js";import"./circle-alert-tomiUAeh.js";import"./dollar-sign-3i0DvXHD.js";import"./file-text-DBGV6D9F.js";import"./users-BjCKGoHP.js";import"./user-check-B_uMkO9r.js";import"./clock-C3FzQv_v.js";import"./shield-CzJFJRG5.js";function oe(f){const e=O.c(28),{role:i,content:o,createdAt:g}=f,r=i==="user",b=r?"flex-row-reverse":"flex-row";let p;e[0]!==b?(p=z("flex gap-3",b),e[0]=b,e[1]=p):p=e[1];const j=r?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground";let l;e[2]!==j?(l=z("flex h-8 w-8 shrink-0 items-center justify-center rounded-full",j),e[2]=j,e[3]=l):l=e[3];let d;e[4]!==r?(d=r?t.jsx(Z,{className:"h-4 w-4"}):t.jsx(ee,{className:"h-4 w-4"}),e[4]=r,e[5]=d):d=e[5];let x;e[6]!==l||e[7]!==d?(x=t.jsx("div",{className:l,children:d}),e[6]=l,e[7]=d,e[8]=x):x=e[8];const s=r?"items-end":"items-start";let u;e[9]!==s?(u=z("flex max-w-[80%] flex-col gap-1",s),e[9]=s,e[10]=u):u=e[10];const v=r?"bg-primary text-primary-foreground":"bg-muted text-foreground";let N;e[11]!==v?(N=z("rounded-2xl px-4 py-2",v),e[11]=v,e[12]=N):N=e[12];let a;e[13]!==o?(a=t.jsx("p",{className:"whitespace-pre-wrap text-sm",children:o}),e[13]=o,e[14]=a):a=e[14];let n;e[15]!==N||e[16]!==a?(n=t.jsx("div",{className:N,children:a}),e[15]=N,e[16]=a,e[17]=n):n=e[17];let m;e[18]!==g?(m=g&&t.jsx("span",{className:"text-muted-foreground text-xs",children:new Date(g).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),e[18]=g,e[19]=m):m=e[19];let c;e[20]!==n||e[21]!==m||e[22]!==u?(c=t.jsxs("div",{className:u,children:[n,m]}),e[20]=n,e[21]=m,e[22]=u,e[23]=c):c=e[23];let h;return e[24]!==c||e[25]!==p||e[26]!==x?(h=t.jsxs("div",{className:p,children:[x,c]}),e[24]=c,e[25]=p,e[26]=x,e[27]=h):h=e[27],h}function ze(f){const e=O.c(60),{conversation:i,messages:o,conversations:g,business:r}=f,b=V.useRef(null),p=V.useRef(null);let j;e[0]===Symbol.for("react.memo_cache_sentinel")?(j={message:""},e[0]=j):j=e[0];const{data:l,setData:d,post:x,processing:s,reset:u}=W(j);let v;e[1]===Symbol.for("react.memo_cache_sentinel")?(v=()=>{b.current?.scrollIntoView({behavior:"smooth"})},e[1]=v):v=e[1];const N=v;let a;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{N()},e[2]=a):a=e[2];let n;e[3]!==o?(n=[o],e[3]=o,e[4]=n):n=e[4],V.useEffect(a,n);let m,c;e[5]!==s?(m=()=>{s||p.current?.focus()},c=[s],e[5]=s,e[6]=m,e[7]=c):(m=e[6],c=e[7]),V.useEffect(m,c);let h;e[8]!==i.id||e[9]!==l.message||e[10]!==x||e[11]!==s||e[12]!==u?(h=G=>{G.preventDefault(),!(!l.message.trim()||s)&&x(`/chat/${i.id}/message`,{preserveScroll:!0,onSuccess:()=>{u("message")}})},e[8]=i.id,e[9]=l.message,e[10]=x,e[11]=s,e[12]=u,e[13]=h):h=e[13];const F=h,P=ce,Q=me,M=`${i.title} - AI Assistant`;let w;e[14]!==M?(w=t.jsx(X,{title:M}),e[14]=M,e[15]=w):w=e[15];let y;e[16]!==i.id||e[17]!==g?(y=t.jsx("div",{className:"hidden w-72 border-r lg:block",children:t.jsx(Y,{conversations:g,activeId:i.id,onNewConversation:P,onDelete:Q})}),e[16]=i.id,e[17]=g,e[18]=y):y=e[18];let U;e[19]===Symbol.for("react.memo_cache_sentinel")?(U=t.jsx(K,{variant:"ghost",size:"icon",className:"lg:hidden",onClick:ne,children:t.jsx(le,{className:"h-4 w-4"})}),e[19]=U):U=e[19];let _;e[20]!==i.title?(_=t.jsx("h1",{className:"truncate font-semibold",children:i.title}),e[20]=i.title,e[21]=_):_=e[21];let S;e[22]!==r?(S=r&&t.jsx("p",{className:"text-muted-foreground text-xs",children:r.name}),e[22]=r,e[23]=S):S=e[23];let A;e[24]!==_||e[25]!==S?(A=t.jsxs("div",{className:"flex items-center gap-4 border-b px-4 py-3",children:[U,t.jsxs("div",{className:"min-w-0 flex-1",children:[_,S]})]}),e[24]=_,e[25]=S,e[26]=A):A=e[26];let C;e[27]!==o?(C=t.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:o.length===0?t.jsx("div",{className:"text-muted-foreground flex h-full items-center justify-center text-center",children:t.jsxs("div",{children:[t.jsx("p",{className:"text-lg font-medium",children:"Start the conversation"}),t.jsx("p",{className:"text-sm",children:"Ask a question about your business data"})]})}):t.jsxs("div",{className:"mx-auto max-w-3xl",children:[o.map(ae),t.jsx("div",{ref:b})]})}),e[27]=o,e[28]=C):C=e[28];let k;e[29]!==d?(k=G=>d("message",G.target.value),e[29]=d,e[30]=k):k=e[30];let B;e[31]!==l.message||e[32]!==s||e[33]!==k?(B=t.jsx(se,{ref:p,value:l.message,onChange:k,placeholder:"Ask a question about your business...",disabled:s,className:"flex-1"}),e[31]=l.message,e[32]=s,e[33]=k,e[34]=B):B=e[34];let E;e[35]!==l.message||e[36]!==s?(E=s||!l.message.trim(),e[35]=l.message,e[36]=s,e[37]=E):E=e[37];let I;e[38]!==s?(I=s?t.jsx(ie,{className:"h-4 w-4 animate-spin"}):t.jsx(re,{className:"h-4 w-4"}),e[38]=s,e[39]=I):I=e[39];let L;e[40]!==E||e[41]!==I?(L=t.jsx(K,{type:"submit",disabled:E,children:I}),e[40]=E,e[41]=I,e[42]=L):L=e[42];let R;e[43]!==F||e[44]!==B||e[45]!==L?(R=t.jsxs("form",{onSubmit:F,className:"mx-auto flex max-w-3xl gap-2",children:[B,L]}),e[43]=F,e[44]=B,e[45]=L,e[46]=R):R=e[46];let q;e[47]===Symbol.for("react.memo_cache_sentinel")?(q=t.jsx("p",{className:"text-muted-foreground mx-auto mt-2 max-w-3xl text-center text-xs",children:"AI can make mistakes. Verify important information."}),e[47]=q):q=e[47];let D;e[48]!==R?(D=t.jsxs("div",{className:"border-t p-4",children:[R,q]}),e[48]=R,e[49]=D):D=e[49];let $;e[50]!==A||e[51]!==C||e[52]!==D?($=t.jsxs("div",{className:"flex flex-1 flex-col",children:[A,C,D]}),e[50]=A,e[51]=C,e[52]=D,e[53]=$):$=e[53];let T;e[54]!==y||e[55]!==$?(T=t.jsxs("div",{className:"flex h-[calc(100vh-8rem)]",children:[y,$]}),e[54]=y,e[55]=$,e[56]=T):T=e[56];let H;return e[57]!==T||e[58]!==w?(H=t.jsxs(te,{children:[w,T]}),e[57]=T,e[58]=w,e[59]=H):H=e[59],H}function ae(f){return t.jsx("div",{style:{paddingTop:"24px",paddingBottom:"24px"},children:t.jsx(oe,{role:f.role,content:f.content,createdAt:f.created_at})},f.id)}function ne(){return J.visit("/chat")}function me(f){confirm("Are you sure you want to delete this conversation?")&&J.delete(`/chat/${f}`)}function ce(){J.post("/chat")}export{ze as default};
