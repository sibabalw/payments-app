import{c as v,j as e,L as d,H as w}from"./app-BRoNAUIM.js";import{B as C}from"./badge-ZsznMIyW.js";import{a as _,B as x}from"./x-pZV5lkp5.js";import{C as u,a as b,b as B,c as h}from"./card-Bag7gWUQ.js";import{A as k,R as A}from"./app-layout-Bn-75oUf.js";import{W as E}from"./app-sidebar-header-BbzcXdQi.js";import{U as R}from"./users-CEYKQlp0.js";import{C as S,B as U}from"./appearance-dropdown-BEtN_wNg.js";import{U as L}from"./user-check-DiuzZ-7a.js";import{M as P}from"./mail-CoYr1G0V.js";import{P as I}from"./pencil-B5OsfNLG.js";import{C as z}from"./circle-x-C4YAnoMU.js";import{C as q}from"./circle-alert-COfzFcbZ.js";import{C as H}from"./circle-check-DIHwzO_b.js";/* empty css            */import"./index-Cfp_L9w6.js";import"./proxy-CQkt3OrQ.js";import"./loader-circle-CafrvZjs.js";import"./plus-C6lF1Clu.js";import"./dollar-sign-CDLUu5fH.js";import"./message-square-CEp_sz_O.js";import"./file-text-FWLsz4T5.js";import"./clock-DWicTrer.js";import"./shield-Kl3V0fgW.js";import"./index-CBJSSLbQ.js";import"./log-out-MC42nTzo.js";import"./index-BohsM0ZD.js";const M=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],T=_("Phone",M),j=r=>{if(!r)return"?";const t=r.trim().split(/\s+/);return t.length===1?r.substring(0,2).toUpperCase():(t[0][0]+t[1][0]).toUpperCase()},Z=[{title:"Businesses",href:"/businesses"}];function ge(r){const t=v.c(5),{businesses:a}=r,o=F,N=$,g=D;let l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=e.jsx(w,{title:"Businesses"}),t[0]=l):l=t[0];let n;t[1]===Symbol.for("react.memo_cache_sentinel")?(n=e.jsx("h1",{className:"text-2xl font-bold",children:"Businesses"}),t[1]=n):n=t[1];let c;t[2]===Symbol.for("react.memo_cache_sentinel")?(c=e.jsxs("div",{className:"flex items-center justify-between",children:[n,e.jsx(d,{href:"/businesses/create",children:e.jsx(x,{children:"Create New Business"})})]}),t[2]=c):c=t[2];let i;return t[3]!==a?(i=e.jsxs(k,{breadcrumbs:Z,children:[l,e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[c,a&&a.length>0?e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:a.map(s=>e.jsxs(u,{className:s.status!=="active"?"opacity-75":"",children:[e.jsxs(b,{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.logo&&s.logo.trim()!==""?e.jsx("div",{className:"flex aspect-square size-12 items-center justify-center rounded-md overflow-hidden flex-shrink-0 border border-border bg-muted",children:e.jsx("img",{src:s.logo,alt:s.name,className:"w-full h-full object-cover",onError:y=>{const p=y.target,f=p.parentElement;if(f){p.style.display="none";const m=document.createElement("span");m.className="text-sm font-semibold text-foreground",m.textContent=j(s.name),f.appendChild(m)}}})}):e.jsx("div",{className:"flex aspect-square size-12 items-center justify-center rounded-md bg-primary text-primary-foreground flex-shrink-0",children:e.jsx("span",{className:"text-sm font-semibold",children:j(s.name)})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx(B,{className:"flex-1 min-w-0 truncate",title:s.name,children:s.name}),o(s.status||"active")]})})]}),s.status_reason&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Reason: ",s.status_reason]})]}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-primary/5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"text-sm font-medium",children:"Escrow Balance"})]}),e.jsx("span",{className:"text-sm font-semibold text-primary",children:N(s.escrow_balance||0)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(R,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Employees:"}),e.jsx("span",{className:"font-semibold",children:s.employees_count||0})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(S,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Payments:"}),e.jsx("span",{className:"font-semibold",children:s.payment_schedules_count||0})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(A,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Payroll:"}),e.jsx("span",{className:"font-semibold",children:s.payroll_schedules_count||0})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(L,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Recipients:"}),e.jsx("span",{className:"font-semibold",children:s.recipients_count||0})]})]}),s.business_type&&e.jsxs("div",{className:"flex items-center gap-2 text-sm pt-2 border-t",children:[e.jsx(U,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Type:"}),e.jsx("span",{className:"font-medium",children:g(s.business_type)})]}),e.jsxs("div",{className:"space-y-1.5 pt-2 border-t",children:[s.email&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(P,{className:"h-3.5 w-3.5 flex-shrink-0"}),e.jsx("span",{className:"truncate",title:s.email,children:s.email})]}),s.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(T,{className:"h-3.5 w-3.5 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:s.phone})]})]}),s.created_at&&e.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t",children:["Created: ",new Date(s.created_at).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric"})]}),e.jsx("div",{className:"pt-2 border-t",children:e.jsx(d,{href:`/businesses/${s.id}/edit`,children:e.jsxs(x,{variant:"outline",size:"sm",className:"w-full",children:[e.jsx(I,{className:"mr-2 h-4 w-4"}),"Edit Business"]})})}),s.status!=="active"&&e.jsx("div",{className:"pt-2 border-t",children:e.jsxs("p",{className:"text-sm text-muted-foreground text-center py-2",children:["Business is ",s.status,". Cannot switch."]})})]})]},s.id))}):e.jsx(u,{children:e.jsxs(h,{className:"py-10 text-center",children:[e.jsx("p",{className:"text-muted-foreground",children:"No businesses found."}),e.jsx(d,{href:"/businesses/create",className:"mt-4 inline-block",children:e.jsx(x,{children:"Create your first business"})})]})})]})]}),t[3]=a,t[4]=i):i=t[4],i}function D(r){return r?r.split("_").map(W).join(" "):"N/A"}function W(r){return r.charAt(0).toUpperCase()+r.slice(1)}function $(r){return new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(r)}function F(r){const t={active:{label:"Active",variant:"default",icon:H,className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"},suspended:{label:"Suspended",variant:"outline",icon:q,className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"},banned:{label:"Banned",variant:"destructive",icon:z,className:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}},a=t[r]||t.active,o=a.icon;return e.jsxs(C,{className:a.className,children:[e.jsx(o,{className:"mr-1 h-3 w-3"}),a.label]})}export{ge as default};
