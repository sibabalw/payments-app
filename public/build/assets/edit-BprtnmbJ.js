import{j as e,H as x,L as j,r as m,u as D}from"./app-zh9bNfQA.js";import{I as n}from"./input-error-2-LekhPz.js";import{B as c}from"./createLucideIcon-BZjvJ1Zn.js";import{C as h,c as f,a as T,b as k}from"./card-BdZbHl6r.js";import{I as g}from"./input-DiGHHSH4.js";import{L as d}from"./label-Bimm6ppi.js";import{S as I,a as L,b as A,c as M,d as y}from"./select-Bf_U1fyU.js";import{T as H}from"./textarea-vl710I3f.js";import{C as v}from"./calendar-EuaiWc9u.js";import{A as N,P as b,a as _,b as P}from"./app-layout-Du2zqNOn.js";import{C}from"./calendar-B3bfc_Ei.js";import{f as p}from"./format-BS8Ay9AX.js";/* empty css            */import"./index-BJwOBxES.js";import"./index-Bvd5418W.js";import"./chevron-down-C7_CWyHS.js";import"./x-BIBjS2Dr.js";import"./index-CaEI0-fE.js";import"./index-CvHCqEC4.js";import"./chevron-right-O9ILxyvV.js";import"./check-BlMOmQr2.js";import"./chevron-up-DTZu2ggr.js";import"./chevron-left-PCMpYS35.js";import"./app-sidebar-header-CRr_1DPO.js";import"./index-NEtNT4ix.js";import"./appearance-dropdown-Bb28oTQN.js";import"./index-BH508O9j.js";import"./index-CcLcdVZM.js";import"./log-out-D2fYovF8.js";import"./badge-VllgXE3C.js";import"./proxy-CflicfAZ.js";import"./circle-check-B9uKMuXu.js";import"./loader-circle-DmMzF6DP.js";import"./circle-x-BKTi4obl.js";import"./circle-alert-PjDKICDi.js";import"./plus-DPynhUc-.js";import"./credit-card-DZtV9Y3R.js";import"./dollar-sign-DV-oRcFJ.js";import"./message-square-CrR61UD7.js";import"./file-text-DIkPgk9X.js";import"./users-DRMz8fhj.js";import"./user-check-D6rfO7ti.js";import"./clock-CEsoW84B.js";import"./shield-DgxHpXTb.js";const S=[{title:"Payroll",href:"/payroll"},{title:"Bonuses",href:"/payroll/bonuses"},{title:"Edit Bonus",href:"#"}];function De({payment:s,businesses:U,employees:q}){if(!s)return e.jsxs(N,{breadcrumbs:S,children:[e.jsx(x,{title:"Edit Bonus"}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:e.jsx(h,{children:e.jsxs(f,{className:"py-10 text-center",children:[e.jsx("p",{className:"text-muted-foreground",children:"Bonus not found."}),e.jsx(j,{href:"/payroll/bonuses",className:"mt-4 inline-block",children:e.jsx(c,{variant:"outline",children:"Back to Bonuses"})})]})})})]});const[i,B]=m.useState(s.period_start?new Date(s.period_start):void 0),[a,w]=m.useState(s.period_end?new Date(s.period_end):void 0),{data:r,setData:o,put:E,processing:u,errors:l}=D({business_id:s.business_id,employee_id:s.employee_id||null,name:s.name||"",type:s.type||"fixed",amount:s.amount||"",adjustment_type:s.adjustment_type||"addition",period_start:s.period_start||"",period_end:s.period_end||"",is_active:s.is_active??!0,description:s.description||""});m.useEffect(()=>{i&&o("period_start",p(i,"yyyy-MM-dd"))},[i]),m.useEffect(()=>{a&&o("period_end",p(a,"yyyy-MM-dd"))},[a]);const F=t=>{t.preventDefault(),E(`/payroll-payments/${s.id}`)};return e.jsxs(N,{breadcrumbs:S,children:[e.jsx(x,{title:"Edit Payment"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Edit Payment"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Update payment details"})]})}),e.jsxs(h,{children:[e.jsx(T,{children:e.jsx(k,{children:"Bonus Details"})}),e.jsx(f,{children:e.jsxs("form",{onSubmit:F,className:"space-y-6",children:[s.employee&&e.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Bonus for:"}),e.jsx("p",{className:"font-medium",children:s.employee.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"name",children:"Bonus Type"}),e.jsx(g,{id:"name",value:r.name,onChange:t=>o("name",t.target.value),placeholder:"e.g., Performance Bonus",required:!0}),e.jsx(n,{message:l.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"type",children:"Amount Type"}),e.jsxs(I,{value:r.type,onValueChange:t=>o("type",t),children:[e.jsx(L,{id:"type",children:e.jsx(A,{})}),e.jsxs(M,{children:[e.jsx(y,{value:"fixed",children:"Fixed amount"}),e.jsx(y,{value:"percentage",children:"Percentage of salary"})]})]}),e.jsx(n,{message:l.type})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:"amount",children:[r.type==="percentage"?"Percentage":"Amount",r.type==="percentage"&&" (0-100)"]}),e.jsx(g,{id:"amount",type:"number",step:(r.type==="percentage","0.01"),min:"0",max:r.type==="percentage"?"100":void 0,value:r.amount,onChange:t=>o("amount",t.target.value),required:!0}),e.jsx(n,{message:l.amount})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"From Date"}),e.jsxs(b,{children:[e.jsx(_,{asChild:!0,children:e.jsxs(c,{type:"button",variant:"outline",className:"w-full justify-start text-left font-normal",children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),i?p(i,"PPP"):"Pick a date"]})}),e.jsx(P,{className:"w-auto p-0",align:"start",children:e.jsx(v,{mode:"single",selected:i,onSelect:B,initialFocus:!0})})]}),e.jsx(n,{message:l.period_start})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"To Date"}),e.jsxs(b,{children:[e.jsx(_,{asChild:!0,children:e.jsxs(c,{type:"button",variant:"outline",className:"w-full justify-start text-left font-normal",children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),a?p(a,"PPP"):"Pick a date"]})}),e.jsx(P,{className:"w-auto p-0",align:"start",children:e.jsx(v,{mode:"single",selected:a,onSelect:w,initialFocus:!0})})]}),e.jsx(n,{message:l.period_end})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(H,{id:"description",value:r.description,onChange:t=>o("description",t.target.value),rows:3}),e.jsx(n,{message:l.description})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{href:"/payroll/bonuses",children:e.jsx(c,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(c,{type:"submit",disabled:u,children:u?"Updating...":"Update Bonus"})]})]})})]})]})]})}export{De as default};
