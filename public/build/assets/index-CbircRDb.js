import{c as U,r as F,j as t,a as k,H as W,L as X}from"./app-DWDC-BVo.js";import{B as N}from"./createLucideIcon-CDiNb0OM.js";import{C as M,a as Y,b as ee,c as R}from"./card-ErUD2DV9.js";import{S as te,a as se,b as ie,c as ne,d as re}from"./select-DUIPMlO7.js";import{A as le}from"./app-layout-Csx9VZt2.js";import{L as V}from"./log-in-B-afdWeI.js";import{L as D}from"./log-out-CNw_jzHT.js";/* empty css            */import"./index-B-id3RBu.js";import"./chevron-down-BehZftUK.js";import"./x-Cr_BKX42.js";import"./index-apnaeyBA.js";import"./index-D976Ylxv.js";import"./chevron-right-TaOApODu.js";import"./check-CooXHJVP.js";import"./chevron-up-CvrNtOh9.js";import"./app-sidebar-header-r-OiXY8i.js";import"./index-BspEiaub.js";import"./appearance-dropdown-Boh93vvE.js";import"./index-BCOzoWRm.js";import"./index-l1Yz4tBP.js";import"./index-CcLcdVZM.js";import"./badge-BnVI9wD_.js";import"./proxy-8KyYWbtH.js";import"./circle-check-DngFYpsd.js";import"./loader-circle-_uqlEWjJ.js";import"./circle-x-DCRTT9my.js";import"./circle-alert-C7E7uvB-.js";import"./plus-BwK_Jy3D.js";import"./credit-card-DHCU20zw.js";import"./dollar-sign-DGtOSjhC.js";import"./message-square-DRz1er9_.js";import"./file-text-xQShroE0.js";import"./users-CtagEMWm.js";import"./user-check-Dt0Yb2Ws.js";import"./clock-D4ogtgGS.js";import"./shield-B0GD2scd.js";const ae=[{title:"Time Tracking",href:"/time-tracking"}];function Xe(i){const e=U.c(52),{employees:r,businesses:l,selectedBusinessId:Z,signedInCount:b,signedOutCount:v}=i,[u,q]=F.useState(Z||l[0]?.id||""),[n,O]=F.useState("all");let C;e[0]===Symbol.for("react.memo_cache_sentinel")?(C=d=>{q(d),k.get("/time-tracking",{business_id:d},{preserveState:!0})},e[0]=C):C=e[0];const G=C,J=xe,K=de;let x,f,a,o,c,g,h,m;if(e[1]!==u||e[2]!==l||e[3]!==r||e[4]!==n||e[5]!==b||e[6]!==v){let d;e[15]!==n?(d=s=>n==="signed_in"?s.is_signed_in:n==="signed_out"?!s.is_signed_in:!0,e[15]=n,e[16]=d):d=e[16];const $=r.filter(d),P=me,Q=ce;x=le,h=ae,e[17]===Symbol.for("react.memo_cache_sentinel")?(m=t.jsx(W,{title:"Time Tracking"}),e[17]=m):m=e[17],f="flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4";let I;e[18]===Symbol.for("react.memo_cache_sentinel")?(I=t.jsx("h1",{className:"text-2xl font-bold",children:"Time Tracking"}),e[18]=I):I=e[18];const z=`/time-tracking/manual?business_id=${u}`;let w;e[19]===Symbol.for("react.memo_cache_sentinel")?(w=t.jsx(N,{variant:"outline",children:"Manual Entry"}),e[19]=w):w=e[19],e[20]!==z?(a=t.jsxs("div",{className:"flex items-center justify-between",children:[I,t.jsx("div",{className:"flex gap-2",children:t.jsx(X,{href:z,children:w})})]}),e[20]=z,e[21]=a):a=e[21],e[22]!==u||e[23]!==l?(o=l&&l.length>0&&t.jsxs("div",{className:"max-w-xs",children:[t.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Business"}),t.jsxs(te,{value:String(u),onValueChange:G,children:[t.jsx(se,{children:t.jsx(ie,{})}),t.jsx(ne,{children:l.map(oe)})]})]}),e[22]=u,e[23]=l,e[24]=o):o=e[24];const E=n==="all"?"default":"outline";let y;e[25]===Symbol.for("react.memo_cache_sentinel")?(y=()=>O("all"),e[25]=y):y=e[25];let _;e[26]!==r.length||e[27]!==E?(_=t.jsxs(N,{variant:E,size:"sm",onClick:y,children:["All (",r.length,")"]}),e[26]=r.length,e[27]=E,e[28]=_):_=e[28];const H=n==="signed_in"?"default":"outline";let L;e[29]===Symbol.for("react.memo_cache_sentinel")?(L=()=>O("signed_in"),e[29]=L):L=e[29];let j;e[30]!==b||e[31]!==H?(j=t.jsxs(N,{variant:H,size:"sm",onClick:L,children:["Signed In (",b,")"]}),e[30]=b,e[31]=H,e[32]=j):j=e[32];const A=n==="signed_out"?"default":"outline";let B;e[33]===Symbol.for("react.memo_cache_sentinel")?(B=()=>O("signed_out"),e[33]=B):B=e[33];let S;e[34]!==v||e[35]!==A?(S=t.jsxs(N,{variant:A,size:"sm",onClick:B,children:["Signed Out (",v,")"]}),e[34]=v,e[35]=A,e[36]=S):S=e[36],e[37]!==_||e[38]!==j||e[39]!==S?(c=t.jsxs("div",{className:"flex gap-2",children:[_,j,S]}),e[37]=_,e[38]=j,e[39]=S,e[40]=c):c=e[40],g=$&&$.length>0?t.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:$.map(s=>t.jsxs(M,{className:s.is_signed_in?"border-green-500":"",children:[t.jsxs(Y,{className:"pb-3",children:[t.jsx(ee,{className:"text-lg",children:s.name}),s.email&&t.jsx("p",{className:"text-xs text-muted-foreground",children:s.email})]}),t.jsxs(R,{className:"space-y-3",children:[t.jsx("div",{className:"flex items-center gap-2",children:s.is_signed_in?t.jsxs(t.Fragment,{children:[t.jsx(V,{className:"h-4 w-4 text-green-600"}),t.jsx("span",{className:"text-sm font-medium text-green-600",children:"Signed In"})]}):t.jsxs(t.Fragment,{children:[t.jsx(D,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-sm text-muted-foreground",children:"Signed Out"})]})}),s.is_signed_in&&s.sign_in_time&&t.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.jsxs("div",{children:["In: ",P(s.sign_in_time)]}),t.jsxs("div",{children:["Hours: ",Q(s.today_hours)]})]}),t.jsx("div",{className:"pt-2",children:s.is_signed_in?t.jsxs(N,{onClick:()=>K(s.id),variant:"destructive",className:"w-full",size:"sm",children:[t.jsx(D,{className:"mr-2 h-4 w-4"}),"Sign Out"]}):t.jsxs(N,{onClick:()=>J(s.id),className:"w-full",size:"sm",children:[t.jsx(V,{className:"mr-2 h-4 w-4"}),"Sign In"]})})]})]},s.id))}):t.jsx(M,{children:t.jsx(R,{className:"py-10 text-center",children:t.jsx("p",{className:"text-muted-foreground",children:"No employees found."})})}),e[1]=u,e[2]=l,e[3]=r,e[4]=n,e[5]=b,e[6]=v,e[7]=x,e[8]=f,e[9]=a,e[10]=o,e[11]=c,e[12]=g,e[13]=h,e[14]=m}else x=e[7],f=e[8],a=e[9],o=e[10],c=e[11],g=e[12],h=e[13],m=e[14];let p;e[41]!==f||e[42]!==a||e[43]!==o||e[44]!==c||e[45]!==g?(p=t.jsxs("div",{className:f,children:[a,o,c,g]}),e[41]=f,e[42]=a,e[43]=o,e[44]=c,e[45]=g,e[46]=p):p=e[46];let T;return e[47]!==x||e[48]!==h||e[49]!==m||e[50]!==p?(T=t.jsxs(x,{breadcrumbs:h,children:[m,p]}),e[47]=x,e[48]=h,e[49]=m,e[50]=p,e[51]=T):T=e[51],T}function oe(i){return t.jsx(re,{value:String(i.id),children:i.name},i.id)}function ce(i){const e=Math.floor(i),r=Math.floor((i-e)*60);return`${e}h ${r}m`}function me(i){return i?new Date(i).toLocaleTimeString("en-ZA",{hour:"2-digit",minute:"2-digit"}):""}function de(i){k.post(`/time-tracking/${i}/sign-out`,{},{preserveScroll:!0,onSuccess:ue})}function ue(){k.reload({only:["employees"]})}function xe(i){k.post(`/time-tracking/${i}/sign-in`,{},{preserveScroll:!0,onSuccess:fe})}function fe(){k.reload({only:["employees"]})}export{Xe as default};
