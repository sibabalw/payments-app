import{c as U,r as S,u as O,j as t,H,L as q}from"./app-zh9bNfQA.js";import{a as L,B as D}from"./createLucideIcon-BZjvJ1Zn.js";import{C as R,c as T,a as z,b as I,d as K}from"./card-BdZbHl6r.js";import{B as M}from"./badge-VllgXE3C.js";import{A as V}from"./admin-layout-BWrldFRv.js";import{C as W}from"./confirmation-dialog-DD8tonQt.js";import{C as Y}from"./chevron-left-PCMpYS35.js";import{C as G}from"./circle-alert-PjDKICDi.js";import{S as J}from"./app-sidebar-header-CRr_1DPO.js";/* empty css            */import"./appearance-dropdown-Bb28oTQN.js";import"./index-BH508O9j.js";import"./index-Bvd5418W.js";import"./x-BIBjS2Dr.js";import"./index-NEtNT4ix.js";import"./chevron-down-C7_CWyHS.js";import"./index-CaEI0-fE.js";import"./shield-DgxHpXTb.js";import"./users-DRMz8fhj.js";import"./message-square-CrR61UD7.js";import"./file-text-DIkPgk9X.js";import"./lock-BsRQ3mjQ.js";import"./credit-card-DZtV9Y3R.js";import"./chart-column-S0VcatN5.js";import"./dialog-BDMD06yW.js";import"./spinner-DI7qxYjB.js";import"./loader-circle-DmMzF6DP.js";import"./info-DszxC6pq.js";import"./triangle-alert-B_NYeNJG.js";import"./index-BJwOBxES.js";import"./index-CcLcdVZM.js";import"./log-out-D2fYovF8.js";import"./chevron-right-O9ILxyvV.js";const P=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]],Q=L("ToggleLeft",P);const X=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]],Z=L("ToggleRight",X),ee=[{title:"Admin",href:"/admin"},{title:"Feature Flags",href:"/admin/feature-flags"}];function Ae(b){const e=U.c(25),{featureFlags:n,currentState:j}=b,[y,v]=S.useState(!1),[s,E]=S.useState(null);let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c={},e[0]=c):c=e[0];const{post:N,processing:_}=O(c);let d;e[1]===Symbol.for("react.memo_cache_sentinel")?(d=(k,a,r)=>{E({category:k,feature:a,enabled:!r}),v(!0)},e[1]=d):d=e[1];const $=d;let m;e[2]!==N||e[3]!==s?(m=()=>{s&&N("/admin/feature-flags/toggle",{category:s.category,feature:s.feature,enabled:s.enabled},{onSuccess:()=>{v(!1),E(null)}})},e[2]=N,e[3]=s,e[4]=m):m=e[4];const w=m,A=te;let f;e[5]===Symbol.for("react.memo_cache_sentinel")?(f=t.jsx(H,{title:"Admin - Feature Flags"}),e[5]=f):f=e[5];let p;e[6]===Symbol.for("react.memo_cache_sentinel")?(p=t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Feature Flags"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage application feature flags"})]}),e[6]=p):p=e[6];let u;e[7]===Symbol.for("react.memo_cache_sentinel")?(u=t.jsxs("div",{className:"flex items-center justify-between",children:[p,t.jsx(q,{href:"/admin",children:t.jsxs(D,{variant:"outline",children:[t.jsx(Y,{className:"mr-2 h-4 w-4"}),"Back to Dashboard"]})})]}),e[7]=u):u=e[7];let x;e[8]===Symbol.for("react.memo_cache_sentinel")?(x=t.jsx(R,{className:"border-yellow-200 bg-yellow-50 dark:border-yellow-900 dark:bg-yellow-950",children:t.jsx(T,{className:"pt-6",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(G,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"Environment Variable Configuration"}),t.jsx("p",{className:"text-xs text-yellow-700 dark:text-yellow-300 mt-1",children:"Feature flags are controlled via environment variables. Toggling here will log the action, but you'll need to update your .env file and restart the application for changes to take effect."})]})]})})}),e[8]=x):x=e[8];let h;e[9]===Symbol.for("react.memo_cache_sentinel")?(h=t.jsxs(z,{children:[t.jsxs(I,{className:"flex items-center gap-2",children:[t.jsx(J,{className:"h-5 w-5"}),"Redis Features"]}),t.jsx(K,{children:"Redis is a drop-in accelerator. When disabled, the database is used as the default backend."})]}),e[9]=h):h=e[9];let l;e[10]!==j||e[11]!==n.redis||e[12]!==_?(l=t.jsxs(R,{children:[h,t.jsx(T,{children:t.jsx("div",{className:"space-y-4",children:Object.entries(n.redis).map(k=>{const[a]=k,r=j.redis[a],B=`REDIS_${a.toUpperCase()}_ENABLED`;return t.jsxs("div",{className:"flex items-center justify-between border rounded-lg p-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"font-medium capitalize",children:a==="enabled"?"Redis":a.replace("_"," ")}),t.jsx(M,{variant:r?"default":"secondary",children:r?"Enabled":"Disabled"})]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:A("redis",a)}),t.jsxs("p",{className:"text-xs text-muted-foreground mt-1 font-mono",children:[B," = ",r?"true":"false"]})]}),t.jsx(D,{variant:"outline",size:"sm",onClick:()=>$("redis",a,r),disabled:_,children:r?t.jsxs(t.Fragment,{children:[t.jsx(Z,{className:"mr-2 h-4 w-4"}),"Disable"]}):t.jsxs(t.Fragment,{children:[t.jsx(Q,{className:"mr-2 h-4 w-4"}),"Enable"]})})]},a)})})})]}),e[10]=j,e[11]=n.redis,e[12]=_,e[13]=l):l=e[13];const C=s?`${s.enabled?"Enable":"Disable"} ${s.feature}`:"Toggle Feature Flag";let i;e[14]!==s?(i=s?`This will ${s.enabled?"enable":"disable"} the ${s.feature} feature flag. You will need to update the environment variable ${s.category.toUpperCase()}_${s.feature.toUpperCase()}_ENABLED and restart the application for changes to take effect.`:"",e[14]=s,e[15]=i):i=e[15];const F=s?.enabled?"Enable":"Disable";let o;e[16]!==w||e[17]!==C||e[18]!==i||e[19]!==F||e[20]!==y?(o=t.jsx(W,{open:y,onOpenChange:v,onConfirm:w,title:C,description:i,confirmText:F,variant:"default"}),e[16]=w,e[17]=C,e[18]=i,e[19]=F,e[20]=y,e[21]=o):o=e[21];let g;return e[22]!==o||e[23]!==l?(g=t.jsxs(V,{breadcrumbs:ee,children:[f,t.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[u,x,l,o]})]}),e[22]=o,e[23]=l,e[24]=g):g=e[24],g}function te(b,e){return{redis:{enabled:"Enable Redis for caching and performance",locks:"Use Redis for distributed locking",idempotency:"Use Redis for idempotency keys",queues:"Use Redis for queue processing"}}[b]?.[e]||"Feature flag"}export{Ae as default};
