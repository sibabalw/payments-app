import{c as ot,j as t,H as dt,L as Ye}from"./app-DWDC-BVo.js";import{C as r,a as m,b as o,c as d}from"./card-ErUD2DV9.js";import{B as $e}from"./createLucideIcon-CDiNb0OM.js";import{A as xt}from"./admin-layout-DALa9hvk.js";import{B as ft,a as lt}from"./BarChart-6l2Uk-3Q.js";import{R as ht,C as ut,X as jt,Y as pt,T as gt,L as Nt}from"./CartesianChart-D3h3Avl2.js";import{B as at}from"./appearance-dropdown-Boh93vvE.js";import{W as ct}from"./app-sidebar-header-r-OiXY8i.js";import{C as Ge}from"./circle-check-big-CeHPrI3R.js";import{T as bt}from"./triangle-alert-DveO23K3.js";import{B as yt}from"./ban-Cz2wVyZk.js";import{U as it}from"./users-CtagEMWm.js";import{S as _t}from"./shield-B0GD2scd.js";import{T as wt}from"./trending-up-BU15gSyZ.js";import{D as vt}from"./dollar-sign-DGtOSjhC.js";import{C as nt}from"./circle-x-DCRTT9my.js";import{C as Ie}from"./clock-D4ogtgGS.js";import{A as rt}from"./arrow-right-DRl_U4iq.js";/* empty css            */import"./message-square-DRz1er9_.js";import"./file-text-xQShroE0.js";import"./lock-Dqbj9PEc.js";import"./credit-card-DHCU20zw.js";import"./chart-column-D3a6wEl_.js";import"./chevron-down-BehZftUK.js";import"./x-Cr_BKX42.js";import"./index-B-id3RBu.js";import"./index-apnaeyBA.js";import"./index-BCOzoWRm.js";import"./index-BspEiaub.js";import"./index-l1Yz4tBP.js";import"./index-CcLcdVZM.js";import"./log-out-CNw_jzHT.js";import"./chevron-right-TaOApODu.js";const St=[{title:"Admin",href:"/admin"},{title:"Dashboard",href:"/admin"}];function ms(i){const e=ot.c(157),{businessMetrics:c,userMetrics:n,paymentJobMetrics:l,payrollJobMetrics:a,totalEscrowBalance:qe,recentBusinesses:ce,recentStatusChanges:ie,monthlyPayments:Oe,monthlyPayroll:ae}=i,x=kt,et=At,tt=Ct;let ne;if(e[0]!==Oe||e[1]!==ae){let s;e[3]!==ae?(s=(st,mt)=>({month:st.month,payments:Number(st.total),payroll:Number(ae[mt]?.total||0)}),e[3]=ae,e[4]=s):s=e[4],ne=Oe.map(s),e[0]=Oe,e[1]=ae,e[2]=ne}else ne=e[2];const re=ne,Qe=Number(l.succeeded.total_amount)+Number(a.succeeded.total_amount);let me;e[5]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx(dt,{title:"Admin Dashboard"}),e[5]=me):me=e[5];let oe;e[6]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Admin Dashboard"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Platform-wide metrics and management"})]}),e[6]=oe):oe=e[6];let de;e[7]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsx(Ye,{href:"/admin/businesses",children:t.jsxs($e,{variant:"outline",children:[t.jsx(at,{className:"mr-2 h-4 w-4"}),"Manage Businesses"]})}),e[7]=de):de=e[7];let xe;e[8]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsxs("div",{className:"flex items-center justify-between",children:[oe,t.jsxs("div",{className:"flex gap-2",children:[de,t.jsx(Ye,{href:"/admin/escrow",children:t.jsxs($e,{variant:"outline",children:[t.jsx(ct,{className:"mr-2 h-4 w-4"}),"Escrow Management"]})})]})]}),e[8]=xe):xe=e[8];let fe;e[9]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(o,{className:"text-sm font-medium",children:"Total Businesses"}),t.jsx(at,{className:"h-4 w-4 text-muted-foreground"})]}),e[9]=fe):fe=e[9];let f;e[10]!==c.total?(f=t.jsx("div",{className:"text-2xl font-bold",children:c.total}),e[10]=c.total,e[11]=f):f=e[11];let he;e[12]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsx(Ge,{className:"h-3 w-3"}),e[12]=he):he=e[12];let h;e[13]!==c.active?(h=t.jsxs("span",{className:"flex items-center gap-1 text-green-600",children:[he,c.active," active"]}),e[13]=c.active,e[14]=h):h=e[14];let ue;e[15]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsx(bt,{className:"h-3 w-3"}),e[15]=ue):ue=e[15];let u;e[16]!==c.suspended?(u=t.jsxs("span",{className:"flex items-center gap-1 text-yellow-600",children:[ue,c.suspended," suspended"]}),e[16]=c.suspended,e[17]=u):u=e[17];let je;e[18]===Symbol.for("react.memo_cache_sentinel")?(je=t.jsx(yt,{className:"h-3 w-3"}),e[18]=je):je=e[18];let j;e[19]!==c.banned?(j=t.jsxs("span",{className:"flex items-center gap-1 text-red-600",children:[je,c.banned," banned"]}),e[19]=c.banned,e[20]=j):j=e[20];let p;e[21]!==u||e[22]!==j||e[23]!==h?(p=t.jsxs("div",{className:"flex gap-2 mt-2 text-xs",children:[h,u,j]}),e[21]=u,e[22]=j,e[23]=h,e[24]=p):p=e[24];let g;e[25]!==p||e[26]!==f?(g=t.jsxs(r,{children:[fe,t.jsxs(d,{children:[f,p]})]}),e[25]=p,e[26]=f,e[27]=g):g=e[27];let pe;e[28]===Symbol.for("react.memo_cache_sentinel")?(pe=t.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(o,{className:"text-sm font-medium",children:"Total Users"}),t.jsx(it,{className:"h-4 w-4 text-muted-foreground"})]}),e[28]=pe):pe=e[28];let N;e[29]!==n.total?(N=t.jsx("div",{className:"text-2xl font-bold",children:n.total}),e[29]=n.total,e[30]=N):N=e[30];let ge;e[31]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsx(_t,{className:"h-3 w-3"}),e[31]=ge):ge=e[31];let b;e[32]!==n.admins?(b=t.jsxs("span",{className:"flex items-center gap-1 text-primary",children:[ge,n.admins," admins"]}),e[32]=n.admins,e[33]=b):b=e[33];let Ne;e[34]===Symbol.for("react.memo_cache_sentinel")?(Ne=t.jsx(Ge,{className:"h-3 w-3"}),e[34]=Ne):Ne=e[34];let y;e[35]!==n.verified?(y=t.jsxs("span",{className:"flex items-center gap-1 text-green-600",children:[Ne,n.verified," verified"]}),e[35]=n.verified,e[36]=y):y=e[36];let _;e[37]!==b||e[38]!==y?(_=t.jsxs("div",{className:"flex gap-2 mt-2 text-xs",children:[b,y]}),e[37]=b,e[38]=y,e[39]=_):_=e[39];let w;e[40]!==N||e[41]!==_?(w=t.jsxs(r,{children:[pe,t.jsxs(d,{children:[N,_]})]}),e[40]=N,e[41]=_,e[42]=w):w=e[42];let be;e[43]===Symbol.for("react.memo_cache_sentinel")?(be=t.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(o,{className:"text-sm font-medium",children:"Total Escrow Balance"}),t.jsx(ct,{className:"h-4 w-4 text-primary"})]}),e[43]=be):be=e[43];let v;e[44]!==qe?(v=x(qe),e[44]=qe,e[45]=v):v=e[45];let S;e[46]!==v?(S=t.jsx("div",{className:"text-2xl font-bold text-primary",children:v}),e[46]=v,e[47]=S):S=e[47];let ye;e[48]===Symbol.for("react.memo_cache_sentinel")?(ye=t.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all businesses"}),e[48]=ye):ye=e[48];let C;e[49]!==S?(C=t.jsxs(r,{children:[be,t.jsxs(d,{children:[S,ye]})]}),e[49]=S,e[50]=C):C=e[50];let _e;e[51]===Symbol.for("react.memo_cache_sentinel")?(_e=t.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(o,{className:"text-sm font-medium",children:"Total Processed"}),t.jsx(wt,{className:"h-4 w-4 text-green-600"})]}),e[51]=_e):_e=e[51];let A;e[52]!==Qe?(A=x(Qe),e[52]=Qe,e[53]=A):A=e[53];let k;e[54]!==A?(k=t.jsx("div",{className:"text-2xl font-bold text-green-600",children:A}),e[54]=A,e[55]=k):k=e[55];let we;e[56]===Symbol.for("react.memo_cache_sentinel")?(we=t.jsx("p",{className:"text-xs text-muted-foreground",children:"Successful payments & payroll"}),e[56]=we):we=e[56];let B;e[57]!==k?(B=t.jsxs(r,{children:[_e,t.jsxs(d,{children:[k,we]})]}),e[57]=k,e[58]=B):B=e[58];let P;e[59]!==g||e[60]!==w||e[61]!==C||e[62]!==B?(P=t.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[g,w,C,B]}),e[59]=g,e[60]=w,e[61]=C,e[62]=B,e[63]=P):P=e[63];let ve;e[64]===Symbol.for("react.memo_cache_sentinel")?(ve=t.jsx(m,{children:t.jsxs(o,{className:"flex items-center gap-2",children:[t.jsx(vt,{className:"h-5 w-5 text-green-600"}),"Payment Jobs"]})}),e[64]=ve):ve=e[64];let Se,Ce;e[65]===Symbol.for("react.memo_cache_sentinel")?(Se=t.jsx(Ge,{className:"h-4 w-4 text-green-600"}),Ce=t.jsx("p",{className:"text-sm font-medium",children:"Succeeded"}),e[65]=Se,e[66]=Ce):(Se=e[65],Ce=e[66]);let T;e[67]!==l.succeeded.count?(T=t.jsx("p",{className:"text-lg font-bold",children:l.succeeded.count}),e[67]=l.succeeded.count,e[68]=T):T=e[68];let D;e[69]!==l.succeeded.total_amount?(D=x(l.succeeded.total_amount),e[69]=l.succeeded.total_amount,e[70]=D):D=e[70];let R;e[71]!==D?(R=t.jsx("p",{className:"text-xs text-muted-foreground",children:D}),e[71]=D,e[72]=R):R=e[72];let M;e[73]!==T||e[74]!==R?(M=t.jsxs("div",{className:"flex items-center gap-2",children:[Se,t.jsxs("div",{children:[Ce,T,R]})]}),e[73]=T,e[74]=R,e[75]=M):M=e[75];let Ae,ke;e[76]===Symbol.for("react.memo_cache_sentinel")?(Ae=t.jsx(nt,{className:"h-4 w-4 text-red-600"}),ke=t.jsx("p",{className:"text-sm font-medium",children:"Failed"}),e[76]=Ae,e[77]=ke):(Ae=e[76],ke=e[77]);let L;e[78]!==l.failed.count?(L=t.jsx("p",{className:"text-lg font-bold",children:l.failed.count}),e[78]=l.failed.count,e[79]=L):L=e[79];let U;e[80]!==l.failed.total_amount?(U=x(l.failed.total_amount),e[80]=l.failed.total_amount,e[81]=U):U=e[81];let E;e[82]!==U?(E=t.jsx("p",{className:"text-xs text-muted-foreground",children:U}),e[82]=U,e[83]=E):E=e[83];let z;e[84]!==L||e[85]!==E?(z=t.jsxs("div",{className:"flex items-center gap-2",children:[Ae,t.jsxs("div",{children:[ke,L,E]})]}),e[84]=L,e[85]=E,e[86]=z):z=e[86];let Be,Pe;e[87]===Symbol.for("react.memo_cache_sentinel")?(Be=t.jsx(Ie,{className:"h-4 w-4 text-yellow-600"}),Pe=t.jsx("p",{className:"text-sm font-medium",children:"Pending"}),e[87]=Be,e[88]=Pe):(Be=e[87],Pe=e[88]);let F;e[89]!==l.pending.count?(F=t.jsxs("div",{className:"flex items-center gap-2",children:[Be,t.jsxs("div",{children:[Pe,t.jsx("p",{className:"text-lg font-bold",children:l.pending.count})]})]}),e[89]=l.pending.count,e[90]=F):F=e[90];let Te,De;e[91]===Symbol.for("react.memo_cache_sentinel")?(Te=t.jsx(Ie,{className:"h-4 w-4 text-blue-600"}),De=t.jsx("p",{className:"text-sm font-medium",children:"Processing"}),e[91]=Te,e[92]=De):(Te=e[91],De=e[92]);let J;e[93]!==l.processing.count?(J=t.jsxs("div",{className:"flex items-center gap-2",children:[Te,t.jsxs("div",{children:[De,t.jsx("p",{className:"text-lg font-bold",children:l.processing.count})]})]}),e[93]=l.processing.count,e[94]=J):J=e[94];let H;e[95]!==M||e[96]!==z||e[97]!==F||e[98]!==J?(H=t.jsxs(r,{children:[ve,t.jsx(d,{children:t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[M,z,F,J]})})]}),e[95]=M,e[96]=z,e[97]=F,e[98]=J,e[99]=H):H=e[99];let Re;e[100]===Symbol.for("react.memo_cache_sentinel")?(Re=t.jsx(m,{children:t.jsxs(o,{className:"flex items-center gap-2",children:[t.jsx(it,{className:"h-5 w-5 text-blue-600"}),"Payroll Jobs"]})}),e[100]=Re):Re=e[100];let Me,Le;e[101]===Symbol.for("react.memo_cache_sentinel")?(Me=t.jsx(Ge,{className:"h-4 w-4 text-green-600"}),Le=t.jsx("p",{className:"text-sm font-medium",children:"Succeeded"}),e[101]=Me,e[102]=Le):(Me=e[101],Le=e[102]);let K;e[103]!==a.succeeded.count?(K=t.jsx("p",{className:"text-lg font-bold",children:a.succeeded.count}),e[103]=a.succeeded.count,e[104]=K):K=e[104];let X;e[105]!==a.succeeded.total_amount?(X=x(a.succeeded.total_amount),e[105]=a.succeeded.total_amount,e[106]=X):X=e[106];let Z;e[107]!==X?(Z=t.jsx("p",{className:"text-xs text-muted-foreground",children:X}),e[107]=X,e[108]=Z):Z=e[108];let V;e[109]!==K||e[110]!==Z?(V=t.jsxs("div",{className:"flex items-center gap-2",children:[Me,t.jsxs("div",{children:[Le,K,Z]})]}),e[109]=K,e[110]=Z,e[111]=V):V=e[111];let Ue,Ee;e[112]===Symbol.for("react.memo_cache_sentinel")?(Ue=t.jsx(nt,{className:"h-4 w-4 text-red-600"}),Ee=t.jsx("p",{className:"text-sm font-medium",children:"Failed"}),e[112]=Ue,e[113]=Ee):(Ue=e[112],Ee=e[113]);let W;e[114]!==a.failed.count?(W=t.jsx("p",{className:"text-lg font-bold",children:a.failed.count}),e[114]=a.failed.count,e[115]=W):W=e[115];let Y;e[116]!==a.failed.total_amount?(Y=x(a.failed.total_amount),e[116]=a.failed.total_amount,e[117]=Y):Y=e[117];let $;e[118]!==Y?($=t.jsx("p",{className:"text-xs text-muted-foreground",children:Y}),e[118]=Y,e[119]=$):$=e[119];let G;e[120]!==W||e[121]!==$?(G=t.jsxs("div",{className:"flex items-center gap-2",children:[Ue,t.jsxs("div",{children:[Ee,W,$]})]}),e[120]=W,e[121]=$,e[122]=G):G=e[122];let ze,Fe;e[123]===Symbol.for("react.memo_cache_sentinel")?(ze=t.jsx(Ie,{className:"h-4 w-4 text-yellow-600"}),Fe=t.jsx("p",{className:"text-sm font-medium",children:"Pending"}),e[123]=ze,e[124]=Fe):(ze=e[123],Fe=e[124]);let I;e[125]!==a.pending.count?(I=t.jsxs("div",{className:"flex items-center gap-2",children:[ze,t.jsxs("div",{children:[Fe,t.jsx("p",{className:"text-lg font-bold",children:a.pending.count})]})]}),e[125]=a.pending.count,e[126]=I):I=e[126];let Je,He;e[127]===Symbol.for("react.memo_cache_sentinel")?(Je=t.jsx(Ie,{className:"h-4 w-4 text-blue-600"}),He=t.jsx("p",{className:"text-sm font-medium",children:"Processing"}),e[127]=Je,e[128]=He):(Je=e[127],He=e[128]);let q;e[129]!==a.processing.count?(q=t.jsxs("div",{className:"flex items-center gap-2",children:[Je,t.jsxs("div",{children:[He,t.jsx("p",{className:"text-lg font-bold",children:a.processing.count})]})]}),e[129]=a.processing.count,e[130]=q):q=e[130];let O;e[131]!==V||e[132]!==G||e[133]!==I||e[134]!==q?(O=t.jsxs(r,{children:[Re,t.jsx(d,{children:t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[V,G,I,q]})})]}),e[131]=V,e[132]=G,e[133]=I,e[134]=q,e[135]=O):O=e[135];let Q;e[136]!==H||e[137]!==O?(Q=t.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[H,O]}),e[136]=H,e[137]=O,e[138]=Q):Q=e[138];let ee;e[139]!==re?(ee=re.length>0&&t.jsxs(r,{children:[t.jsx(m,{children:t.jsx(o,{children:"Monthly Trends (Last 6 Months)"})}),t.jsx(d,{children:t.jsx(ht,{width:"100%",height:300,children:t.jsxs(ft,{data:re,children:[t.jsx(ut,{strokeDasharray:"3 3",className:"stroke-muted"}),t.jsx(jt,{dataKey:"month",className:"text-xs",tick:{fontSize:12}}),t.jsx(pt,{className:"text-xs",tick:{fontSize:12},tickFormatter:s=>x(s)}),t.jsx(gt,{formatter:s=>x(s),contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))"}}),t.jsx(Nt,{}),t.jsx(lt,{dataKey:"payments",fill:"#22c55e",name:"Payments",radius:[4,4,0,0]}),t.jsx(lt,{dataKey:"payroll",fill:"#3b82f6",name:"Payroll",radius:[4,4,0,0]})]})})})]}),e[139]=re,e[140]=ee):ee=e[140];let Ke;e[141]===Symbol.for("react.memo_cache_sentinel")?(Ke=t.jsx(o,{children:"Recent Businesses"}),e[141]=Ke):Ke=e[141];let Xe;e[142]===Symbol.for("react.memo_cache_sentinel")?(Xe=t.jsxs(m,{className:"flex flex-row items-center justify-between",children:[Ke,t.jsx(Ye,{href:"/admin/businesses",children:t.jsxs($e,{variant:"ghost",size:"sm",children:["View All ",t.jsx(rt,{className:"ml-1 h-4 w-4"})]})})]}),e[142]=Xe):Xe=e[142];let te;e[143]!==ce?(te=t.jsxs(r,{children:[Xe,t.jsx(d,{children:ce.length>0?t.jsx("div",{className:"space-y-4",children:ce.slice(0,5).map(s=>t.jsxs("div",{className:"flex items-center justify-between border-b pb-3 last:border-0",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:s.name}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.owner?.name||"Unknown"," - ",et(s.created_at)]})]}),tt(s.status)]},s.id))}):t.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No businesses yet"})})]}),e[143]=ce,e[144]=te):te=e[144];let Ze;e[145]===Symbol.for("react.memo_cache_sentinel")?(Ze=t.jsx(o,{children:"Recent Status Changes"}),e[145]=Ze):Ze=e[145];let Ve;e[146]===Symbol.for("react.memo_cache_sentinel")?(Ve=t.jsxs(m,{className:"flex flex-row items-center justify-between",children:[Ze,t.jsx(Ye,{href:"/admin/businesses?sort=status_changed_at&direction=desc",children:t.jsxs($e,{variant:"ghost",size:"sm",children:["View All ",t.jsx(rt,{className:"ml-1 h-4 w-4"})]})})]}),e[146]=Ve):Ve=e[146];let se;e[147]!==ie?(se=t.jsxs(r,{children:[Ve,t.jsx(d,{children:ie.length>0?t.jsx("div",{className:"space-y-4",children:ie.slice(0,5).map(s=>t.jsxs("div",{className:"flex items-center justify-between border-b pb-3 last:border-0",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:s.name}),t.jsx("p",{className:"text-xs text-muted-foreground",children:s.status_changed_at&&et(s.status_changed_at)}),s.status_reason&&t.jsxs("p",{className:"text-xs text-muted-foreground truncate max-w-[200px]",children:["Reason: ",s.status_reason]})]}),tt(s.status)]},s.id))}):t.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No status changes yet"})})]}),e[147]=ie,e[148]=se):se=e[148];let le;e[149]!==te||e[150]!==se?(le=t.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[te,se]}),e[149]=te,e[150]=se,e[151]=le):le=e[151];let We;return e[152]!==P||e[153]!==Q||e[154]!==ee||e[155]!==le?(We=t.jsxs(xt,{breadcrumbs:St,children:[me,t.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-4",children:[xe,P,Q,ee,le]})]}),e[152]=P,e[153]=Q,e[154]=ee,e[155]=le,e[156]=We):We=e[156],We}function Ct(i){const e={active:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",suspended:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",banned:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"};return t.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${e[i]||""}`,children:i.charAt(0).toUpperCase()+i.slice(1)})}function At(i){return new Date(i).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric"})}function kt(i){return new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(Number(i))}export{ms as default};
