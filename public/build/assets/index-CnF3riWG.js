import{c as re,r as q,j as e,L as z,a as M,H as Y}from"./app-Cuioih4f.js";import{B as _}from"./createLucideIcon-B5MOZI9f.js";import{C as i,a as H,b as V,d as J,c as n}from"./card-D9Y_bl1i.js";import{B as Z}from"./badge-Bn6Vikwd.js";import{a as ae,b as ie,c as ne,S as ce,d as W}from"./select-CNE8bl0y.js";import{A as K}from"./app-layout-n-d4l7tQ.js";import{C as oe}from"./circle-check-DtjdWYjd.js";import{S as de}from"./square-pen-scPHNZBX.js";import{D as me}from"./download-Crvb0VC-.js";import{F as O}from"./file-spreadsheet-B1WF2vbT.js";import{U as xe}from"./users-CdWaatQB.js";import{A as he}from"./arrow-left-ibI1T2c1.js";import{P as pe}from"./plus-BYiZCxp8.js";import{R as fe}from"./refresh-cw-D1TyeKWT.js";/* empty css            */import"./index-CfqSVWBk.js";import"./chevron-down-CZg7iP84.js";import"./x-Bo-ZIIiE.js";import"./index-Buc-yRrE.js";import"./index-IPHHTqRQ.js";import"./chevron-right-BmA-IvWf.js";import"./check-B470GyMS.js";import"./chevron-up-kVmNUnJV.js";import"./app-sidebar-header-C7CWWu21.js";import"./index-DcSYVg4d.js";import"./appearance-dropdown-Dd19dic0.js";import"./index-EFDA_sBj.js";import"./index-Bs_TJoq4.js";import"./index-CcLcdVZM.js";import"./log-out-DgGKhRGZ.js";import"./proxy-Bhuhjzak.js";import"./loader-circle-BHZ8O1kv.js";import"./circle-x-BHtK7BJ7.js";import"./circle-alert-D33Q7hcZ.js";import"./credit-card-DyUwoGG-.js";import"./dollar-sign-CmPq-nEC.js";import"./message-square-DDbRZnKk.js";import"./file-text-CHp8TDnm.js";import"./user-check-BK_NFKR2.js";import"./clock-CSBq3vjr.js";import"./shield-U7oFjP4d.js";const Q=[{title:"Compliance",href:"/compliance"},{title:"UIF Declarations",href:"/compliance/uif"}];function ct(r){const t=re.c(48),{business:y,submissions:a,pendingPeriods:B,previewData:l,selectedPeriod:X}=r,[o,ee]=q.useState(X||""),[v,$]=q.useState(!1),c=be,te=ge;let S;t[0]===Symbol.for("react.memo_cache_sentinel")?(S=s=>{ee(s),M.get("/compliance/uif",{period:s},{preserveState:!0})},t[0]=S):S=t[0];const se=S;let w;t[1]!==o?(w=()=>{o&&($(!0),M.post("/compliance/uif/generate",{period:o},{onFinish:()=>$(!1)}))},t[1]=o,t[2]=w):w=t[2];const L=w,le=Ne;if(!y){let s;t[3]===Symbol.for("react.memo_cache_sentinel")?(s=e.jsx(Y,{title:"UIF Declarations"}),t[3]=s):s=t[3];let G,P,R;t[4]===Symbol.for("react.memo_cache_sentinel")?(G=e.jsx(xe,{className:"h-12 w-12 text-muted-foreground mb-4"}),P=e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"No Business Selected"}),R=e.jsx("p",{className:"text-muted-foreground text-center mb-4",children:"Please select a business to manage UIF declarations."}),t[4]=G,t[5]=P,t[6]=R):(G=t[4],P=t[5],R=t[6]);let k;return t[7]===Symbol.for("react.memo_cache_sentinel")?(k=e.jsxs(K,{breadcrumbs:Q,children:[s,e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 p-4",children:e.jsx(i,{children:e.jsxs(n,{className:"flex flex-col items-center justify-center py-12",children:[G,P,R,e.jsx(_,{asChild:!0,children:e.jsx(z,{href:"/businesses",children:"Go to Businesses"})})]})})})]}),t[7]=k):k=t[7],k}let C;t[8]===Symbol.for("react.memo_cache_sentinel")?(C=e.jsx(Y,{title:"UIF Declarations"}),t[8]=C):C=t[8];let I,F;t[9]===Symbol.for("react.memo_cache_sentinel")?(I=e.jsx(_,{variant:"ghost",size:"icon",asChild:!0,children:e.jsx(z,{href:"/compliance",children:e.jsx(he,{className:"h-4 w-4"})})}),F=e.jsx("h1",{className:"text-2xl font-bold",children:"UIF Declarations (UI-19)"}),t[9]=I,t[10]=F):(I=t[9],F=t[10]);let d;t[11]!==y.name?(d=e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[I,e.jsxs("div",{children:[F,e.jsxs("p",{className:"text-muted-foreground",children:["Monthly contribution reports for ",y.name]})]})]})}),t[11]=y.name,t[12]=d):d=t[12];let U;t[13]===Symbol.for("react.memo_cache_sentinel")?(U=e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-5 w-5"}),"Generate UI-19 Declaration"]}),e.jsx(J,{children:"Select a period to generate a new UIF contribution declaration"})]}),t[13]=U):U=t[13];let D;t[14]===Symbol.for("react.memo_cache_sentinel")?(D=e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Period"}),t[14]=D):D=t[14];let A;t[15]===Symbol.for("react.memo_cache_sentinel")?(A=e.jsx(ae,{children:e.jsx(ie,{placeholder:"Select period"})}),t[15]=A):A=t[15];let m;t[16]!==B?(m=B.map(je),t[16]=B,t[17]=m):m=t[17];let x;t[18]!==a?(x=a.map(ue),t[18]=a,t[19]=x):x=t[19];let h;t[20]!==m||t[21]!==x?(h=e.jsxs(ne,{children:[m,x]}),t[20]=m,t[21]=x,t[22]=h):h=t[22];let p;t[23]!==o||t[24]!==h?(p=e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[D,e.jsxs(ce,{value:o,onValueChange:se,children:[A,h]})]}),t[23]=o,t[24]=h,t[25]=p):p=t[25];const T=!o||v;let f;t[26]!==v?(f=v?e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),"Generate Declaration"]}),t[26]=v,t[27]=f):f=t[27];let u;t[28]!==L||t[29]!==T||t[30]!==f?(u=e.jsx(_,{onClick:L,disabled:T,children:f}),t[28]=L,t[29]=T,t[30]=f,t[31]=u):u=t[31];let j;t[32]!==p||t[33]!==u?(j=e.jsxs(i,{children:[U,e.jsx(n,{children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[p,u]})})]}),t[32]=p,t[33]=u,t[34]=j):j=t[34];let N;t[35]!==l?(N=l&&e.jsxs(i,{children:[e.jsxs(H,{children:[e.jsxs(V,{children:["Preview: ",l.period_display]}),e.jsx(J,{children:"Review the data before generating the declaration"})]}),e.jsxs(n,{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-3 p-4 bg-muted/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Business Name"}),e.jsx("p",{className:"font-medium",children:l.business.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Registration Number"}),e.jsx("p",{className:"font-medium",children:l.business.registration_number||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"UIF Reference"}),e.jsx("p",{className:"font-medium",children:l.business.uif_reference||"N/A"})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-5",children:[e.jsx(i,{children:e.jsxs(n,{className:"pt-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Employees"}),e.jsx("p",{className:"text-2xl font-bold",children:l.totals.total_employees})]})}),e.jsx(i,{children:e.jsxs(n,{className:"pt-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Gross Remuneration"}),e.jsx("p",{className:"text-2xl font-bold",children:c(l.totals.total_gross_remuneration)})]})}),e.jsx(i,{children:e.jsxs(n,{className:"pt-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Employee UIF"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:c(l.totals.total_uif_employee)})]})}),e.jsx(i,{children:e.jsxs(n,{className:"pt-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Employer UIF"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:c(l.totals.total_uif_employer)})]})}),e.jsx(i,{className:"bg-primary/5",children:e.jsxs(n,{className:"pt-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total UIF"}),e.jsx("p",{className:"text-2xl font-bold text-primary",children:c(l.totals.total_uif_contribution)})]})})]}),l.employees.length>0&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-muted/50",children:[e.jsx("th",{className:"text-left p-3",children:"ID Number"}),e.jsx("th",{className:"text-left p-3",children:"Employee Name"}),e.jsx("th",{className:"text-right p-3",children:"Gross Remuneration"}),e.jsx("th",{className:"text-right p-3",children:"Employee UIF"}),e.jsx("th",{className:"text-right p-3",children:"Employer UIF"}),e.jsx("th",{className:"text-right p-3",children:"Total UIF"})]})}),e.jsx("tbody",{children:l.employees.map(s=>e.jsxs("tr",{className:"border-b hover:bg-muted/30",children:[e.jsx("td",{className:"p-3 font-mono text-xs",children:s.id_number||"N/A"}),e.jsx("td",{className:"p-3 font-medium",children:s.employee_name}),e.jsx("td",{className:"p-3 text-right",children:c(s.gross_remuneration)}),e.jsx("td",{className:"p-3 text-right text-blue-600",children:c(s.uif_employee)}),e.jsx("td",{className:"p-3 text-right text-blue-600",children:c(s.uif_employer)}),e.jsx("td",{className:"p-3 text-right font-semibold",children:c(s.total_uif)})]},s.employee_id))})]})})]})]}),t[35]=l,t[36]=N):N=t[36];let g;t[37]!==a?(g=a.length>0&&e.jsxs(i,{children:[e.jsx(H,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-5 w-5"}),"Generated Declarations"]})}),e.jsx(n,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-3",children:"Period"}),e.jsx("th",{className:"text-left p-3",children:"Status"}),e.jsx("th",{className:"text-right p-3",children:"Employees"}),e.jsx("th",{className:"text-right p-3",children:"Total UIF"}),e.jsx("th",{className:"text-left p-3",children:"Generated"}),e.jsx("th",{className:"text-right p-3",children:"Actions"})]})}),e.jsx("tbody",{children:a.map(s=>e.jsxs("tr",{className:"border-b hover:bg-muted/30",children:[e.jsx("td",{className:"p-3 font-medium",children:s.period_display}),e.jsx("td",{className:"p-3",children:le(s.status)}),e.jsx("td",{className:"p-3 text-right",children:s.data?.totals?.total_employees||0}),e.jsx("td",{className:"p-3 text-right font-semibold",children:c(s.data?.totals?.total_uif_contribution||0)}),e.jsx("td",{className:"p-3 text-muted-foreground",children:te(s.created_at)}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[s.status!=="submitted"&&e.jsx(_,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(z,{href:`/compliance/uif/${s.id}/edit`,children:[e.jsx(de,{className:"mr-2 h-4 w-4"}),"Edit"]})}),e.jsx(_,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs("a",{href:`/compliance/uif/${s.id}/download`,children:[e.jsx(me,{className:"mr-2 h-4 w-4"}),"CSV"]})})]})})]},s.id))})]})})})]}),t[37]=a,t[38]=g):g=t[38];let b;t[39]!==l||t[40]!==a.length?(b=a.length===0&&!l&&e.jsx(i,{children:e.jsxs(n,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(O,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Declarations Yet"}),e.jsx("p",{className:"text-muted-foreground text-center",children:"Select a period above to generate your first UI-19 declaration."})]})}),t[39]=l,t[40]=a.length,t[41]=b):b=t[41];let E;return t[42]!==j||t[43]!==N||t[44]!==g||t[45]!==b||t[46]!==d?(E=e.jsxs(K,{breadcrumbs:Q,children:[C,e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-4",children:[d,j,N,g,b]})]}),t[42]=j,t[43]=N,t[44]=g,t[45]=b,t[46]=d,t[47]=E):E=t[47],E}function ue(r){return e.jsxs(W,{value:r.period,children:[r.period_display," (already generated)"]},r.period)}function je(r){return e.jsx(W,{value:r.value,children:r.label},r.value)}function Ne(r){switch(r){case"submitted":return e.jsx(Z,{className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"Submitted"});case"generated":return e.jsx(Z,{className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:"Generated"});default:return e.jsx(Z,{variant:"secondary",children:r})}}function ge(r){return new Date(r).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric"})}function be(r){return new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(r)}export{ct as default};
