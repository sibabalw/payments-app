import{j as e,H as x,L as j,r as m,u as D}from"./app-BRoNAUIM.js";import{I as n}from"./input-error-jm3AyEfT.js";import{B as c}from"./x-pZV5lkp5.js";import{C as h,c as f,a as T,b as k}from"./card-Bag7gWUQ.js";import{I as g}from"./input-6bP_JhyV.js";import{L as d}from"./label-BAqrWHKw.js";import{S as I,a as L,b as A,c as M,d as y}from"./select-Cv0uEHLH.js";import{T as H}from"./textarea-CnOagHtH.js";import{C as v}from"./calendar-Bnzdv3WK.js";import{A as N,P as b,a as _,b as P}from"./app-layout-Bn-75oUf.js";import{C}from"./calendar-CALmSmzi.js";import{f as p}from"./format-BS8Ay9AX.js";/* empty css            */import"./index-CBJSSLbQ.js";import"./index-CfMSX17F.js";import"./index-BohsM0ZD.js";import"./check-CU7v0mdS.js";import"./chevron-up-DDm2opro.js";import"./chevron-left-uzkLnT6H.js";import"./app-sidebar-header-BbzcXdQi.js";import"./appearance-dropdown-BEtN_wNg.js";import"./index-Cfp_L9w6.js";import"./log-out-MC42nTzo.js";import"./badge-ZsznMIyW.js";import"./proxy-CQkt3OrQ.js";import"./circle-check-DIHwzO_b.js";import"./loader-circle-CafrvZjs.js";import"./circle-x-C4YAnoMU.js";import"./circle-alert-COfzFcbZ.js";import"./plus-C6lF1Clu.js";import"./dollar-sign-CDLUu5fH.js";import"./message-square-CEp_sz_O.js";import"./file-text-FWLsz4T5.js";import"./users-CEYKQlp0.js";import"./user-check-DiuzZ-7a.js";import"./clock-DWicTrer.js";import"./shield-Kl3V0fgW.js";const S=[{title:"Payroll",href:"/payroll"},{title:"Bonuses",href:"/payroll/bonuses"},{title:"Edit Bonus",href:"#"}];function Pe({payment:s,businesses:U,employees:q}){if(!s)return e.jsxs(N,{breadcrumbs:S,children:[e.jsx(x,{title:"Edit Bonus"}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:e.jsx(h,{children:e.jsxs(f,{className:"py-10 text-center",children:[e.jsx("p",{className:"text-muted-foreground",children:"Bonus not found."}),e.jsx(j,{href:"/payroll/bonuses",className:"mt-4 inline-block",children:e.jsx(c,{variant:"outline",children:"Back to Bonuses"})})]})})})]});const[a,B]=m.useState(s.period_start?new Date(s.period_start):void 0),[i,w]=m.useState(s.period_end?new Date(s.period_end):void 0),{data:r,setData:o,put:E,processing:u,errors:l}=D({business_id:s.business_id,employee_id:s.employee_id||null,name:s.name||"",type:s.type||"fixed",amount:s.amount||"",adjustment_type:s.adjustment_type||"addition",period_start:s.period_start||"",period_end:s.period_end||"",is_active:s.is_active??!0,description:s.description||""});m.useEffect(()=>{a&&o("period_start",p(a,"yyyy-MM-dd"))},[a]),m.useEffect(()=>{i&&o("period_end",p(i,"yyyy-MM-dd"))},[i]);const F=t=>{t.preventDefault(),E(`/payroll-payments/${s.id}`)};return e.jsxs(N,{breadcrumbs:S,children:[e.jsx(x,{title:"Edit Payment"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Edit Payment"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Update payment details"})]})}),e.jsxs(h,{children:[e.jsx(T,{children:e.jsx(k,{children:"Bonus Details"})}),e.jsx(f,{children:e.jsxs("form",{onSubmit:F,className:"space-y-6",children:[s.employee&&e.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Bonus for:"}),e.jsx("p",{className:"font-medium",children:s.employee.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"name",children:"Bonus Type"}),e.jsx(g,{id:"name",value:r.name,onChange:t=>o("name",t.target.value),placeholder:"e.g., Performance Bonus",required:!0}),e.jsx(n,{message:l.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"type",children:"Amount Type"}),e.jsxs(I,{value:r.type,onValueChange:t=>o("type",t),children:[e.jsx(L,{id:"type",children:e.jsx(A,{})}),e.jsxs(M,{children:[e.jsx(y,{value:"fixed",children:"Fixed amount"}),e.jsx(y,{value:"percentage",children:"Percentage of salary"})]})]}),e.jsx(n,{message:l.type})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:"amount",children:[r.type==="percentage"?"Percentage":"Amount",r.type==="percentage"&&" (0-100)"]}),e.jsx(g,{id:"amount",type:"number",step:(r.type==="percentage","0.01"),min:"0",max:r.type==="percentage"?"100":void 0,value:r.amount,onChange:t=>o("amount",t.target.value),required:!0}),e.jsx(n,{message:l.amount})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"From Date"}),e.jsxs(b,{children:[e.jsx(_,{asChild:!0,children:e.jsxs(c,{type:"button",variant:"outline",className:"w-full justify-start text-left font-normal",children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),a?p(a,"PPP"):"Pick a date"]})}),e.jsx(P,{className:"w-auto p-0",align:"start",children:e.jsx(v,{mode:"single",selected:a,onSelect:B,initialFocus:!0})})]}),e.jsx(n,{message:l.period_start})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"To Date"}),e.jsxs(b,{children:[e.jsx(_,{asChild:!0,children:e.jsxs(c,{type:"button",variant:"outline",className:"w-full justify-start text-left font-normal",children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),i?p(i,"PPP"):"Pick a date"]})}),e.jsx(P,{className:"w-auto p-0",align:"start",children:e.jsx(v,{mode:"single",selected:i,onSelect:w,initialFocus:!0})})]}),e.jsx(n,{message:l.period_end})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(H,{id:"description",value:r.description,onChange:t=>o("description",t.target.value),rows:3}),e.jsx(n,{message:l.description})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{href:"/payroll/bonuses",children:e.jsx(c,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(c,{type:"submit",disabled:u,children:u?"Updating...":"Update Bonus"})]})]})})]})]})]})}export{Pe as default};
