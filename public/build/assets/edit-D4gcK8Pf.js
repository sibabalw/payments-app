import{c as tt,r as st,j as t,a as lt,H as at,L as Ve}from"./app-Cuioih4f.js";import{B as ne}from"./createLucideIcon-B5MOZI9f.js";import{c as C,a as We,b as Xe,C as A,d as rt}from"./card-D9Y_bl1i.js";import{I as w}from"./input-Bz7R7t4w.js";import{B as it}from"./badge-Bn6Vikwd.js";import{A as ot}from"./app-layout-n-d4l7tQ.js";import{C as ct}from"./circle-alert-D33Q7hcZ.js";import{A as nt}from"./arrow-left-ibI1T2c1.js";import{S as et}from"./save-DN_bGcTF.js";import{P as mt}from"./plus-BYiZCxp8.js";import{T as dt}from"./trash-2-qOov6Ogg.js";/* empty css            */import"./app-sidebar-header-C7CWWu21.js";import"./index-CfqSVWBk.js";import"./index-DcSYVg4d.js";import"./x-Bo-ZIIiE.js";import"./appearance-dropdown-Dd19dic0.js";import"./index-EFDA_sBj.js";import"./chevron-down-CZg7iP84.js";import"./index-Buc-yRrE.js";import"./index-Bs_TJoq4.js";import"./index-CcLcdVZM.js";import"./log-out-DgGKhRGZ.js";import"./chevron-right-BmA-IvWf.js";import"./proxy-Bhuhjzak.js";import"./circle-check-DtjdWYjd.js";import"./loader-circle-BHZ8O1kv.js";import"./circle-x-BHtK7BJ7.js";import"./credit-card-DyUwoGG-.js";import"./dollar-sign-CmPq-nEC.js";import"./message-square-DDbRZnKk.js";import"./file-text-CHp8TDnm.js";import"./users-CdWaatQB.js";import"./user-check-BK_NFKR2.js";import"./clock-CSBq3vjr.js";import"./shield-U7oFjP4d.js";function ts(a){const e=tt.c(162),{submission:s}=a;let x;e[0]!==s.data.employees?(x=s.data.employees||[],e[0]=s.data.employees,e[1]=x):x=e[1];const[l,T]=st.useState(x);let ue,pe;e[2]===Symbol.for("react.memo_cache_sentinel")?(ue={title:"Compliance",href:"/compliance"},pe={title:"EMP201 Helper",href:"/compliance/emp201"},e[2]=ue,e[3]=pe):(ue=e[2],pe=e[3]);const Le=`Edit ${s.period_display}`,Re=`/compliance/emp201/${s.id}/edit`;let fe;e[4]!==Le||e[5]!==Re?(fe=[ue,pe,{title:Le,href:Re}],e[4]=Le,e[5]=Re,e[6]=fe):fe=e[6];const Be=fe,v=jt,Qe=ut;let xe;e[7]!==l?(xe=(r,m,d)=>{const c=[...l];if(c[r]={...c[r],[m]:d},m==="gross_salary"){const n=Number(d)||0,u=n,de=u*12;let E=0;de>237100&&(E=u*.18),c[r].paye=Math.round(E*100)/100;const p=Math.min(n,17712);c[r].uif_employee=Math.round(p*.01*100)/100,c[r].uif_employer=Math.round(p*.01*100)/100,c[r].sdl=Math.round(n*.01*100)/100}T(c)},e[7]=l,e[8]=xe):xe=e[8];const i=xe;let he;e[9]!==l?(he=()=>{T([...l,{employee_id:Date.now(),employee_name:"",id_number:"",tax_number:"",gross_salary:0,paye:0,uif_employee:0,uif_employer:0,sdl:0}])},e[9]=l,e[10]=he):he=e[10];const me=he;let be;e[11]!==l?(be=r=>{T(l.filter((m,d)=>d!==r))},e[11]=l,e[12]=be):be=e[12];const S=be;let je;e[13]!==l||e[14]!==s.data||e[15]!==s.id?(je=r=>{r.preventDefault();const m=Qe(l);lt.put(`/compliance/emp201/${s.id}`,{data:{...s.data,employees:l,totals:m}})},e[13]=l,e[14]=s.data,e[15]=s.id,e[16]=je):je=e[16];const Ue=je;let k,F,P,M,D,h,I,L,R,B,b,j,y,_,U,G,N;if(e[17]!==me||e[18]!==Be||e[19]!==l||e[20]!==Ue||e[21]!==S||e[22]!==s.data.business?.name||e[23]!==s.data.business?.paye_reference||e[24]!==s.data.business?.sdl_reference||e[25]!==s.data.business?.uif_reference||e[26]!==s.period_display||e[27]!==s.status||e[28]!==i){const r=Qe(l);P=ot,G=Be;const m=`Edit EMP201 - ${s.period_display}`;e[46]!==m?(N=t.jsx(at,{title:m}),e[46]=m,e[47]=N):N=e[47],U=Ue,B="flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-4";let d,c;e[48]===Symbol.for("react.memo_cache_sentinel")?(d=t.jsx(ne,{type:"button",variant:"ghost",size:"icon",asChild:!0,children:t.jsx(Ve,{href:"/compliance/emp201",children:t.jsx(nt,{className:"h-4 w-4"})})}),c=t.jsx("h1",{className:"text-2xl font-bold",children:"Edit EMP201 Data"}),e[48]=d,e[49]=c):(d=e[48],c=e[49]);let n;e[50]!==s.period_display?(n=t.jsxs("div",{className:"flex items-center gap-4",children:[d,t.jsxs("div",{children:[c,t.jsx("p",{className:"text-muted-foreground",children:s.period_display})]})]}),e[50]=s.period_display,e[51]=n):n=e[51];let u;e[52]!==s.status?(u=s.status==="submitted"&&t.jsxs(it,{variant:"secondary",className:"bg-amber-100 text-amber-800",children:[t.jsx(ct,{className:"mr-1 h-3 w-3"}),"Read Only (Submitted)"]}),e[52]=s.status,e[53]=u):u=e[53];const de=s.status==="submitted";let E;e[54]===Symbol.for("react.memo_cache_sentinel")?(E=t.jsx(et,{className:"mr-2 h-4 w-4"}),e[54]=E):E=e[54];let p;e[55]!==de?(p=t.jsxs(ne,{type:"submit",disabled:de,children:[E,"Save Changes"]}),e[55]=de,e[56]=p):p=e[56];let K;e[57]!==u||e[58]!==p?(K=t.jsxs("div",{className:"flex items-center gap-2",children:[u,p]}),e[57]=u,e[58]=p,e[59]=K):K=e[59],e[60]!==n||e[61]!==K?(b=t.jsxs("div",{className:"flex items-center justify-between",children:[n,K]}),e[60]=n,e[61]=K,e[62]=b):b=e[62];let ge;e[63]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsx(We,{children:t.jsx(Xe,{children:"Business Information"})}),e[63]=ge):ge=e[63];let ve;e[64]===Symbol.for("react.memo_cache_sentinel")?(ve=t.jsx("label",{className:"text-sm text-muted-foreground",children:"Business Name"}),e[64]=ve):ve=e[64];const $e=s.data.business?.name||"N/A";let Q;e[65]!==$e?(Q=t.jsxs("div",{children:[ve,t.jsx("p",{className:"font-medium",children:$e})]}),e[65]=$e,e[66]=Q):Q=e[66];let Se;e[67]===Symbol.for("react.memo_cache_sentinel")?(Se=t.jsx("label",{className:"text-sm text-muted-foreground",children:"PAYE Reference"}),e[67]=Se):Se=e[67];const He=s.data.business?.paye_reference||"N/A";let V;e[68]!==He?(V=t.jsxs("div",{children:[Se,t.jsx("p",{className:"font-medium",children:He})]}),e[68]=He,e[69]=V):V=e[69];let Ee;e[70]===Symbol.for("react.memo_cache_sentinel")?(Ee=t.jsx("label",{className:"text-sm text-muted-foreground",children:"SDL Reference"}),e[70]=Ee):Ee=e[70];const ze=s.data.business?.sdl_reference||"N/A";let W;e[71]!==ze?(W=t.jsxs("div",{children:[Ee,t.jsx("p",{className:"font-medium",children:ze})]}),e[71]=ze,e[72]=W):W=e[72];let Ce;e[73]===Symbol.for("react.memo_cache_sentinel")?(Ce=t.jsx("label",{className:"text-sm text-muted-foreground",children:"UIF Reference"}),e[73]=Ce):Ce=e[73];const Ye=s.data.business?.uif_reference||"N/A";let X;e[74]!==Ye?(X=t.jsxs("div",{children:[Ce,t.jsx("p",{className:"font-medium",children:Ye})]}),e[74]=Ye,e[75]=X):X=e[75],e[76]!==Q||e[77]!==V||e[78]!==W||e[79]!==X?(j=t.jsxs(A,{children:[ge,t.jsx(C,{children:t.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[Q,V,W,X]})})]}),e[76]=Q,e[77]=V,e[78]=W,e[79]=X,e[80]=j):j=e[80];let Ae;e[81]===Symbol.for("react.memo_cache_sentinel")?(Ae=t.jsx("p",{className:"text-sm text-muted-foreground",children:"PAYE"}),e[81]=Ae):Ae=e[81];const Ze=t.jsxs(C,{className:"pt-6",children:[Ae,t.jsx("p",{className:"text-2xl font-bold text-blue-600",children:v(r.total_paye)})]});let ee;e[82]!==Ze?(ee=t.jsx(A,{className:"border-blue-200 bg-blue-50 dark:border-blue-800 dark:bg-blue-950",children:Ze}),e[82]=Ze,e[83]=ee):ee=e[83];let we;e[84]===Symbol.for("react.memo_cache_sentinel")?(we=t.jsx("p",{className:"text-sm text-muted-foreground",children:"UIF Total"}),e[84]=we):we=e[84];const Oe=t.jsxs(C,{className:"pt-6",children:[we,t.jsx("p",{className:"text-2xl font-bold text-green-600",children:v(r.total_uif)}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:["Employee: ",v(r.total_uif_employee)," | Employer: ",v(r.total_uif_employer)]})]});let te;e[85]!==Oe?(te=t.jsx(A,{className:"border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-950",children:Oe}),e[85]=Oe,e[86]=te):te=e[86];let Te;e[87]===Symbol.for("react.memo_cache_sentinel")?(Te=t.jsx("p",{className:"text-sm text-muted-foreground",children:"SDL"}),e[87]=Te):Te=e[87];const qe=t.jsxs(C,{className:"pt-6",children:[Te,t.jsx("p",{className:"text-2xl font-bold text-purple-600",children:v(r.total_sdl)})]});let se;e[88]!==qe?(se=t.jsx(A,{className:"border-purple-200 bg-purple-50 dark:border-purple-800 dark:bg-purple-950",children:qe}),e[88]=qe,e[89]=se):se=e[89];let ke;e[90]===Symbol.for("react.memo_cache_sentinel")?(ke=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Liability"}),e[90]=ke):ke=e[90];const Je=t.jsxs(C,{className:"pt-6",children:[ke,t.jsx("p",{className:"text-2xl font-bold text-primary",children:v(r.total_liability)})]});let le;e[91]!==Je?(le=t.jsx(A,{className:"border-primary bg-primary/5",children:Je}),e[91]=Je,e[92]=le):le=e[92],e[93]!==ee||e[94]!==te||e[95]!==se||e[96]!==le?(y=t.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[ee,te,se,le]}),e[93]=ee,e[94]=te,e[95]=se,e[96]=le,e[97]=y):y=e[97];let Fe;e[98]===Symbol.for("react.memo_cache_sentinel")?(Fe=t.jsxs("div",{children:[t.jsx(Xe,{children:"Employee Tax Details"}),t.jsx(rt,{children:"Edit employee tax calculations for the period"})]}),e[98]=Fe):Fe=e[98];const Ke=s.status==="submitted";let Pe;e[99]===Symbol.for("react.memo_cache_sentinel")?(Pe=t.jsx(mt,{className:"mr-2 h-4 w-4"}),e[99]=Pe):Pe=e[99];let ae;e[100]!==me||e[101]!==Ke?(ae=t.jsxs(We,{className:"flex flex-row items-center justify-between",children:[Fe,t.jsxs(ne,{type:"button",variant:"outline",size:"sm",onClick:me,disabled:Ke,children:[Pe,"Add Employee"]})]}),e[100]=me,e[101]=Ke,e[102]=ae):ae=e[102];let Me;e[103]===Symbol.for("react.memo_cache_sentinel")?(Me=t.jsx("thead",{children:t.jsxs("tr",{className:"border-b bg-muted/50",children:[t.jsx("th",{className:"text-left p-3",children:"Tax Number"}),t.jsx("th",{className:"text-left p-3",children:"Employee Name"}),t.jsx("th",{className:"text-right p-3",children:"Gross Salary"}),t.jsx("th",{className:"text-right p-3",children:"PAYE"}),t.jsx("th",{className:"text-right p-3",children:"UIF (Emp)"}),t.jsx("th",{className:"text-right p-3",children:"UIF (Er)"}),t.jsx("th",{className:"text-right p-3",children:"SDL"}),t.jsx("th",{className:"text-center p-3 w-16",children:"Actions"})]})}),e[103]=Me):Me=e[103];let re;if(e[104]!==l||e[105]!==S||e[106]!==s.status||e[107]!==i){let Ie;e[109]!==S||e[110]!==s.status||e[111]!==i?(Ie=(g,f)=>t.jsxs("tr",{className:"border-b",children:[t.jsx("td",{className:"p-2",children:t.jsx(w,{value:g.tax_number||"",onChange:o=>i(f,"tax_number",o.target.value),className:"font-mono text-xs",placeholder:"Tax number",disabled:s.status==="submitted"})}),t.jsx("td",{className:"p-2",children:t.jsx(w,{value:g.employee_name||"",onChange:o=>i(f,"employee_name",o.target.value),placeholder:"Employee name",disabled:s.status==="submitted"})}),t.jsx("td",{className:"p-2",children:t.jsx(w,{type:"number",step:"0.01",value:g.gross_salary||"",onChange:o=>i(f,"gross_salary",parseFloat(o.target.value)||0),className:"text-right",disabled:s.status==="submitted"})}),t.jsx("td",{className:"p-2",children:t.jsx(w,{type:"number",step:"0.01",value:g.paye||"",onChange:o=>i(f,"paye",parseFloat(o.target.value)||0),className:"text-right",disabled:s.status==="submitted"})}),t.jsx("td",{className:"p-2",children:t.jsx(w,{type:"number",step:"0.01",value:g.uif_employee||"",onChange:o=>i(f,"uif_employee",parseFloat(o.target.value)||0),className:"text-right",disabled:s.status==="submitted"})}),t.jsx("td",{className:"p-2",children:t.jsx(w,{type:"number",step:"0.01",value:g.uif_employer||"",onChange:o=>i(f,"uif_employer",parseFloat(o.target.value)||0),className:"text-right",disabled:s.status==="submitted"})}),t.jsx("td",{className:"p-2",children:t.jsx(w,{type:"number",step:"0.01",value:g.sdl||"",onChange:o=>i(f,"sdl",parseFloat(o.target.value)||0),className:"text-right",disabled:s.status==="submitted"})}),t.jsx("td",{className:"p-2 text-center",children:t.jsx(ne,{type:"button",variant:"ghost",size:"icon",onClick:()=>S(f),disabled:s.status==="submitted",className:"text-destructive hover:text-destructive",children:t.jsx(dt,{className:"h-4 w-4"})})})]},g.employee_id||f),e[109]=S,e[110]=s.status,e[111]=i,e[112]=Ie):Ie=e[112],re=l.map(Ie),e[104]=l,e[105]=S,e[106]=s.status,e[107]=i,e[108]=re}else re=e[108];let ie;e[113]!==re?(ie=t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[Me,t.jsx("tbody",{children:re})]})}),e[113]=re,e[114]=ie):ie=e[114];let oe;e[115]!==l.length?(oe=l.length===0&&t.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'No employees added. Click "Add Employee" to start.'}),e[115]=l.length,e[116]=oe):oe=e[116];let ce;e[117]!==ie||e[118]!==oe?(ce=t.jsxs(C,{children:[ie,oe]}),e[117]=ie,e[118]=oe,e[119]=ce):ce=e[119],e[120]!==ae||e[121]!==ce?(_=t.jsxs(A,{children:[ae,ce]}),e[120]=ae,e[121]=ce,e[122]=_):_=e[122],F=A,k=C,R="pt-6",I="grid gap-4 md:grid-cols-2";let De;e[123]===Symbol.for("react.memo_cache_sentinel")?(De=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Number of Employees"}),e[123]=De):De=e[123],L=t.jsxs("div",{children:[De,t.jsx("p",{className:"text-xl font-bold",children:r.employees_count})]}),e[124]===Symbol.for("react.memo_cache_sentinel")?(h=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Gross Remuneration"}),e[124]=h):h=e[124],M="text-xl font-bold",D=v(r.total_gross),e[17]=me,e[18]=Be,e[19]=l,e[20]=Ue,e[21]=S,e[22]=s.data.business?.name,e[23]=s.data.business?.paye_reference,e[24]=s.data.business?.sdl_reference,e[25]=s.data.business?.uif_reference,e[26]=s.period_display,e[27]=s.status,e[28]=i,e[29]=k,e[30]=F,e[31]=P,e[32]=M,e[33]=D,e[34]=h,e[35]=I,e[36]=L,e[37]=R,e[38]=B,e[39]=b,e[40]=j,e[41]=y,e[42]=_,e[43]=U,e[44]=G,e[45]=N}else k=e[29],F=e[30],P=e[31],M=e[32],D=e[33],h=e[34],I=e[35],L=e[36],R=e[37],B=e[38],b=e[39],j=e[40],y=e[41],_=e[42],U=e[43],G=e[44],N=e[45];let $;e[125]!==M||e[126]!==D?($=t.jsx("p",{className:M,children:D}),e[125]=M,e[126]=D,e[127]=$):$=e[127];let H;e[128]!==h||e[129]!==$?(H=t.jsxs("div",{children:[h,$]}),e[128]=h,e[129]=$,e[130]=H):H=e[130];let z;e[131]!==I||e[132]!==L||e[133]!==H?(z=t.jsxs("div",{className:I,children:[L,H]}),e[131]=I,e[132]=L,e[133]=H,e[134]=z):z=e[134];let Y;e[135]!==k||e[136]!==R||e[137]!==z?(Y=t.jsx(k,{className:R,children:z}),e[135]=k,e[136]=R,e[137]=z,e[138]=Y):Y=e[138];let Z;e[139]!==F||e[140]!==Y?(Z=t.jsx(F,{children:Y}),e[139]=F,e[140]=Y,e[141]=Z):Z=e[141];let ye;e[142]===Symbol.for("react.memo_cache_sentinel")?(ye=t.jsx(ne,{type:"button",variant:"outline",asChild:!0,children:t.jsx(Ve,{href:"/compliance/emp201",children:"Cancel"})}),e[142]=ye):ye=e[142];const Ge=s.status==="submitted";let _e;e[143]===Symbol.for("react.memo_cache_sentinel")?(_e=t.jsx(et,{className:"mr-2 h-4 w-4"}),e[143]=_e):_e=e[143];let O;e[144]!==Ge?(O=t.jsxs("div",{className:"flex justify-end gap-2",children:[ye,t.jsxs(ne,{type:"submit",disabled:Ge,children:[_e,"Save Changes"]})]}),e[144]=Ge,e[145]=O):O=e[145];let q;e[146]!==B||e[147]!==b||e[148]!==j||e[149]!==y||e[150]!==_||e[151]!==Z||e[152]!==O?(q=t.jsxs("div",{className:B,children:[b,j,y,_,Z,O]}),e[146]=B,e[147]=b,e[148]=j,e[149]=y,e[150]=_,e[151]=Z,e[152]=O,e[153]=q):q=e[153];let J;e[154]!==U||e[155]!==q?(J=t.jsx("form",{onSubmit:U,children:q}),e[154]=U,e[155]=q,e[156]=J):J=e[156];let Ne;return e[157]!==P||e[158]!==G||e[159]!==N||e[160]!==J?(Ne=t.jsxs(P,{breadcrumbs:G,children:[N,J]}),e[157]=P,e[158]=G,e[159]=N,e[160]=J,e[161]=Ne):Ne=e[161],Ne}function ut(a){const e=a.reduce(bt,0),s=a.reduce(ht,0),x=a.reduce(xt,0),l=a.reduce(ft,0),T=a.reduce(pt,0);return{employees_count:a.length,total_gross:e,total_paye:s,total_uif_employee:x,total_uif_employer:l,total_uif:x+l,total_sdl:T,total_liability:s+x+l+T}}function pt(a,e){return a+(Number(e.sdl)||0)}function ft(a,e){return a+(Number(e.uif_employer)||0)}function xt(a,e){return a+(Number(e.uif_employee)||0)}function ht(a,e){return a+(Number(e.paye)||0)}function bt(a,e){return a+(Number(e.gross_salary)||0)}function jt(a){return new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(a)}export{ts as default};
