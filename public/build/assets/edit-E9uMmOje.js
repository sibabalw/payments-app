import{j as e,H as x,L as j,r as m,u as D}from"./app-DlRq_5I-.js";import{I as n}from"./input-error-N6fjUyr3.js";import{B as c}from"./createLucideIcon-DfICN48Q.js";import{C as h,c as f,a as T,b as k}from"./card-BpVtH_kK.js";import{I as g}from"./input-EpzQuicb.js";import{L as d}from"./label-DDSUlu2q.js";import{S as I,a as L,b as A,c as M,d as y}from"./select-Ba948_P_.js";import{T as H}from"./textarea-DfcGaLQK.js";import{C as v}from"./calendar-Cq1Ld_Lm.js";import{A as N,P as b,a as _,b as P}from"./app-layout-B1Fh94R8.js";import{C}from"./calendar-B2gwonc8.js";import{f as p}from"./format-BS8Ay9AX.js";/* empty css            */import"./index-BC94lCP7.js";import"./index-BlmLjsw4.js";import"./chevron-down-DBn0VZdD.js";import"./x-RYBOgl4T.js";import"./index-D8-tZbVS.js";import"./index-qKkV1P3H.js";import"./chevron-right-FxPRos96.js";import"./check-57gXsznI.js";import"./chevron-up-C3E08OMs.js";import"./chevron-left-CeavYiYk.js";import"./app-sidebar-header-DViv9NrM.js";import"./index-B1IOqWwB.js";import"./appearance-dropdown-kWEtid9a.js";import"./index-Dl5gb-Kb.js";import"./index-CcLcdVZM.js";import"./log-out-BKe7v_gT.js";import"./badge-DkQNu0Ve.js";import"./proxy-DB18oa0z.js";import"./circle-check-CTpeSp7r.js";import"./loader-circle-DB6syjKq.js";import"./circle-x-DCpd_SlB.js";import"./circle-alert-BMPPz6PA.js";import"./plus-CLDQrfk-.js";import"./credit-card-BEASO8FW.js";import"./dollar-sign-CAhazD9z.js";import"./message-square-BIfa93Ti.js";import"./file-text-DtJO93Xu.js";import"./users-DkXA52Op.js";import"./user-check-BIHcPLhA.js";import"./clock-eJfs3CCo.js";import"./shield-Bc8H0Rwn.js";const S=[{title:"Payroll",href:"/payroll"},{title:"Bonuses",href:"/payroll/bonuses"},{title:"Edit Bonus",href:"#"}];function De({payment:s,businesses:U,employees:q}){if(!s)return e.jsxs(N,{breadcrumbs:S,children:[e.jsx(x,{title:"Edit Bonus"}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:e.jsx(h,{children:e.jsxs(f,{className:"py-10 text-center",children:[e.jsx("p",{className:"text-muted-foreground",children:"Bonus not found."}),e.jsx(j,{href:"/payroll/bonuses",className:"mt-4 inline-block",children:e.jsx(c,{variant:"outline",children:"Back to Bonuses"})})]})})})]});const[i,B]=m.useState(s.period_start?new Date(s.period_start):void 0),[a,w]=m.useState(s.period_end?new Date(s.period_end):void 0),{data:r,setData:o,put:E,processing:u,errors:l}=D({business_id:s.business_id,employee_id:s.employee_id||null,name:s.name||"",type:s.type||"fixed",amount:s.amount||"",adjustment_type:s.adjustment_type||"addition",period_start:s.period_start||"",period_end:s.period_end||"",is_active:s.is_active??!0,description:s.description||""});m.useEffect(()=>{i&&o("period_start",p(i,"yyyy-MM-dd"))},[i]),m.useEffect(()=>{a&&o("period_end",p(a,"yyyy-MM-dd"))},[a]);const F=t=>{t.preventDefault(),E(`/payroll-payments/${s.id}`)};return e.jsxs(N,{breadcrumbs:S,children:[e.jsx(x,{title:"Edit Payment"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Edit Payment"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Update payment details"})]})}),e.jsxs(h,{children:[e.jsx(T,{children:e.jsx(k,{children:"Bonus Details"})}),e.jsx(f,{children:e.jsxs("form",{onSubmit:F,className:"space-y-6",children:[s.employee&&e.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Bonus for:"}),e.jsx("p",{className:"font-medium",children:s.employee.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"name",children:"Bonus Type"}),e.jsx(g,{id:"name",value:r.name,onChange:t=>o("name",t.target.value),placeholder:"e.g., Performance Bonus",required:!0}),e.jsx(n,{message:l.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"type",children:"Amount Type"}),e.jsxs(I,{value:r.type,onValueChange:t=>o("type",t),children:[e.jsx(L,{id:"type",children:e.jsx(A,{})}),e.jsxs(M,{children:[e.jsx(y,{value:"fixed",children:"Fixed amount"}),e.jsx(y,{value:"percentage",children:"Percentage of salary"})]})]}),e.jsx(n,{message:l.type})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:"amount",children:[r.type==="percentage"?"Percentage":"Amount",r.type==="percentage"&&" (0-100)"]}),e.jsx(g,{id:"amount",type:"number",step:(r.type==="percentage","0.01"),min:"0",max:r.type==="percentage"?"100":void 0,value:r.amount,onChange:t=>o("amount",t.target.value),required:!0}),e.jsx(n,{message:l.amount})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"From Date"}),e.jsxs(b,{children:[e.jsx(_,{asChild:!0,children:e.jsxs(c,{type:"button",variant:"outline",className:"w-full justify-start text-left font-normal",children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),i?p(i,"PPP"):"Pick a date"]})}),e.jsx(P,{className:"w-auto p-0",align:"start",children:e.jsx(v,{mode:"single",selected:i,onSelect:B,initialFocus:!0})})]}),e.jsx(n,{message:l.period_start})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"To Date"}),e.jsxs(b,{children:[e.jsx(_,{asChild:!0,children:e.jsxs(c,{type:"button",variant:"outline",className:"w-full justify-start text-left font-normal",children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),a?p(a,"PPP"):"Pick a date"]})}),e.jsx(P,{className:"w-auto p-0",align:"start",children:e.jsx(v,{mode:"single",selected:a,onSelect:w,initialFocus:!0})})]}),e.jsx(n,{message:l.period_end})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(H,{id:"description",value:r.description,onChange:t=>o("description",t.target.value),rows:3}),e.jsx(n,{message:l.description})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{href:"/payroll/bonuses",children:e.jsx(c,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(c,{type:"submit",disabled:u,children:u?"Updating...":"Update Bonus"})]})]})})]})]})]})}export{De as default};
