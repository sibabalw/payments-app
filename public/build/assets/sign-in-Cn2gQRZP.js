import{c as A,b as W,r as V,j as t,a as q,H as z}from"./app-Cuioih4f.js";import{I as P}from"./input-error-pri7ZzTk.js";import{T as G}from"./text-link-C-E_gyo7.js";import{B as R}from"./createLucideIcon-B5MOZI9f.js";import{I as $}from"./input-Bz7R7t4w.js";import{L as B}from"./label-C6Cf-NhP.js";import{S as H}from"./spinner-Cj9jpHVF.js";import{A as J}from"./auth-layout-B3ALS4VK.js";/* empty css            */import"./index-Bs_TJoq4.js";import"./loader-circle-BHZ8O1kv.js";import"./app-logo-icon-CQr6Xx-P.js";import"./index-CcLcdVZM.js";function ae(L){const e=A.c(22),{status:h,error:g,otpSent:S,email:b,errors:p}=L,o=S===void 0?!1:S,D=b===void 0?"":b;let f;e[0]!==p?(f=p===void 0?{}:p,e[0]=p,e[1]=f):f=e[1];const k=f,{errors:N}=W().props,[s,F]=V.useState(D),[y,u]=V.useState(!1),j=N||k;let x;e[2]!==s?(x=m=>{m.preventDefault(),u(!0),q.post("/employee/send-otp",{email:s},{onSuccess:()=>{u(!1)},onError:()=>{u(!1)},onFinish:()=>{u(!1)}})},e[2]=s,e[3]=x):x=e[3];const E=x;let l;e[4]!==s?(l=(m,d)=>{d(!0),q.post("/employee/verify-otp",{email:s,otp:m},{onFinish:()=>{d(!1)}})},e[4]=s,e[5]=l):l=e[5];const v=l;let n;e[6]===Symbol.for("react.memo_cache_sentinel")?(n=t.jsx(z,{title:"Employee Sign-In"}),e[6]=n):n=e[6];let r;e[7]!==h?(r=h&&t.jsx("div",{className:"mb-4 text-center text-sm font-medium text-green-600",children:h}),e[7]=h,e[8]=r):r=e[8];let i;e[9]!==g?(i=g&&t.jsx("div",{className:"mb-4 text-center text-sm font-medium text-red-600",children:g}),e[9]=g,e[10]=i):i=e[10];let a;e[11]!==s||e[12]!==j||e[13]!==E||e[14]!==v||e[15]!==o||e[16]!==y?(a=o?t.jsx(K,{email:s,onVerify:(m,d)=>v(m,d),errors:j}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("form",{onSubmit:E,className:"space-y-6",children:[t.jsxs("div",{className:"grid gap-2",children:[t.jsx(B,{htmlFor:"email",children:"Email address"}),t.jsx($,{id:"email",type:"email",name:"email",value:s,onChange:m=>F(m.target.value),required:!0,autoFocus:!0,autoComplete:"email",placeholder:"email@example.com"}),t.jsx(P,{message:j.email})]}),t.jsxs(R,{type:"submit",className:"w-full",disabled:y,children:[y&&t.jsx(H,{}),"Send Verification Code"]})]}),t.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:[t.jsx("span",{children:"Are you a business owner? "}),t.jsx(G,{href:"/employees",children:"View employees"})]})]}),e[11]=s,e[12]=j,e[13]=E,e[14]=v,e[15]=o,e[16]=y,e[17]=a):a=e[17];let c;return e[18]!==a||e[19]!==r||e[20]!==i?(c=t.jsxs(J,{title:"Employee Sign-In",description:"Enter your email to receive a verification code",children:[n,r,i,a]}),e[18]=a,e[19]=r,e[20]=i,e[21]=c):c=e[21],c}function K(L){const e=A.c(36),{email:h,onVerify:g,errors:S}=L;let b;e[0]!==S?(b=S===void 0?{}:S,e[0]=S,e[1]=b):b=e[1];const p=b,[o,D]=V.useState(""),[f,k]=V.useState(!1);let N;e[2]===Symbol.for("react.memo_cache_sentinel")?(N={},e[2]=N):N=e[2];const[s,F]=V.useState(N),y=p.otp?p:s;let u;e[3]!==g||e[4]!==o?(u=I=>{if(I.preventDefault(),F({}),o.length!==6||!/^\d{6}$/.test(o)){F({otp:"Please enter a valid 6-digit code."});return}g(o,k)},e[3]=g,e[4]=o,e[5]=u):u=e[5];const j=u;let x;e[6]!==s.otp||e[7]!==p.otp?(x=I=>{const T=I.replace(/\D/g,"").slice(0,6);D(T),(s.otp||p.otp)&&F({})},e[6]=s.otp,e[7]=p.otp,e[8]=x):x=e[8];const E=x;let l;e[9]!==h?(l=t.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["We've sent a 6-digit verification code to"," ",t.jsx("span",{className:"font-medium text-foreground",children:h})]}),e[9]=h,e[10]=l):l=e[10];let v;e[11]===Symbol.for("react.memo_cache_sentinel")?(v=t.jsx(B,{htmlFor:"otp",children:"Verification Code"}),e[11]=v):v=e[11];let n;e[12]!==E?(n=I=>E(I.target.value),e[12]=E,e[13]=n):n=e[13];let r;e[14]!==o||e[15]!==n?(r=t.jsx($,{id:"otp",type:"text",name:"otp",value:o,onChange:n,required:!0,autoFocus:!0,autoComplete:"one-time-code",placeholder:"000000",maxLength:6,className:"text-center text-2xl font-mono tracking-widest"}),e[14]=o,e[15]=n,e[16]=r):r=e[16];let i;e[17]!==y.otp?(i=t.jsx(P,{message:y.otp}),e[17]=y.otp,e[18]=i):i=e[18];let a;e[19]===Symbol.for("react.memo_cache_sentinel")?(a=t.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter the 6-digit code from your email"}),e[19]=a):a=e[19];let c;e[20]!==i||e[21]!==r?(c=t.jsxs("div",{className:"grid gap-2",children:[v,r,i,a]}),e[20]=i,e[21]=r,e[22]=c):c=e[22];const m=f||o.length!==6;let d;e[23]!==f?(d=f&&t.jsx(H,{}),e[23]=f,e[24]=d):d=e[24];let _;e[25]!==m||e[26]!==d?(_=t.jsxs(R,{type:"submit",className:"w-full",disabled:m,children:[d,"Verify Code"]}),e[25]=m,e[26]=d,e[27]=_):_=e[27];let C;e[28]!==j||e[29]!==c||e[30]!==_?(C=t.jsxs("form",{onSubmit:j,className:"space-y-6",children:[c,_]}),e[28]=j,e[29]=c,e[30]=_,e[31]=C):C=e[31];let w;e[32]===Symbol.for("react.memo_cache_sentinel")?(w=t.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["Didn't receive the code?"," ",t.jsx("button",{type:"button",onClick:M,className:"text-primary hover:underline",children:"Request a new one"})]}),e[32]=w):w=e[32];let O;return e[33]!==C||e[34]!==l?(O=t.jsxs("div",{className:"space-y-6",children:[l,C,w]}),e[33]=C,e[34]=l,e[35]=O):O=e[35],O}function M(){return q.reload()}export{ae as default};
