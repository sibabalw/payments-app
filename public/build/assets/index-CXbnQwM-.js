import{c as os,j as s,H as ds,L as Ye}from"./app-BRoNAUIM.js";import{C as r,a as m,b as o,c as d}from"./card-Bag7gWUQ.js";import{B as $e}from"./x-pZV5lkp5.js";import{A as xs}from"./admin-layout-BnJz0fFz.js";import{B as fs,a as ls}from"./BarChart-TYEj3kCk.js";import{R as hs,C as us,X as js,Y as ps,T as gs,L as Ns}from"./CartesianChart-IPqX-nNx.js";import{B as as}from"./appearance-dropdown-BEtN_wNg.js";import{W as cs}from"./app-sidebar-header-BbzcXdQi.js";import{C as Ge}from"./circle-check-big-BAJqmGwp.js";import{T as bs}from"./triangle-alert-D6PyCIl6.js";import{B as ys}from"./ban-DyR2-SzY.js";import{U as ns}from"./users-CEYKQlp0.js";import{S as _s}from"./shield-Kl3V0fgW.js";import{T as ws}from"./trending-up-Dcxya_3H.js";import{D as vs}from"./dollar-sign-CDLUu5fH.js";import{C as is}from"./circle-x-C4YAnoMU.js";import{C as Ie}from"./clock-DWicTrer.js";import{A as rs}from"./arrow-right-DVsSWtwF.js";/* empty css            */import"./message-square-CEp_sz_O.js";import"./file-text-FWLsz4T5.js";import"./lock-Dth4hMuh.js";import"./chart-column-DlXi8TWy.js";import"./index-CBJSSLbQ.js";import"./index-Cfp_L9w6.js";import"./log-out-MC42nTzo.js";import"./index-BohsM0ZD.js";const Ss=[{title:"Admin",href:"/admin"},{title:"Dashboard",href:"/admin"}];function tt(n){const e=os.c(157),{businessMetrics:c,userMetrics:i,paymentJobMetrics:l,payrollJobMetrics:a,totalEscrowBalance:qe,recentBusinesses:ce,recentStatusChanges:ne,monthlyPayments:Oe,monthlyPayroll:ae}=n,x=ks,es=As,ss=Cs;let ie;if(e[0]!==Oe||e[1]!==ae){let t;e[3]!==ae?(t=(ts,ms)=>({month:ts.month,payments:Number(ts.total),payroll:Number(ae[ms]?.total||0)}),e[3]=ae,e[4]=t):t=e[4],ie=Oe.map(t),e[0]=Oe,e[1]=ae,e[2]=ie}else ie=e[2];const re=ie,Qe=Number(l.succeeded.total_amount)+Number(a.succeeded.total_amount);let me;e[5]===Symbol.for("react.memo_cache_sentinel")?(me=s.jsx(ds,{title:"Admin Dashboard"}),e[5]=me):me=e[5];let oe;e[6]===Symbol.for("react.memo_cache_sentinel")?(oe=s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Admin Dashboard"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Platform-wide metrics and management"})]}),e[6]=oe):oe=e[6];let de;e[7]===Symbol.for("react.memo_cache_sentinel")?(de=s.jsx(Ye,{href:"/admin/businesses",children:s.jsxs($e,{variant:"outline",children:[s.jsx(as,{className:"mr-2 h-4 w-4"}),"Manage Businesses"]})}),e[7]=de):de=e[7];let xe;e[8]===Symbol.for("react.memo_cache_sentinel")?(xe=s.jsxs("div",{className:"flex items-center justify-between",children:[oe,s.jsxs("div",{className:"flex gap-2",children:[de,s.jsx(Ye,{href:"/admin/escrow",children:s.jsxs($e,{variant:"outline",children:[s.jsx(cs,{className:"mr-2 h-4 w-4"}),"Escrow Management"]})})]})]}),e[8]=xe):xe=e[8];let fe;e[9]===Symbol.for("react.memo_cache_sentinel")?(fe=s.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(o,{className:"text-sm font-medium",children:"Total Businesses"}),s.jsx(as,{className:"h-4 w-4 text-muted-foreground"})]}),e[9]=fe):fe=e[9];let f;e[10]!==c.total?(f=s.jsx("div",{className:"text-2xl font-bold",children:c.total}),e[10]=c.total,e[11]=f):f=e[11];let he;e[12]===Symbol.for("react.memo_cache_sentinel")?(he=s.jsx(Ge,{className:"h-3 w-3"}),e[12]=he):he=e[12];let h;e[13]!==c.active?(h=s.jsxs("span",{className:"flex items-center gap-1 text-green-600",children:[he,c.active," active"]}),e[13]=c.active,e[14]=h):h=e[14];let ue;e[15]===Symbol.for("react.memo_cache_sentinel")?(ue=s.jsx(bs,{className:"h-3 w-3"}),e[15]=ue):ue=e[15];let u;e[16]!==c.suspended?(u=s.jsxs("span",{className:"flex items-center gap-1 text-yellow-600",children:[ue,c.suspended," suspended"]}),e[16]=c.suspended,e[17]=u):u=e[17];let je;e[18]===Symbol.for("react.memo_cache_sentinel")?(je=s.jsx(ys,{className:"h-3 w-3"}),e[18]=je):je=e[18];let j;e[19]!==c.banned?(j=s.jsxs("span",{className:"flex items-center gap-1 text-red-600",children:[je,c.banned," banned"]}),e[19]=c.banned,e[20]=j):j=e[20];let p;e[21]!==u||e[22]!==j||e[23]!==h?(p=s.jsxs("div",{className:"flex gap-2 mt-2 text-xs",children:[h,u,j]}),e[21]=u,e[22]=j,e[23]=h,e[24]=p):p=e[24];let g;e[25]!==p||e[26]!==f?(g=s.jsxs(r,{children:[fe,s.jsxs(d,{children:[f,p]})]}),e[25]=p,e[26]=f,e[27]=g):g=e[27];let pe;e[28]===Symbol.for("react.memo_cache_sentinel")?(pe=s.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(o,{className:"text-sm font-medium",children:"Total Users"}),s.jsx(ns,{className:"h-4 w-4 text-muted-foreground"})]}),e[28]=pe):pe=e[28];let N;e[29]!==i.total?(N=s.jsx("div",{className:"text-2xl font-bold",children:i.total}),e[29]=i.total,e[30]=N):N=e[30];let ge;e[31]===Symbol.for("react.memo_cache_sentinel")?(ge=s.jsx(_s,{className:"h-3 w-3"}),e[31]=ge):ge=e[31];let b;e[32]!==i.admins?(b=s.jsxs("span",{className:"flex items-center gap-1 text-primary",children:[ge,i.admins," admins"]}),e[32]=i.admins,e[33]=b):b=e[33];let Ne;e[34]===Symbol.for("react.memo_cache_sentinel")?(Ne=s.jsx(Ge,{className:"h-3 w-3"}),e[34]=Ne):Ne=e[34];let y;e[35]!==i.verified?(y=s.jsxs("span",{className:"flex items-center gap-1 text-green-600",children:[Ne,i.verified," verified"]}),e[35]=i.verified,e[36]=y):y=e[36];let _;e[37]!==b||e[38]!==y?(_=s.jsxs("div",{className:"flex gap-2 mt-2 text-xs",children:[b,y]}),e[37]=b,e[38]=y,e[39]=_):_=e[39];let w;e[40]!==N||e[41]!==_?(w=s.jsxs(r,{children:[pe,s.jsxs(d,{children:[N,_]})]}),e[40]=N,e[41]=_,e[42]=w):w=e[42];let be;e[43]===Symbol.for("react.memo_cache_sentinel")?(be=s.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(o,{className:"text-sm font-medium",children:"Total Escrow Balance"}),s.jsx(cs,{className:"h-4 w-4 text-primary"})]}),e[43]=be):be=e[43];let v;e[44]!==qe?(v=x(qe),e[44]=qe,e[45]=v):v=e[45];let S;e[46]!==v?(S=s.jsx("div",{className:"text-2xl font-bold text-primary",children:v}),e[46]=v,e[47]=S):S=e[47];let ye;e[48]===Symbol.for("react.memo_cache_sentinel")?(ye=s.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all businesses"}),e[48]=ye):ye=e[48];let C;e[49]!==S?(C=s.jsxs(r,{children:[be,s.jsxs(d,{children:[S,ye]})]}),e[49]=S,e[50]=C):C=e[50];let _e;e[51]===Symbol.for("react.memo_cache_sentinel")?(_e=s.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(o,{className:"text-sm font-medium",children:"Total Processed"}),s.jsx(ws,{className:"h-4 w-4 text-green-600"})]}),e[51]=_e):_e=e[51];let A;e[52]!==Qe?(A=x(Qe),e[52]=Qe,e[53]=A):A=e[53];let k;e[54]!==A?(k=s.jsx("div",{className:"text-2xl font-bold text-green-600",children:A}),e[54]=A,e[55]=k):k=e[55];let we;e[56]===Symbol.for("react.memo_cache_sentinel")?(we=s.jsx("p",{className:"text-xs text-muted-foreground",children:"Successful payments & payroll"}),e[56]=we):we=e[56];let B;e[57]!==k?(B=s.jsxs(r,{children:[_e,s.jsxs(d,{children:[k,we]})]}),e[57]=k,e[58]=B):B=e[58];let P;e[59]!==g||e[60]!==w||e[61]!==C||e[62]!==B?(P=s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[g,w,C,B]}),e[59]=g,e[60]=w,e[61]=C,e[62]=B,e[63]=P):P=e[63];let ve;e[64]===Symbol.for("react.memo_cache_sentinel")?(ve=s.jsx(m,{children:s.jsxs(o,{className:"flex items-center gap-2",children:[s.jsx(vs,{className:"h-5 w-5 text-green-600"}),"Payment Jobs"]})}),e[64]=ve):ve=e[64];let Se,Ce;e[65]===Symbol.for("react.memo_cache_sentinel")?(Se=s.jsx(Ge,{className:"h-4 w-4 text-green-600"}),Ce=s.jsx("p",{className:"text-sm font-medium",children:"Succeeded"}),e[65]=Se,e[66]=Ce):(Se=e[65],Ce=e[66]);let T;e[67]!==l.succeeded.count?(T=s.jsx("p",{className:"text-lg font-bold",children:l.succeeded.count}),e[67]=l.succeeded.count,e[68]=T):T=e[68];let D;e[69]!==l.succeeded.total_amount?(D=x(l.succeeded.total_amount),e[69]=l.succeeded.total_amount,e[70]=D):D=e[70];let R;e[71]!==D?(R=s.jsx("p",{className:"text-xs text-muted-foreground",children:D}),e[71]=D,e[72]=R):R=e[72];let M;e[73]!==T||e[74]!==R?(M=s.jsxs("div",{className:"flex items-center gap-2",children:[Se,s.jsxs("div",{children:[Ce,T,R]})]}),e[73]=T,e[74]=R,e[75]=M):M=e[75];let Ae,ke;e[76]===Symbol.for("react.memo_cache_sentinel")?(Ae=s.jsx(is,{className:"h-4 w-4 text-red-600"}),ke=s.jsx("p",{className:"text-sm font-medium",children:"Failed"}),e[76]=Ae,e[77]=ke):(Ae=e[76],ke=e[77]);let L;e[78]!==l.failed.count?(L=s.jsx("p",{className:"text-lg font-bold",children:l.failed.count}),e[78]=l.failed.count,e[79]=L):L=e[79];let U;e[80]!==l.failed.total_amount?(U=x(l.failed.total_amount),e[80]=l.failed.total_amount,e[81]=U):U=e[81];let E;e[82]!==U?(E=s.jsx("p",{className:"text-xs text-muted-foreground",children:U}),e[82]=U,e[83]=E):E=e[83];let z;e[84]!==L||e[85]!==E?(z=s.jsxs("div",{className:"flex items-center gap-2",children:[Ae,s.jsxs("div",{children:[ke,L,E]})]}),e[84]=L,e[85]=E,e[86]=z):z=e[86];let Be,Pe;e[87]===Symbol.for("react.memo_cache_sentinel")?(Be=s.jsx(Ie,{className:"h-4 w-4 text-yellow-600"}),Pe=s.jsx("p",{className:"text-sm font-medium",children:"Pending"}),e[87]=Be,e[88]=Pe):(Be=e[87],Pe=e[88]);let F;e[89]!==l.pending.count?(F=s.jsxs("div",{className:"flex items-center gap-2",children:[Be,s.jsxs("div",{children:[Pe,s.jsx("p",{className:"text-lg font-bold",children:l.pending.count})]})]}),e[89]=l.pending.count,e[90]=F):F=e[90];let Te,De;e[91]===Symbol.for("react.memo_cache_sentinel")?(Te=s.jsx(Ie,{className:"h-4 w-4 text-blue-600"}),De=s.jsx("p",{className:"text-sm font-medium",children:"Processing"}),e[91]=Te,e[92]=De):(Te=e[91],De=e[92]);let J;e[93]!==l.processing.count?(J=s.jsxs("div",{className:"flex items-center gap-2",children:[Te,s.jsxs("div",{children:[De,s.jsx("p",{className:"text-lg font-bold",children:l.processing.count})]})]}),e[93]=l.processing.count,e[94]=J):J=e[94];let H;e[95]!==M||e[96]!==z||e[97]!==F||e[98]!==J?(H=s.jsxs(r,{children:[ve,s.jsx(d,{children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[M,z,F,J]})})]}),e[95]=M,e[96]=z,e[97]=F,e[98]=J,e[99]=H):H=e[99];let Re;e[100]===Symbol.for("react.memo_cache_sentinel")?(Re=s.jsx(m,{children:s.jsxs(o,{className:"flex items-center gap-2",children:[s.jsx(ns,{className:"h-5 w-5 text-blue-600"}),"Payroll Jobs"]})}),e[100]=Re):Re=e[100];let Me,Le;e[101]===Symbol.for("react.memo_cache_sentinel")?(Me=s.jsx(Ge,{className:"h-4 w-4 text-green-600"}),Le=s.jsx("p",{className:"text-sm font-medium",children:"Succeeded"}),e[101]=Me,e[102]=Le):(Me=e[101],Le=e[102]);let K;e[103]!==a.succeeded.count?(K=s.jsx("p",{className:"text-lg font-bold",children:a.succeeded.count}),e[103]=a.succeeded.count,e[104]=K):K=e[104];let X;e[105]!==a.succeeded.total_amount?(X=x(a.succeeded.total_amount),e[105]=a.succeeded.total_amount,e[106]=X):X=e[106];let Z;e[107]!==X?(Z=s.jsx("p",{className:"text-xs text-muted-foreground",children:X}),e[107]=X,e[108]=Z):Z=e[108];let V;e[109]!==K||e[110]!==Z?(V=s.jsxs("div",{className:"flex items-center gap-2",children:[Me,s.jsxs("div",{children:[Le,K,Z]})]}),e[109]=K,e[110]=Z,e[111]=V):V=e[111];let Ue,Ee;e[112]===Symbol.for("react.memo_cache_sentinel")?(Ue=s.jsx(is,{className:"h-4 w-4 text-red-600"}),Ee=s.jsx("p",{className:"text-sm font-medium",children:"Failed"}),e[112]=Ue,e[113]=Ee):(Ue=e[112],Ee=e[113]);let W;e[114]!==a.failed.count?(W=s.jsx("p",{className:"text-lg font-bold",children:a.failed.count}),e[114]=a.failed.count,e[115]=W):W=e[115];let Y;e[116]!==a.failed.total_amount?(Y=x(a.failed.total_amount),e[116]=a.failed.total_amount,e[117]=Y):Y=e[117];let $;e[118]!==Y?($=s.jsx("p",{className:"text-xs text-muted-foreground",children:Y}),e[118]=Y,e[119]=$):$=e[119];let G;e[120]!==W||e[121]!==$?(G=s.jsxs("div",{className:"flex items-center gap-2",children:[Ue,s.jsxs("div",{children:[Ee,W,$]})]}),e[120]=W,e[121]=$,e[122]=G):G=e[122];let ze,Fe;e[123]===Symbol.for("react.memo_cache_sentinel")?(ze=s.jsx(Ie,{className:"h-4 w-4 text-yellow-600"}),Fe=s.jsx("p",{className:"text-sm font-medium",children:"Pending"}),e[123]=ze,e[124]=Fe):(ze=e[123],Fe=e[124]);let I;e[125]!==a.pending.count?(I=s.jsxs("div",{className:"flex items-center gap-2",children:[ze,s.jsxs("div",{children:[Fe,s.jsx("p",{className:"text-lg font-bold",children:a.pending.count})]})]}),e[125]=a.pending.count,e[126]=I):I=e[126];let Je,He;e[127]===Symbol.for("react.memo_cache_sentinel")?(Je=s.jsx(Ie,{className:"h-4 w-4 text-blue-600"}),He=s.jsx("p",{className:"text-sm font-medium",children:"Processing"}),e[127]=Je,e[128]=He):(Je=e[127],He=e[128]);let q;e[129]!==a.processing.count?(q=s.jsxs("div",{className:"flex items-center gap-2",children:[Je,s.jsxs("div",{children:[He,s.jsx("p",{className:"text-lg font-bold",children:a.processing.count})]})]}),e[129]=a.processing.count,e[130]=q):q=e[130];let O;e[131]!==V||e[132]!==G||e[133]!==I||e[134]!==q?(O=s.jsxs(r,{children:[Re,s.jsx(d,{children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[V,G,I,q]})})]}),e[131]=V,e[132]=G,e[133]=I,e[134]=q,e[135]=O):O=e[135];let Q;e[136]!==H||e[137]!==O?(Q=s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[H,O]}),e[136]=H,e[137]=O,e[138]=Q):Q=e[138];let ee;e[139]!==re?(ee=re.length>0&&s.jsxs(r,{children:[s.jsx(m,{children:s.jsx(o,{children:"Monthly Trends (Last 6 Months)"})}),s.jsx(d,{children:s.jsx(hs,{width:"100%",height:300,children:s.jsxs(fs,{data:re,children:[s.jsx(us,{strokeDasharray:"3 3",className:"stroke-muted"}),s.jsx(js,{dataKey:"month",className:"text-xs",tick:{fontSize:12}}),s.jsx(ps,{className:"text-xs",tick:{fontSize:12},tickFormatter:t=>x(t)}),s.jsx(gs,{formatter:t=>x(t),contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))"}}),s.jsx(Ns,{}),s.jsx(ls,{dataKey:"payments",fill:"#22c55e",name:"Payments",radius:[4,4,0,0]}),s.jsx(ls,{dataKey:"payroll",fill:"#3b82f6",name:"Payroll",radius:[4,4,0,0]})]})})})]}),e[139]=re,e[140]=ee):ee=e[140];let Ke;e[141]===Symbol.for("react.memo_cache_sentinel")?(Ke=s.jsx(o,{children:"Recent Businesses"}),e[141]=Ke):Ke=e[141];let Xe;e[142]===Symbol.for("react.memo_cache_sentinel")?(Xe=s.jsxs(m,{className:"flex flex-row items-center justify-between",children:[Ke,s.jsx(Ye,{href:"/admin/businesses",children:s.jsxs($e,{variant:"ghost",size:"sm",children:["View All ",s.jsx(rs,{className:"ml-1 h-4 w-4"})]})})]}),e[142]=Xe):Xe=e[142];let se;e[143]!==ce?(se=s.jsxs(r,{children:[Xe,s.jsx(d,{children:ce.length>0?s.jsx("div",{className:"space-y-4",children:ce.slice(0,5).map(t=>s.jsxs("div",{className:"flex items-center justify-between border-b pb-3 last:border-0",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:t.name}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.owner?.name||"Unknown"," - ",es(t.created_at)]})]}),ss(t.status)]},t.id))}):s.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No businesses yet"})})]}),e[143]=ce,e[144]=se):se=e[144];let Ze;e[145]===Symbol.for("react.memo_cache_sentinel")?(Ze=s.jsx(o,{children:"Recent Status Changes"}),e[145]=Ze):Ze=e[145];let Ve;e[146]===Symbol.for("react.memo_cache_sentinel")?(Ve=s.jsxs(m,{className:"flex flex-row items-center justify-between",children:[Ze,s.jsx(Ye,{href:"/admin/businesses?sort=status_changed_at&direction=desc",children:s.jsxs($e,{variant:"ghost",size:"sm",children:["View All ",s.jsx(rs,{className:"ml-1 h-4 w-4"})]})})]}),e[146]=Ve):Ve=e[146];let te;e[147]!==ne?(te=s.jsxs(r,{children:[Ve,s.jsx(d,{children:ne.length>0?s.jsx("div",{className:"space-y-4",children:ne.slice(0,5).map(t=>s.jsxs("div",{className:"flex items-center justify-between border-b pb-3 last:border-0",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:t.name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:t.status_changed_at&&es(t.status_changed_at)}),t.status_reason&&s.jsxs("p",{className:"text-xs text-muted-foreground truncate max-w-[200px]",children:["Reason: ",t.status_reason]})]}),ss(t.status)]},t.id))}):s.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No status changes yet"})})]}),e[147]=ne,e[148]=te):te=e[148];let le;e[149]!==se||e[150]!==te?(le=s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[se,te]}),e[149]=se,e[150]=te,e[151]=le):le=e[151];let We;return e[152]!==P||e[153]!==Q||e[154]!==ee||e[155]!==le?(We=s.jsxs(xs,{breadcrumbs:Ss,children:[me,s.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-4",children:[xe,P,Q,ee,le]})]}),e[152]=P,e[153]=Q,e[154]=ee,e[155]=le,e[156]=We):We=e[156],We}function Cs(n){const e={active:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",suspended:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",banned:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"};return s.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${e[n]||""}`,children:n.charAt(0).toUpperCase()+n.slice(1)})}function As(n){return new Date(n).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric"})}function ks(n){return new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(Number(n))}export{tt as default};
