import{c as je,r as P,j as t,a as _,H as ge,L as re}from"./app-Cuioih4f.js";import{a as oe,B as S}from"./createLucideIcon-B5MOZI9f.js";import{C as le,c as ie}from"./card-D9Y_bl1i.js";import{I as Ne}from"./input-Bz7R7t4w.js";import{A as ve}from"./admin-layout-D3aUvUXc.js";import{D as be,a as ye,b as we,c as Se,e as _e,d as Ae}from"./appearance-dropdown-Dd19dic0.js";import{C as Ce}from"./confirmation-dialog-oY6DdROP.js";import{U as me}from"./users-CdWaatQB.js";import{S as se}from"./shield-U7oFjP4d.js";import{U as ke}from"./user-check-BK_NFKR2.js";import{E as Ue}from"./ellipsis-CEA369YF.js";import{U as De}from"./user-plus-ByJKNbOw.js";import{C as Me}from"./chevron-left-CmpkFNLF.js";import{S as Le,A as ne}from"./search-CkMi886s.js";import{M as Re}from"./mail-CYGv6JLP.js";/* empty css            */import"./app-sidebar-header-C7CWWu21.js";import"./index-CfqSVWBk.js";import"./index-DcSYVg4d.js";import"./x-Bo-ZIIiE.js";import"./index-Bs_TJoq4.js";import"./index-CcLcdVZM.js";import"./log-out-DgGKhRGZ.js";import"./chevron-right-BmA-IvWf.js";import"./chevron-down-CZg7iP84.js";import"./index-Buc-yRrE.js";import"./message-square-DDbRZnKk.js";import"./file-text-CHp8TDnm.js";import"./lock-CXlW2eVG.js";import"./credit-card-DyUwoGG-.js";import"./chart-column-B4FHZxan.js";import"./index-EFDA_sBj.js";import"./dialog-B6pEUDaf.js";import"./spinner-Cj9jpHVF.js";import"./loader-circle-BHZ8O1kv.js";import"./info-CrYvFohm.js";import"./triangle-alert-DD3Kl8ol.js";const Te=[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h9",key:"1j9vog"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"m17 17 4 4",key:"1b3523"}],["path",{d:"m21 17-4 4",key:"uinynz"}]],Be=oe("MailX",Te);const Ee=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]],Fe=oe("ShieldOff",Ee),Ie=[{title:"Admin",href:"/admin"},{title:"Users",href:"/admin/users"}];function At(r){const e=je.c(72),{users:a,roleCounts:X,filters:l}=r,[n,ce]=P.useState(l.search),[o,de]=P.useState(l.role),[i,ae]=P.useState(null),[J,Z]=P.useState(!1),pe=He;let A;e[0]!==l.verified||e[1]!==o||e[2]!==n?(A=s=>{s.preventDefault(),_.get("/admin/users",{search:n,role:o,verified:l.verified},{preserveState:!0})},e[0]=l.verified,e[1]=o,e[2]=n,e[3]=A):A=e[3];const q=A;let C;e[4]!==l.verified||e[5]!==n?(C=s=>{de(s),_.get("/admin/users",{search:n,role:s,verified:l.verified},{preserveState:!0})},e[4]=l.verified,e[5]=n,e[6]=C):C=e[6];const K=C;let k;e[7]!==l?(k=s=>{const ue=l.sort===s&&l.direction==="asc"?"desc":"asc";_.get("/admin/users",{...l,sort:s,direction:ue},{preserveState:!0})},e[7]=l,e[8]=k):k=e[8];const m=k;let U;e[9]===Symbol.for("react.memo_cache_sentinel")?(U=s=>{ae(s),Z(!0)},e[9]=U):U=e[9];const xe=U;let D;e[10]!==i?(D=()=>{i&&_.post(`/admin/users/${i.id}/toggle-admin`,{},{onSuccess:()=>{Z(!1),ae(null)}})},e[10]=i,e[11]=D):D=e[11];const Q=D,he=ze,fe=$e;let M;e[12]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx(ge,{title:"Admin - Manage Users"}),e[12]=M):M=e[12];let L;e[13]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Manage Users"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"View and manage all platform users"})]}),e[13]=L):L=e[13];let R;e[14]===Symbol.for("react.memo_cache_sentinel")?(R=t.jsx(re,{href:"/admin/users/create",children:t.jsxs(S,{children:[t.jsx(De,{className:"mr-2 h-4 w-4"}),"Add Admin"]})}),e[14]=R):R=e[14];let T;e[15]===Symbol.for("react.memo_cache_sentinel")?(T=t.jsxs("div",{className:"flex items-center justify-between",children:[L,t.jsxs("div",{className:"flex gap-2",children:[R,t.jsx(re,{href:"/admin",children:t.jsxs(S,{variant:"outline",children:[t.jsx(Me,{className:"mr-2 h-4 w-4"}),"Back to Dashboard"]})})]})]}),e[15]=T):T=e[15];let c;e[16]!==K||e[17]!==X||e[18]!==o?(c=t.jsx("div",{className:"flex gap-2 border-b pb-2",children:["all","admin","user"].map(s=>t.jsxs(S,{variant:o===s?"default":"ghost",size:"sm",onClick:()=>K(s),className:"gap-2",children:[s==="all"&&t.jsx(me,{className:"h-4 w-4"}),s==="admin"&&t.jsx(se,{className:"h-4 w-4"}),s==="user"&&t.jsx(ke,{className:"h-4 w-4"}),s==="all"?"All Users":s.charAt(0).toUpperCase()+s.slice(1)+"s",t.jsx("span",{className:"ml-1 rounded-full bg-muted px-2 py-0.5 text-xs",children:X[s]})]},s))}),e[16]=K,e[17]=X,e[18]=o,e[19]=c):c=e[19];let B;e[20]===Symbol.for("react.memo_cache_sentinel")?(B=t.jsx(Le,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e[20]=B):B=e[20];let E;e[21]===Symbol.for("react.memo_cache_sentinel")?(E=s=>ce(s.target.value),e[21]=E):E=e[21];let d;e[22]!==n?(d=t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"relative",children:[B,t.jsx(Ne,{placeholder:"Search by name or email...",value:n,onChange:E,className:"pl-10"})]})}),e[22]=n,e[23]=d):d=e[23];let F;e[24]===Symbol.for("react.memo_cache_sentinel")?(F=t.jsx(S,{type:"submit",children:"Search"}),e[24]=F):F=e[24];let p;e[25]!==q||e[26]!==d?(p=t.jsx(le,{children:t.jsx(ie,{className:"pt-6",children:t.jsxs("form",{onSubmit:q,className:"flex gap-4",children:[d,F]})})}),e[25]=q,e[26]=d,e[27]=p):p=e[27];let x;e[28]!==m?(x=()=>m("name"),e[28]=m,e[29]=x):x=e[29];let I;e[30]===Symbol.for("react.memo_cache_sentinel")?(I=t.jsx(ne,{className:"h-3 w-3"}),e[30]=I):I=e[30];let h;e[31]!==x?(h=t.jsx("th",{className:"pb-3 pr-4",children:t.jsxs("button",{onClick:x,className:"flex items-center gap-1 hover:text-foreground",children:["User",I]})}),e[31]=x,e[32]=h):h=e[32];let O,$;e[33]===Symbol.for("react.memo_cache_sentinel")?(O=t.jsx("th",{className:"pb-3 pr-4",children:"Role"}),$=t.jsx("th",{className:"pb-3 pr-4",children:"Email Status"}),e[33]=O,e[34]=$):(O=e[33],$=e[34]);let f;e[35]!==m?(f=()=>m("created_at"),e[35]=m,e[36]=f):f=e[36];let z;e[37]===Symbol.for("react.memo_cache_sentinel")?(z=t.jsx(ne,{className:"h-3 w-3"}),e[37]=z):z=e[37];let u;e[38]!==f?(u=t.jsx("th",{className:"pb-3 pr-4",children:t.jsxs("button",{onClick:f,className:"flex items-center gap-1 hover:text-foreground",children:["Joined",z]})}),e[38]=f,e[39]=u):u=e[39];let H,V;e[40]===Symbol.for("react.memo_cache_sentinel")?(H=t.jsx("th",{className:"pb-3 pr-4",children:"Businesses"}),V=t.jsx("th",{className:"pb-3",children:"Actions"}),e[40]=H,e[41]=V):(H=e[40],V=e[41]);let j;e[42]!==h||e[43]!==u?(j=t.jsx("thead",{children:t.jsxs("tr",{className:"border-b text-left text-sm text-muted-foreground",children:[h,O,$,u,H,V]})}),e[42]=h,e[43]=u,e[44]=j):j=e[44];let g;e[45]!==a.data?(g=a.data.length>0?a.data.map(s=>t.jsxs("tr",{className:"border-b last:border-0",children:[t.jsx("td",{className:"py-4 pr-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[s.avatar?t.jsx("img",{src:s.avatar,alt:s.name,className:"h-10 w-10 rounded-full object-cover"}):t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-muted text-sm font-medium",children:s.name.charAt(0).toUpperCase()}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:s.name}),t.jsx("p",{className:"text-xs text-muted-foreground",children:s.email})]})]})}),t.jsx("td",{className:"py-4 pr-4",children:he(s.is_admin)}),t.jsx("td",{className:"py-4 pr-4",children:fe(s.email_verified_at)}),t.jsx("td",{className:"py-4 pr-4",children:t.jsx("p",{className:"text-sm",children:pe(s.created_at)})}),t.jsx("td",{className:"py-4 pr-4",children:t.jsxs("div",{className:"text-sm",children:[t.jsxs("p",{children:[s.owned_businesses_count," owned"]}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.businesses_count," associated"]})]})}),t.jsx("td",{className:"py-4",children:t.jsxs(be,{children:[t.jsx(ye,{asChild:!0,children:t.jsx(S,{variant:"ghost",size:"sm",children:t.jsx(Ue,{className:"h-4 w-4"})})}),t.jsxs(we,{align:"end",children:[t.jsx(Se,{children:"Actions"}),t.jsx(_e,{}),t.jsx(Ae,{onClick:()=>xe(s),children:s.is_admin?t.jsxs(t.Fragment,{children:[t.jsx(Fe,{className:"mr-2 h-4 w-4 text-red-600"}),"Remove Admin"]}):t.jsxs(t.Fragment,{children:[t.jsx(se,{className:"mr-2 h-4 w-4 text-purple-600"}),"Grant Admin"]})})]})]})})]},s.id)):t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"py-8 text-center text-muted-foreground",children:"No users found"})}),e[45]=a.data,e[46]=g):g=e[46];let N;e[47]!==g?(N=t.jsx("tbody",{children:g}),e[47]=g,e[48]=N):N=e[48];let v;e[49]!==j||e[50]!==N?(v=t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[j,N]})}),e[49]=j,e[50]=N,e[51]=v):v=e[51];let b;e[52]!==a.data.length||e[53]!==a.last_page||e[54]!==a.links||e[55]!==a.total?(b=a.last_page>1&&t.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t",children:[t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",a.data.length," of ",a.total," users"]}),t.jsx("div",{className:"flex gap-1",children:a.links.map(Oe)})]}),e[52]=a.data.length,e[53]=a.last_page,e[54]=a.links,e[55]=a.total,e[56]=b):b=e[56];let y;e[57]!==v||e[58]!==b?(y=t.jsx(le,{children:t.jsxs(ie,{className:"pt-6",children:[v,b]})}),e[57]=v,e[58]=b,e[59]=y):y=e[59];const W=i?.is_admin?"Remove Admin Privileges":"Grant Admin Privileges",Y=i?.is_admin?`Are you sure you want to remove admin privileges from ${i?.name}? They will no longer have access to the admin panel.`:`Are you sure you want to grant admin privileges to ${i?.name}? They will have full access to the admin panel.`,ee=i?.is_admin?"Remove Admin":"Grant Admin",te=i?.is_admin?"destructive":"info";let w;e[60]!==J||e[61]!==Q||e[62]!==W||e[63]!==Y||e[64]!==ee||e[65]!==te?(w=t.jsx(Ce,{open:J,onOpenChange:Z,onConfirm:Q,title:W,description:Y,confirmText:ee,variant:te}),e[60]=J,e[61]=Q,e[62]=W,e[63]=Y,e[64]=ee,e[65]=te,e[66]=w):w=e[66];let G;return e[67]!==c||e[68]!==p||e[69]!==y||e[70]!==w?(G=t.jsxs(ve,{breadcrumbs:Ie,children:[M,t.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[T,c,p,y,w]})]}),e[67]=c,e[68]=p,e[69]=y,e[70]=w,e[71]=G):G=e[71],G}function Oe(r,e){return t.jsx(S,{variant:r.active?"default":"outline",size:"sm",disabled:!r.url,onClick:()=>r.url&&_.get(r.url),dangerouslySetInnerHTML:{__html:r.label}},e)}function $e(r){return r?t.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-green-100 px-2 py-1 text-xs font-medium text-green-800 dark:bg-green-900 dark:text-green-200",children:[t.jsx(Re,{className:"h-3 w-3"}),"Verified"]}):t.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-yellow-100 px-2 py-1 text-xs font-medium text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",children:[t.jsx(Be,{className:"h-3 w-3"}),"Unverified"]})}function ze(r){return r?t.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-purple-100 px-2 py-1 text-xs font-medium text-purple-800 dark:bg-purple-900 dark:text-purple-200",children:[t.jsx(se,{className:"h-3 w-3"}),"Admin"]}):t.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-gray-100 px-2 py-1 text-xs font-medium text-gray-800 dark:bg-gray-800 dark:text-gray-200",children:[t.jsx(me,{className:"h-3 w-3"}),"User"]})}function He(r){return r?new Date(r).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric"}):"N/A"}export{At as default};
