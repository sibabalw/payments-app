import{c as Oe,r as qe,j as t,a as Je,H as Ke,L as Ge}from"./app-DWDC-BVo.js";import{B as Y}from"./createLucideIcon-CDiNb0OM.js";import{c as g,a as Me,b as Pe,C as v,d as Qe}from"./card-ErUD2DV9.js";import{I as se}from"./input-WOpVy3_A.js";import{B as Ve}from"./badge-BnVI9wD_.js";import{A as We}from"./app-layout-Csx9VZt2.js";import{C as Xe}from"./circle-alert-C7E7uvB-.js";import{A as Ye}from"./arrow-left-DgfFAESW.js";import{S as Ze}from"./save-p9NwWteO.js";import{P as et}from"./plus-BwK_Jy3D.js";import{T as tt}from"./trash-2-CztMoSM1.js";/* empty css            */import"./app-sidebar-header-r-OiXY8i.js";import"./index-B-id3RBu.js";import"./index-BspEiaub.js";import"./x-Cr_BKX42.js";import"./appearance-dropdown-Boh93vvE.js";import"./index-BCOzoWRm.js";import"./chevron-down-BehZftUK.js";import"./index-apnaeyBA.js";import"./index-l1Yz4tBP.js";import"./index-CcLcdVZM.js";import"./log-out-CNw_jzHT.js";import"./chevron-right-TaOApODu.js";import"./proxy-8KyYWbtH.js";import"./circle-check-DngFYpsd.js";import"./loader-circle-_uqlEWjJ.js";import"./circle-x-DCRTT9my.js";import"./credit-card-DHCU20zw.js";import"./dollar-sign-DGtOSjhC.js";import"./message-square-DRz1er9_.js";import"./file-text-xQShroE0.js";import"./users-CtagEMWm.js";import"./user-check-Dt0Yb2Ws.js";import"./clock-D4ogtgGS.js";import"./shield-B0GD2scd.js";function Zt(o){const e=Oe.c(151),{submission:s}=o;let le;e[0]!==s.data.employees?(le=s.data.employees||[],e[0]=s.data.employees,e[1]=le):le=e[1];const[i,Se]=qe.useState(le);let ae,ie;e[2]===Symbol.for("react.memo_cache_sentinel")?(ae={title:"Compliance",href:"/compliance"},ie={title:"UIF Declarations",href:"/compliance/uif"},e[2]=ae,e[3]=ie):(ae=e[2],ie=e[3]);const Ee=`Edit ${s.period_display}`,we=`/compliance/uif/${s.id}/edit`;let re;e[4]!==Ee||e[5]!==we?(re=[ae,ie,{title:Ee,href:we}],e[4]=Ee,e[5]=we,e[6]=re):re=e[6];const Ie=re,ee=ot,He=st;let oe;e[7]!==i?(oe=(a,r,m)=>{const l=[...i];if(l[a]={...l[a],[r]:m},r==="gross_remuneration"){const _=Number(m)||0,j=Math.min(_,17712),y=Math.round(j*.01*100)/100,N=y;l[a].uif_employee=y,l[a].uif_employer=N,l[a].total_uif=y+N}(r==="uif_employee"||r==="uif_employer")&&(l[a].total_uif=(Number(l[a].uif_employee)||0)+(Number(l[a].uif_employer)||0)),Se(l)},e[7]=i,e[8]=oe):oe=e[8];const n=oe;let me;e[9]!==i?(me=()=>{Se([...i,{employee_id:Date.now(),employee_name:"",id_number:"",gross_remuneration:0,uif_employee:0,uif_employer:0,total_uif:0,days_worked:30}])},e[9]=i,e[10]=me):me=e[10];const Ae=me;let ne;e[11]!==i?(ne=a=>{Se(i.filter((r,m)=>m!==a))},e[11]=i,e[12]=ne):ne=e[12];const te=ne;let ce;e[13]!==i||e[14]!==s.data||e[15]!==s.id?(ce=a=>{a.preventDefault();const r=He(i);Je.put(`/compliance/uif/${s.id}`,{data:{...s.data,employees:i,totals:r}})},e[13]=i,e[14]=s.data,e[15]=s.id,e[16]=ce):ce=e[16];const Fe=ce;let C,S,E,w,I,A,c,F,U,d,u,f,p,T,x,h,R,B,b;if(e[17]!==Ie||e[18]!==i||e[19]!==Fe||e[20]!==s.data.business?.name||e[21]!==s.data.business?.registration_number||e[22]!==s.data.business?.uif_reference||e[23]!==s.period_display||e[24]!==s.status){const a=He(i);E=We,B=Ie;const r=`Edit UI-19 - ${s.period_display}`;e[44]!==r?(b=t.jsx(Ke,{title:r}),e[44]=r,e[45]=b):b=e[45],R=Fe,T="flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-4";let m,l;e[46]===Symbol.for("react.memo_cache_sentinel")?(m=t.jsx(Y,{type:"button",variant:"ghost",size:"icon",asChild:!0,children:t.jsx(Ge,{href:"/compliance/uif",children:t.jsx(Ye,{className:"h-4 w-4"})})}),l=t.jsx("h1",{className:"text-2xl font-bold",children:"Edit UI-19 Declaration"}),e[46]=m,e[47]=l):(m=e[46],l=e[47]);let _;e[48]!==s.period_display?(_=t.jsxs("div",{className:"flex items-center gap-4",children:[m,t.jsxs("div",{children:[l,t.jsx("p",{className:"text-muted-foreground",children:s.period_display})]})]}),e[48]=s.period_display,e[49]=_):_=e[49];let j;e[50]!==s.status?(j=s.status==="submitted"&&t.jsxs(Ve,{variant:"secondary",className:"bg-amber-100 text-amber-800",children:[t.jsx(Xe,{className:"mr-1 h-3 w-3"}),"Read Only (Submitted)"]}),e[50]=s.status,e[51]=j):j=e[51];const y=s.status==="submitted";let N;e[52]===Symbol.for("react.memo_cache_sentinel")?(N=t.jsx(Ze,{className:"mr-2 h-4 w-4"}),e[52]=N):N=e[52];let K;e[53]!==y?(K=t.jsxs(Y,{type:"submit",disabled:y,children:[N,"Save Changes"]}),e[53]=y,e[54]=K):K=e[54];let Q;e[55]!==j||e[56]!==K?(Q=t.jsxs("div",{className:"flex items-center gap-2",children:[j,K]}),e[55]=j,e[56]=K,e[57]=Q):Q=e[57],e[58]!==_||e[59]!==Q?(x=t.jsxs("div",{className:"flex items-center justify-between",children:[_,Q]}),e[58]=_,e[59]=Q,e[60]=x):x=e[60];let be;e[61]===Symbol.for("react.memo_cache_sentinel")?(be=t.jsx(Me,{children:t.jsx(Pe,{children:"Business Information"})}),e[61]=be):be=e[61];let _e;e[62]===Symbol.for("react.memo_cache_sentinel")?(_e=t.jsx("label",{className:"text-sm text-muted-foreground",children:"Business Name"}),e[62]=_e):_e=e[62];const Re=s.data.business?.name||"N/A";let V;e[63]!==Re?(V=t.jsxs("div",{children:[_e,t.jsx("p",{className:"font-medium",children:Re})]}),e[63]=Re,e[64]=V):V=e[64];let je;e[65]===Symbol.for("react.memo_cache_sentinel")?(je=t.jsx("label",{className:"text-sm text-muted-foreground",children:"Registration Number"}),e[65]=je):je=e[65];const Be=s.data.business?.registration_number||"N/A";let W;e[66]!==Be?(W=t.jsxs("div",{children:[je,t.jsx("p",{className:"font-medium",children:Be})]}),e[66]=Be,e[67]=W):W=e[67];let ye;e[68]===Symbol.for("react.memo_cache_sentinel")?(ye=t.jsx("label",{className:"text-sm text-muted-foreground",children:"UIF Reference"}),e[68]=ye):ye=e[68];const De=s.data.business?.uif_reference||"N/A";let X;e[69]!==De?(X=t.jsxs("div",{children:[ye,t.jsx("p",{className:"font-medium",children:De})]}),e[69]=De,e[70]=X):X=e[70],e[71]!==V||e[72]!==W||e[73]!==X?(h=t.jsxs(v,{children:[be,t.jsx(g,{children:t.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[V,W,X]})})]}),e[71]=V,e[72]=W,e[73]=X,e[74]=h):h=e[74],U="grid gap-4 md:grid-cols-5";let Ne;e[75]===Symbol.for("react.memo_cache_sentinel")?(Ne=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Employees"}),e[75]=Ne):Ne=e[75];const ke=t.jsxs(g,{className:"pt-6",children:[Ne,t.jsx("p",{className:"text-2xl font-bold",children:a.total_employees})]});e[76]!==ke?(d=t.jsx(v,{children:ke}),e[76]=ke,e[77]=d):d=e[77];let ge;e[78]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Gross Remuneration"}),e[78]=ge):ge=e[78];const $e=t.jsxs(g,{className:"pt-6",children:[ge,t.jsx("p",{className:"text-2xl font-bold",children:ee(a.total_gross_remuneration)})]});e[79]!==$e?(u=t.jsx(v,{children:$e}),e[79]=$e,e[80]=u):u=e[80];let ve;e[81]===Symbol.for("react.memo_cache_sentinel")?(ve=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Employee UIF"}),e[81]=ve):ve=e[81];const Le=t.jsxs(g,{className:"pt-6",children:[ve,t.jsx("p",{className:"text-2xl font-bold text-blue-600",children:ee(a.total_uif_employee)})]});e[82]!==Le?(f=t.jsx(v,{children:Le}),e[82]=Le,e[83]=f):f=e[83];let Ce;e[84]===Symbol.for("react.memo_cache_sentinel")?(Ce=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Employer UIF"}),e[84]=Ce):Ce=e[84];const ze=t.jsxs(g,{className:"pt-6",children:[Ce,t.jsx("p",{className:"text-2xl font-bold text-blue-600",children:ee(a.total_uif_employer)})]});e[85]!==ze?(p=t.jsx(v,{children:ze}),e[85]=ze,e[86]=p):p=e[86],S=v,F="bg-primary/5",C=g,A="pt-6",e[87]===Symbol.for("react.memo_cache_sentinel")?(c=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Total UIF"}),e[87]=c):c=e[87],w="text-2xl font-bold text-primary",I=ee(a.total_uif_contribution),e[17]=Ie,e[18]=i,e[19]=Fe,e[20]=s.data.business?.name,e[21]=s.data.business?.registration_number,e[22]=s.data.business?.uif_reference,e[23]=s.period_display,e[24]=s.status,e[25]=C,e[26]=S,e[27]=E,e[28]=w,e[29]=I,e[30]=A,e[31]=c,e[32]=F,e[33]=U,e[34]=d,e[35]=u,e[36]=f,e[37]=p,e[38]=T,e[39]=x,e[40]=h,e[41]=R,e[42]=B,e[43]=b}else C=e[25],S=e[26],E=e[27],w=e[28],I=e[29],A=e[30],c=e[31],F=e[32],U=e[33],d=e[34],u=e[35],f=e[36],p=e[37],T=e[38],x=e[39],h=e[40],R=e[41],B=e[42],b=e[43];let D;e[88]!==w||e[89]!==I?(D=t.jsx("p",{className:w,children:I}),e[88]=w,e[89]=I,e[90]=D):D=e[90];let k;e[91]!==C||e[92]!==A||e[93]!==c||e[94]!==D?(k=t.jsxs(C,{className:A,children:[c,D]}),e[91]=C,e[92]=A,e[93]=c,e[94]=D,e[95]=k):k=e[95];let $;e[96]!==S||e[97]!==F||e[98]!==k?($=t.jsx(S,{className:F,children:k}),e[96]=S,e[97]=F,e[98]=k,e[99]=$):$=e[99];let L;e[100]!==U||e[101]!==d||e[102]!==u||e[103]!==f||e[104]!==p||e[105]!==$?(L=t.jsxs("div",{className:U,children:[d,u,f,p,$]}),e[100]=U,e[101]=d,e[102]=u,e[103]=f,e[104]=p,e[105]=$,e[106]=L):L=e[106];let de;e[107]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsxs("div",{children:[t.jsx(Pe,{children:"Employee Contributions"}),t.jsx(Qe,{children:"Edit employee UIF contribution details"})]}),e[107]=de):de=e[107];const Ue=s.status==="submitted";let ue;e[108]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsx(et,{className:"mr-2 h-4 w-4"}),e[108]=ue):ue=e[108];let z;e[109]!==Ae||e[110]!==Ue?(z=t.jsxs(Me,{className:"flex flex-row items-center justify-between",children:[de,t.jsxs(Y,{type:"button",variant:"outline",size:"sm",onClick:Ae,disabled:Ue,children:[ue,"Add Employee"]})]}),e[109]=Ae,e[110]=Ue,e[111]=z):z=e[111];let fe;e[112]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsx("thead",{children:t.jsxs("tr",{className:"border-b bg-muted/50",children:[t.jsx("th",{className:"text-left p-3",children:"ID Number"}),t.jsx("th",{className:"text-left p-3",children:"Employee Name"}),t.jsx("th",{className:"text-right p-3",children:"Gross Remuneration"}),t.jsx("th",{className:"text-right p-3",children:"Employee UIF"}),t.jsx("th",{className:"text-right p-3",children:"Employer UIF"}),t.jsx("th",{className:"text-right p-3",children:"Total UIF"}),t.jsx("th",{className:"text-center p-3 w-16",children:"Actions"})]})}),e[112]=fe):fe=e[112];let H;if(e[113]!==i||e[114]!==te||e[115]!==s.status||e[116]!==n){let a;e[118]!==te||e[119]!==s.status||e[120]!==n?(a=(r,m)=>t.jsxs("tr",{className:"border-b",children:[t.jsx("td",{className:"p-2",children:t.jsx(se,{value:r.id_number||"",onChange:l=>n(m,"id_number",l.target.value),className:"font-mono text-xs",disabled:s.status==="submitted"})}),t.jsx("td",{className:"p-2",children:t.jsx(se,{value:r.employee_name||"",onChange:l=>n(m,"employee_name",l.target.value),disabled:s.status==="submitted"})}),t.jsx("td",{className:"p-2",children:t.jsx(se,{type:"number",step:"0.01",value:r.gross_remuneration||"",onChange:l=>n(m,"gross_remuneration",parseFloat(l.target.value)||0),className:"text-right",disabled:s.status==="submitted"})}),t.jsx("td",{className:"p-2",children:t.jsx(se,{type:"number",step:"0.01",value:r.uif_employee||"",onChange:l=>n(m,"uif_employee",parseFloat(l.target.value)||0),className:"text-right",disabled:s.status==="submitted"})}),t.jsx("td",{className:"p-2",children:t.jsx(se,{type:"number",step:"0.01",value:r.uif_employer||"",onChange:l=>n(m,"uif_employer",parseFloat(l.target.value)||0),className:"text-right",disabled:s.status==="submitted"})}),t.jsx("td",{className:"p-2 text-right font-semibold",children:ee(r.total_uif||0)}),t.jsx("td",{className:"p-2 text-center",children:t.jsx(Y,{type:"button",variant:"ghost",size:"icon",onClick:()=>te(m),disabled:s.status==="submitted",className:"text-destructive hover:text-destructive",children:t.jsx(tt,{className:"h-4 w-4"})})})]},r.employee_id||m),e[118]=te,e[119]=s.status,e[120]=n,e[121]=a):a=e[121],H=i.map(a),e[113]=i,e[114]=te,e[115]=s.status,e[116]=n,e[117]=H}else H=e[117];let G;e[122]!==H?(G=t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[fe,t.jsx("tbody",{children:H})]})}),e[122]=H,e[123]=G):G=e[123];let M;e[124]!==i.length?(M=i.length===0&&t.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'No employees added. Click "Add Employee" to start.'}),e[124]=i.length,e[125]=M):M=e[125];let P;e[126]!==G||e[127]!==M?(P=t.jsxs(g,{children:[G,M]}),e[126]=G,e[127]=M,e[128]=P):P=e[128];let Z;e[129]!==z||e[130]!==P?(Z=t.jsxs(v,{children:[z,P]}),e[129]=z,e[130]=P,e[131]=Z):Z=e[131];let pe;e[132]===Symbol.for("react.memo_cache_sentinel")?(pe=t.jsx(Y,{type:"button",variant:"outline",asChild:!0,children:t.jsx(Ge,{href:"/compliance/uif",children:"Cancel"})}),e[132]=pe):pe=e[132];const Te=s.status==="submitted";let xe;e[133]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsx(Ze,{className:"mr-2 h-4 w-4"}),e[133]=xe):xe=e[133];let O;e[134]!==Te?(O=t.jsxs("div",{className:"flex justify-end gap-2",children:[pe,t.jsxs(Y,{type:"submit",disabled:Te,children:[xe,"Save Changes"]})]}),e[134]=Te,e[135]=O):O=e[135];let q;e[136]!==T||e[137]!==x||e[138]!==h||e[139]!==L||e[140]!==Z||e[141]!==O?(q=t.jsxs("div",{className:T,children:[x,h,L,Z,O]}),e[136]=T,e[137]=x,e[138]=h,e[139]=L,e[140]=Z,e[141]=O,e[142]=q):q=e[142];let J;e[143]!==R||e[144]!==q?(J=t.jsx("form",{onSubmit:R,children:q}),e[143]=R,e[144]=q,e[145]=J):J=e[145];let he;return e[146]!==E||e[147]!==B||e[148]!==b||e[149]!==J?(he=t.jsxs(E,{breadcrumbs:B,children:[b,J]}),e[146]=E,e[147]=B,e[148]=b,e[149]=J,e[150]=he):he=e[150],he}function st(o){return{total_employees:o.length,total_gross_remuneration:o.reduce(rt,0),total_uif_employee:o.reduce(it,0),total_uif_employer:o.reduce(at,0),total_uif_contribution:o.reduce(lt,0)}}function lt(o,e){return o+(Number(e.total_uif)||0)}function at(o,e){return o+(Number(e.uif_employer)||0)}function it(o,e){return o+(Number(e.uif_employee)||0)}function rt(o,e){return o+(Number(e.gross_remuneration)||0)}function ot(o){return new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(o)}export{Zt as default};
